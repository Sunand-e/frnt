"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{77447:function(e,t,n){n.d(t,{d:function(){return a}});var o=n(87462),r=n(67294),l=n(54142),a=r.forwardRef(function(e,t){return r.createElement(l.r,(0,o.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),r.createElement("path",{d:"M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1zm4 0v6h8V1H4zm8 8H4v6h8V9zM1 1v2h2V1H1zm2 3H1v2h2V4zM1 7v2h2V7H1zm2 3H1v2h2v-2zm-2 3v2h2v-2H1zM15 1h-2v2h2V1zm-2 3v2h2V4h-2zm2 3h-2v2h2V7zm-2 3v2h2v-2h-2zm2 3h-2v2h2v-2z"}))});a.displayName="Film"},48453:function(e,t,n){n.d(t,{E:function(){return a}});var o=n(87462),r=n(67294),l=n(54142),a=r.forwardRef(function(e,t){return r.createElement(l.r,(0,o.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 48 48"},e,{ref:t}),r.createElement("path",{d:"M31 14.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM6 10.75A4.75 4.75 0 0 1 10.75 6h26.5A4.75 4.75 0 0 1 42 10.75v26.5c0 .86-.23 1.66-.63 2.36L26.63 25.08a3.75 3.75 0 0 0-5.26 0L6.63 39.62c-.4-.7-.63-1.5-.63-2.36v-26.5zM26 17a5 5 0 1 0 10 0 5 5 0 0 0-10 0zM8.4 41.38c.69.4 1.5.62 2.35.62h26.5c.86 0 1.66-.23 2.36-.63l-14.73-14.5a1.25 1.25 0 0 0-1.76 0L8.4 41.37z"}))});a.displayName="Image"},11173:function(e,t,n){var o=n(93354),r=n(72149),l=n(35944),a=function(e){var t=e.placeholder,n=e.src,a=e.buttonText,i=e.onClick,c=e.onLoad,u=e.onClear,s=e.className,d=e.isButtonAlwaysVisible;return(0,l.BX)("div",{className:(0,o.Z)("relative",void 0===s?"":s),children:[(0,l.tZ)("img",{onLoad:c,className:"block max-w-full px-1 w-full borderRadius[3px] object-cover boxShadow[0 0 0 1px rgb(59,130,249)]",src:n||t||"/images/placeholder-image.png"}),(0,l.tZ)("div",{className:"absolute w-full h-full top-0 left-0 flex items-center justify-center ".concat(!n||d?"":"opacity-0 hover:opacity-100"),children:(0,l.tZ)("a",{className:"cursor-pointer bg-main-secondary bg-opacity-60 text-white py-1 px-4 rounded hover:bg-opacity-90",onClick:i,children:null!=a?a:"Choose image"})}),u&&n&&(0,l.tZ)("div",{className:"absolute p-2 w-12 h-12 flex items-center justify-center top-0 right-0 'opacity-60 hover:opacity-100'}",children:(0,l.tZ)(r.r,{className:"w-6 cursor-pointer hover:w-14 text-red-800",onClick:u})})]})};t.Z=a},28024:function(e,t,n){var o=n(67294),r=n(95815),l=n(27675),a=n(11173),i=n(35944),c=function(e){var t=e.placeholder,n=e.src,c=e.buttonText,u=e.isButtonAlwaysVisible,s=e.className,d=e.onSelect,m=(0,o.useContext)(r.t).handleModal,f=function(){m({title:"Choose image",content:(0,i.tZ)(l.Z,{onItemSelect:d,typeFilter:["image"]}),size:"lg"})};return(0,i.tZ)(a.Z,{placeholder:t,src:n,buttonText:c,isButtonAlwaysVisible:u,onClick:f,onClear:function(){return d(null)},className:void 0===s?"":s})};t.Z=c},99083:function(e,t,n){var o=n(67294),r=n(87536),l=n(95815),a=n(28024),i=n(35944),c=function(e){var t=e.placeholder,n=e.buttonText,c=e.control,u=e.name,s=e.origImage,d=e.onSelect,m=e.className,f=e.isButtonAlwaysVisible,v=(0,r.bc)({control:c,name:u}).field,p=(0,o.useContext)(l.t).closeModal,b=(0,o.useState)(s),h=b[0],g=b[1],y=function(e){v.onChange((null==e?void 0:e.id)||null),g(e),d?d(e):p()};return(0,i.tZ)(i.HY,{children:(0,i.tZ)(a.Z,{className:void 0===m?"":m,placeholder:t,src:null==h?void 0:h.location,buttonText:n,onSelect:y,isButtonAlwaysVisible:void 0===f||f})})};t.Z=c},29990:function(e,t,n){var o=n(59499),r=n(35944),l=function(e){var t,n=e.label,l=e.value,a=e.type,i=e.onChange,c=e.name,u=void 0===c?"":c,s=e.placeholder;return(0,r.BX)("div",{className:"mb-4",children:[(0,r.tZ)("label",{className:"block text-gray-500 text-sm font-bold mb-2",htmlFor:u,children:n}),(0,r.tZ)("input",(t={type:void 0===a?"text":a,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:l,id:u},(0,o.Z)(t,"type","text"),(0,o.Z)(t,"placeholder",void 0===s?"":s),(0,o.Z)(t,"onChange",i),t))]})};t.Z=l},4517:function(e,t,n){var o=n(87536),r=n(67294),l=n(5152),a=n.n(l),i=n(35944),c=a()(function(){return Promise.all([n.e(2937),n.e(9584),n.e(4033),n.e(246)]).then(n.bind(n,246))},{ssr:!1,loadableGenerated:{webpack:function(){return[246]}}}),u=function(e){var t=e.control,n=e.name,l=e.label,a=e.initialValue,u=(0,r.useRef)();(0,r.useEffect)(function(){console.log("editorRef"),console.log(u)},[]);var s=(0,r.useState)(void 0===a?null:a),d=s[0],m=s[1],f=(0,o.bc)({control:t,name:n}).field,v=function(e){m(e),f.onChange(e)};return(0,i.BX)(i.HY,{children:[(0,i.tZ)("label",{className:"block",children:(0,i.tZ)("span",{className:"text-sm font-medium text-gray-700",children:l})}),(0,i.tZ)(c,{ref:u,id:"rte",value:d,onChange:v,className:"flex-grow z-0"})]})};t.Z=u},80663:function(e,t,n){n.d(t,{Z:function(){return B}});var o=n(4730),r=n(59499),l=n(78773),a=n(87536),i=n(67294),c=n(97088),u=n(4517),s=n(85146),d=n(87442),m=n(28275),f=n(56982),v=n(55363),p=n(35944),b=function(e){var t,n,o=e.control,r=e.onRemove,l=(0,a.bc)({control:o,name:"resourceValue"}).field,i=(0,a.bc)({control:o,name:"type"}).field;switch(null===(t=i.value)||void 0===t?void 0:t.name){case"document":return(0,p.tZ)(s.Z,{pdfPreview:!0,file:l.value,onRemove:r});case"video":return(0,p.tZ)(d.Z,{url:l.value,onRemove:r});case"image":return(0,p.tZ)(m.Z,{image:l.value,onRemove:r});case"audio":return(0,p.tZ)(f.Z,{url:null===(n=l.value)||void 0===n?void 0:n.location,onClose:r});case"link":return(0,p.tZ)(v.Z,{url:l.value,onRemove:r});default:return(0,p.tZ)(p.HY,{children:"Something went wrong. Please go back and try again."})}},h=n(95815),g=n(29990),y=function(e){var t=e.onAddLink,n=(0,i.useState)(),o=n[0],r=n[1],a=(0,i.useState)(),c=a[0],u=a[1];return(0,p.BX)(p.HY,{children:[(0,p.tZ)(g.Z,{onChange:function(e){return r(e.target.value)},label:"Link URL",value:o,name:"url",placeholder:"e.g.",type:"url"}),o&&(0,p.BX)(p.HY,{children:[(0,p.tZ)(v.Z,{setValidUrl:u,url:o}),c&&(0,p.tZ)("div",{className:"flex justify-end",children:(0,p.tZ)(l.Z,{className:"ml-2",onClick:function(){return t(c)},children:"Add Link"})})]})]})},Z=n(35756),w=n.n(Z),x=function(e){var t=e.onAddVideo,n=(0,i.useState)(""),o=n[0],r=n[1],a=(0,i.useState)(""),c=a[0],u=a[1];return(0,i.useEffect)(function(){console.log();var e=w().parse(o);u(w().create({videoInfo:e,format:"embed"}))},[o]),(0,p.BX)(p.HY,{children:[(0,p.tZ)(g.Z,{onChange:function(e){return r(e.target.value)},label:"Video URL",value:o,name:"videoUrl",placeholder:"Enter video URL..."}),c&&(0,p.BX)(p.HY,{children:[(0,p.tZ)("label",{className:"block text-gray-500 text-sm font-bold mb-2",children:"Preview:"}),(0,p.tZ)(d.Z,{url:c})]}),(0,p.tZ)("div",{className:"flex justify-end",children:c&&(0,p.tZ)(l.Z,{className:"ml-2",onClick:function(){return t(c)},children:"Add Video"})})]})},O=n(27675),j=function(e){var t=(0,i.useContext)(h.t),n=t.handleModal,o=t.closeModal,r=(0,a.bc)({control:e,name:"type"}).field;(0,a.bc)({control:e,name:"title"}).field;var l=(0,a.bc)({control:e,name:"resourceValue"}).field,c=function(e){l.onChange(e),o()},u=function(e){n({title:e.chooseLabel,content:(0,p.tZ)(O.Z,{typeFilter:[e.name],onItemSelect:c}),size:"lg"})},s=function(){n({title:"Video URL",content:(0,p.tZ)(x,{onAddVideo:c}),size:"lg"})},d=function(){n({title:"Enter a URL",content:(0,p.tZ)(y,{onAddLink:c}),size:"lg"})};return{handleTypeSelect:function(e){switch(r.onChange(e),e.name){case"document":case"image":case"audio":u(e);break;case"video":s();break;case"link":d()}}}},k=function(e){var t=e.control,n=(0,a.bc)({control:t,name:"type"}).field,o=j(t).handleTypeSelect;return(0,p.tZ)(l.Z,{onClick:function(){return o(n.value)},children:n.value.chooseLabel})},N=n(17674),V=n(60501);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P=function(e){var t=j(e.control).handleTypeSelect,n=Object.entries(V.i).map(function(e,n){var o=(0,N.Z)(e,2),r=o[0],l=o[1];return(0,p.BX)("div",{onClick:function(e){return t(L(L({},l),{},{name:r}))},className:"flex-grow flex flex-col cursor-pointer text-main-secondary items-center hover:text-main h-18 text-xs",children:[l.icon&&(0,p.tZ)(l.icon,{className:"h-full text-main-secondary/80 hover:text-main-secondary"}),(0,p.tZ)("span",{className:"text-center",children:l.label})]},n)});return(0,p.BX)("div",{className:"flex flex-col items-center",children:[(0,p.tZ)("p",{className:"mb-3",children:"Choose a resource type:"}),(0,p.tZ)("div",{className:"bg-main bg-opacity-10 p-4 max-w-screen-lg w-full border-2 border-gray-300 border-dashed rounded-md",children:(0,p.tZ)("div",{className:"flex justify-between",children:n})})]})},S=n(11163),z=n(69726),E=n(99083),A=["__typename","image"],R=["resourceValue","type","description"];function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var B=function(e){var t,n,r,s,d,m,f=e.resource,v=void 0===f?null:f,h=e.onSubmit,g=(0,S.useRouter)();d=["link","video"].includes(null==v?void 0:v.contentType)?null==v?void 0:null===(m=v.content)||void 0===m?void 0:m.url:null==v?void 0:v[v.contentType];var y=M(M({},(null==v?void 0:v.id)&&{id:v.id}),{},{resourceValue:d,type:v&&M({name:v.contentType},V.i[v.contentType]),title:null==v?void 0:v.title,description:null==v?void 0:null===(t=v.content)||void 0===t?void 0:t.description,tags:(null==v?void 0:null===(n=v.tags)||void 0===n?void 0:n.map(function(e){return e.__typename,e.image,(0,o.Z)(e,A)}))||[],image:null==v?void 0:v.image}),Z=(0,a.cI)({defaultValues:y}),w=Z.watch,x=Z.register,O=Z.setValue,j=Z.handleSubmit,N=Z.control,C=(Z.setFocus,Z.formState.errors),L=w(),T=L.type,B=L.resourceValue,_=L.title,H=(0,i.useState)(!1),D=H[0],I=H[1],X=function(e){var t=e.resourceValue,n=e.type,r=e.description,l=(0,o.Z)(e,R),a=["link","video"].includes(n.name)?{content:{url:t}}:{mediaItemId:null==t?void 0:t.id};console.log("formValues"),console.log(e),h(M(M(M({},l),a),{},{content:M(M({},a.content),{},{description:r}),contentType:n.name})),g.push("/admin/resources")};(0,i.useEffect)(function(){T&&B&&(I(!0),_||U(B))},[T,B]);var U=function(e){switch(null==T?void 0:T.name){case"document":case"image":case"audio":_||O("title",e.fileName.replace(/\.[^/.]+$/,""))}},Y=v?"Update ".concat(null==T?void 0:T.name," resource"):"Add ".concat(null==T?void 0:T.name," to resource library");return D||v?(0,p.BX)("form",{className:"h-full w-full max-w-screen-lg flex flex-col space-y-4",onSubmit:j(X),children:[(0,p.tZ)(c.Z,{label:null!==(r=null==T?void 0:T.titleLabel)&&void 0!==r?r:"Title",placeholder:"Resource name",inputAttrs:x("title",{required:"Resource name is required",maxLength:{value:120,message:"The resource name must have no more than 120 characters"}})}),C.title&&(0,p.tZ)("small",{className:"text-danger text-red-500",children:C.title.message}),(0,p.tZ)(z.Z,{control:N,tagType:"category",label:"Categories"}),(0,p.tZ)(u.Z,{initialValue:null==v?void 0:null===(s=v.content)||void 0===s?void 0:s.description,label:"Description",name:"description",control:N}),B?(0,p.tZ)(b,{control:N,onRemove:function(){return O("resourceValue",null)}}):(0,p.tZ)(k,{control:N}),["link","document","audio"].includes(T.name)&&(0,p.tZ)("div",{className:"max-w-lg shadow bg-main/10",children:(0,p.tZ)(E.Z,{buttonText:"Thumbnail image (optional)",origImage:null==y?void 0:y.image,control:N,name:"imageId"})}),B&&(0,p.tZ)(l.Z,{type:"submit",children:Y})]}):(0,p.tZ)(P,{control:N})}},60501:function(e,t,n){n.d(t,{i:function(){return i}});var o=n(32284),r=n(51876),l=n(32274),a=n(2779),i={document:{titleLabel:"Document name",chooseLabel:"Choose a document",label:"Document",readMoreLabel:"View document",icon:o.B,content:{blocks:[{type:"text"}]}},video:{titleLabel:"Video title",chooseLabel:"Choose a video",label:"Video",readMoreLabel:"Watch now",icon:r.n,content:{blocks:[{type:"video"}]}},audio:{titleLabel:"Audio title",chooseLabel:"Choose audio file",label:"Audio",readMoreLabel:"Listen now",icon:l.M,content:{blocks:[{type:"audio"}]}},link:{titleLabel:"Link title",chooseLabel:"Enter URL",label:"Link",readMoreLabel:"More details",icon:a.r,content:{blocks:[{type:"button"}]}}}},69726:function(e,t,n){var o=n(4730),r=n(59499),l=n(58779),a=n(39299),i=n(87536),c=n(35944),u=["__typename","image"],s=["__typename","image","_deleted"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f=function(e){var t,n=e.control,r=e.tagType,d=e.label,f=(0,l.Z)(),v=f.tags;f.loading,f.error;var p=(0,i.bc)({control:n,name:"tags"}).field,b=m({isMulti:!0,options:v&&v.filter(function(e){return e.tagType===r}),value:null===(t=p.value)||void 0===t?void 0:t.map(function(e){return e.__typename,e.image,(0,o.Z)(e,u)}),getOptionValue:function(e){var t;return null!==(t=e.value)&&void 0!==t?t:e.id},onChange:function(e){p.onChange(e.map(function(e){return e.__typename,e.image,e._deleted,(0,o.Z)(e,s)}))},className:"w-full",isSearchable:!1,styles:{menuPortal:function(e){return m(m({},e),{},{zIndex:9999})}}},{menuPortalTarget:document.body});return(0,c.tZ)(c.HY,{children:v&&(0,c.BX)("label",{className:"block z-50",children:[d&&(0,c.tZ)("span",{className:"text-sm font-medium text-gray-700",children:d}),(0,c.tZ)(a.ZP,m({},b))]})})};t.Z=f},58779:function(e,t,n){var o=n(71641),r=n(54232);t.Z=function(){var e=(0,o.a)(r.F$),t=e.loading,n=e.error,l=e.data;return{tags:(l=void 0===l?{}:l).tags,loading:t,error:n}}},24545:function(e,t,n){var o=n(11163),r=n(67294),l=n(78773),a=n(94225),i=n(35944),c=function(e){var t=(0,o.useRouter)();(0,r.useEffect)(function(){(0,a.ac)((0,i.tZ)("div",{className:"space-x-2 flex items-center",children:e.map(function(e,n){return(0,i.tZ)(l.Z,{onClick:function(){"function"==typeof e[1]?e[1]():t.push(e[1])},children:e[0]},n)})}))},[])};t.Z=c},23296:function(e,t,n){n.d(t,{X:function(){return a}});var o=n(67294);let r=()=>{},l={root:null,rootMargin:"0px 0px 0px 0px",threshold:[0,1]};function a(e=()=>{},t=l){let{root:n=null,rootMargin:a,threshold:i}=t,[c,u]=(0,o.useState)(null),[s,d]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(c){let n=new IntersectionObserver((t,n)=>{for(let{isIntersecting:o}of t)d(o);e(t,n)},t);return n.observe(c),()=>{n.disconnect()}}return r},[c,e,n,a,i,t]);let m=(0,o.useCallback)(e=>{u(e)},[]);return[m,s]}},4730:function(e,t,n){n.d(t,{Z:function(){return o}});function o(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},l=Object.keys(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}}}]);