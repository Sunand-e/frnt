(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5108],{78773:function(e,t,n){"use strict";var r=n(20516),i=n.n(r),o=n(35944),a=function(e){var t=e.onClick,n=e.disabled,r=e.type,a=e.displayType,c=e.size,l=e.className,u=e.children,s="bg-main group-hover:bg-opacity-80 transition-colors duration-1000";return(void 0===a?"normal":a)==="alert"&&(s="bg-red-800 group-hover:bg-red-700 transition-colors duration-1000"),(0,o.BX)("button",{type:void 0===r?"button":r,disabled:void 0!==n&&n,className:"\n        ".concat(l,"\n        ").concat(i().button,"\n        ").concat(i().button_bestia,"\n        ").concat("sm"===c?"px-1":"px-8","\n\n        min-w-16 py-2 \n        whitespace-nowrap nowrap\n        border border-transparent rounded-md\n        text-sm\n        group\n        disabled bg-main text-white\n        focus:bg-opacity-50 focus:outline-none \n        active:bg-opacity-50 \n      "),onClick:t,children:[(0,o.tZ)("div",{className:"".concat(i().button__bg," ").concat(s)}),(0,o.tZ)("span",{className:i().button__span,children:u})]})};t.Z=a},64202:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(90116),i=n(25440),o=n.n(i),a=n(35944);function c(e){var t=e.text,n=e.className;return(0,a.BX)("div",{className:"".concat(n," display flex-col text-center text-main-secondary mx-auto"),children:[t,(0,a.tZ)("div",{className:o().loadingCubeGrid,children:(0,r.Z)(Array(9)).map(function(e,t){return(0,a.tZ)("div",{className:"".concat(o().loadingCube," ").concat(o().loadingCube1," ").concat(o()["loadingCube".concat(t+1)]," bg-main-secondary")},t)})})]})}},96420:function(e,t,n){"use strict";var r=n(35064),i=n(57349),o=n(71674),a=n(16294),c=n(35944),l=function(e){var t=e.menuItems,n=e.buttonText,l=e.align,u=(0,o.Z)().userHasCapability,s=!t.filter(function(e){return console.log("item.capability"),console.log(e.capability),!e.capability||u(e.capability)}).length,d=(0,c.BX)(r.v.Button,{disabled:s,className:"inline-flex justify-center rounded-md border border-gray-300 ".concat(s?"bg-gray-300 text-gray-400":"bg-white text-main-secondary"," bg-white px-4 py-2 text-sm font-medium shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-main focus:ring-offset-2 focus:ring-offset-gray-100"),children:[void 0===n?"Actions":n,(0,c.tZ)(i.Z,{className:"-mr-1 ml-2 h-5 w-5","aria-hidden":"true"})]});return(0,c.tZ)(a.Z,{align:void 0===l?"right":l,menuItems:t,button:d})};t.Z=l},5564:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(90116),i=n(74094),o=n(27060),a=n(67294),c=n(96420),l=n(35944),u=function(e){var t=e.bulkActions;return(0,l.tZ)(c.Z,{align:"left",menuItems:t,buttonText:"Bulk actions"})},s=n(59499),d=n(4730),b=["indeterminate","className"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var g=function(e){var t=e.indeterminate,n=e.className,r=(0,d.Z)(e,b),i=(0,a.useRef)(null);return(0,a.useEffect)(function(){"boolean"==typeof t&&(i.current.indeterminate=!r.checked&&t)},[i,t]),(0,l.tZ)("input",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({type:"checkbox",ref:i,className:(void 0===n?"":n)+" cursor-pointer h-4 w-4 rounded border-gray-300 text-main focus:ring-main"},r))},f=n(57815),m=function(e){var t=e.tableData,n=e.tableCols,c=(e.options,e.bulkActions),s=void 0===c?[]:c,d=e.onRowSelect,b=void 0===d?function(e){return null}:d,p=(0,a.useState)([]),m=p[0],y=p[1],v=(0,a.useState)("");v[0],v[1];var h=(0,a.useState)({}),O=h[0],w=h[1],_=!!s.length,Z=function(e){w(e)};(0,a.useEffect)(function(){b(x.getSelectedRowModel().flatRows.map(function(e){return e.original.id}))},[O]);var j=[].concat((0,r.Z)(_?[{id:"select",header:function(e){var t=e.table;return(0,l.tZ)(g,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler()})},cell:function(e){var t=e.row;return(0,l.tZ)(g,{checked:t.getIsSelected(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler()})}}]:[]),(0,r.Z)(n)),x=(0,i.b7)({state:{sorting:m,rowSelection:O},columns:j,data:t,onSortingChange:y,onRowSelectionChange:Z,getCoreRowModel:(0,o.sC)(),getSortedRowModel:(0,o.tj)(),getFilteredRowModel:(0,o.vL)(),debugTable:!0});return(0,l.BX)(l.HY,{children:[(0,l.tZ)("div",{className:"mb-2",children:!!s.length&&(0,l.tZ)(u,{bulkActions:s})}),(0,l.tZ)(f.Z,{table:x,selectable:_})]})}},57815:function(e,t,n){"use strict";var r=n(59499),i=n(74094),o=n(16246),a=n(35944);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=function(e){var t=e.table,n=e.selectable;return(0,a.tZ)("div",{className:"flex flex-col",children:(0,a.tZ)("div",{className:"-my-2 overflow-y-visible sm:-mx-6 lg:-mx-8",children:(0,a.tZ)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,a.tZ)("div",{className:"shadow overflow-y-visible border-b border-gray-200 sm:rounded-lg",children:(0,a.BX)("table",{className:"min-w-full divide-y divide-gray-200 bg-white",children:[(0,a.tZ)("thead",{className:"bg-gray-50",children:t.getHeaderGroups().map(function(e){return(0,a.tZ)("tr",{children:e.headers.map(function(e,t){var r,c;return(0,a.BX)("th",{colSpan:e.colSpan,className:"px-6 py-3 text-left h-11 text-xs font-medium max-w-max text-gray-500 uppercase tracking-wider",style:l({textAlign:t>(n?1:0)?"center":"left"},(null===(r=e.column.columnDef)||void 0===r?void 0:r.id)==="select"?{paddingRight:0,width:"16px"}:{}),children:[" ",e.isPlaceholder?null:(0,a.tZ)("div",{className:"inline-block",children:(0,a.BX)("div",{className:"".concat(e.column.getCanSort()?"cursor-pointer select-none":""," flex space-x-2 max-w-max items-center justify-center"),onClick:e.column.getToggleSortingHandler(),children:[(0,a.tZ)("div",{children:(0,i.ie)(e.column.columnDef.header,e.getContext())}),e.column.getIsSorted()&&(0,a.tZ)("div",{className:"w-4 h-4 flex items-center",children:null!==(c=({asc:(0,a.tZ)(o.U,{className:"w-full"}),desc:(0,a.tZ)(o.U,{className:"rotate-180"})})[e.column.getIsSorted()])&&void 0!==c?c:null})]})})]},e.id)})},e.id)})}),(0,a.tZ)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.getRowModel().rows.map(function(e){return(0,a.tZ)("tr",{children:e.getVisibleCells().map(function(e,t){var r;return(0,a.tZ)("td",{className:"".concat(t>(n?1:0)?"text-center":""," px-6 py-4 text-sm text-gray-900"),style:l({},(null===(r=e.column.columnDef)||void 0===r?void 0:r.id)==="select"?{paddingRight:0,width:"16px"}:{}),children:(0,i.ie)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})})})})})};t.Z=u},39106:function(e,t,n){"use strict";n.d(t,{EM:function(){return u},xt:function(){return l}});var r,i,o,a=n(71383),c=n(17283),l=(0,c.Ps)(r||(r=(0,a.Z)(["\n  fragment CapabilityFragment on Capability {\n    id\n    name\n    capabilityType\n    details\n    # _deleted @client\n  }\n"])));(0,c.Ps)(i||(i=(0,a.Z)(["\n  query GetCapability($id: ID!) {\n    capability(id: $id) {\n      ...CapabilityFragment\n    }\n  }\n  ","\n"])),l);var u=(0,c.Ps)(o||(o=(0,a.Z)(["\n  query GetCapabilities {\n    capabilities {\n      ...CapabilityFragment\n    }\n  }\n  ","\n"])),l)},40350:function(e,t,n){"use strict";var r=n(67294),i=n(94225);t.Z=function(e){(0,r.useEffect)(function(){(0,i.jL)(e)},[e])}},32434:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r,i=n(40350),o=n(59499),a=n(67294),c=n(5564),l=n(64202),u=n(71641),s=n(39106),d=n(78773),b=n(95258),p=n(39212),g=n(17674),f=n(71383),m=(0,n(17283).Ps)(r||(r=(0,f.Z)(["\n  mutation UpdateCapability(\n    $id: ID!\n    $details: JSON\n  ) {\n    updateCapability(\n      input: {\n        id: $id,\n        details: $details\n      }\n    ) {\n      capability {\n      ...CapabilityFragment\n      }\n    }\n  }\n  ","\n"])),s.xt),y=n(50319);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,y.D)(m),n=(0,g.Z)(t,2),r=n[0];return n[1],{updateCapability:function(t){var n=h({},t);r({variables:h({id:e},n)}).catch(function(e){})}}},w=n(24697),_=n(35944);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=function(e){var t,n=e.cap,r=e.type;e.value,e.containerClass,e.onUpdate;var i=O(n.id).updateCapability,a=(0,w.y1)(function(e){i(e)},1e3),c=function(e){var t=e.editor;t&&(console.log("editor"),console.log(t),console.log("cap.details[type]"),console.log(n.details[r]),a({id:n.id,details:j(j({},n.details),{},(0,o.Z)({},r,null==t?void 0:t.getJSON()))}))},l=(0,b.jE)({extensions:[p.Z],onUpdate:c,content:null==n?void 0:null===(t=n.details)||void 0===t?void 0:t[r]});return(0,_.BX)("div",{className:"flex w-full mb-2 space-x-2 text-xl",children:[(0,_.tZ)("span",{children:r}),l&&n&&(0,_.tZ)("div",{className:"border border-blue-300 w-full text-left",children:(0,_.tZ)(b.kg,{editor:l,className:"h-full"})})]})},C=function(e){var t=e.cap;return(0,_.tZ)("div",{className:"text-left",children:t&&(0,_.BX)(_.HY,{children:[(0,_.tZ)(x,{cap:t,type:"tenant"}),(0,_.tZ)(x,{cap:t,type:"group"}),(0,_.tZ)(x,{cap:t,type:"content"})]})})};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var P=function(){var e=(0,u.a)(s.EM),t=e.loading,n=e.error,r=e.data,i=(0,a.useMemo)(function(){return(null==r?void 0:r.capabilities)||[]},[r]),b=(0,a.useMemo)(function(){return[{header:"Capability Name",accessorKey:"name",style:{width:"300px"}},{header:"Details",cell:function(e){var t=e.cell;return(0,_.tZ)(C,{cap:t.row.original})}},{width:300,style:{width:"300px"},header:"Actions",id:"actions",cell:function(e){return e.cell,(0,_.tZ)("div",{className:"flex space-x-4 justify-center",children:(0,_.tZ)(d.Z,{children:"Save changes"})})}}]},[r]);return(0,_.BX)(_.HY,{children:[(0,_.tZ)("div",{className:"flex items-center flex-col mb-2 sm:justify-between sm:flex-row",children:(0,_.BX)("p",{children:["Showing ",i.length," capabilities"]})}),t&&(0,_.tZ)(l.Z,{}),n&&(0,_.tZ)("p",{children:"Unable to fetch capabilities."}),!t&&!n&&(0,_.tZ)(c.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},{tableData:i,tableCols:b,selectable:!0,enableRowSelection:!0}))]})},N=function(){return(0,i.Z)({title:"Capability Check"}),(0,_.tZ)(P,{})};N.navState={topLevel:"dashboard"};var D=N},29045:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/capability-check",function(){return n(32434)}])},20516:function(e){e.exports={button:"Button_button__RRrLU",button_bestia:"Button_button_bestia__QRXEX",button__bg:"Button_button__bg__EuarU",button__span:"Button_button__span__Tcje3"}},25440:function(e){e.exports={loadingCubeGrid:"LoadingSpinner_loadingCubeGrid__9Okru",loadingCube:"LoadingSpinner_loadingCube__WnqWw",loadingCubeGridScaleDelay:"LoadingSpinner_loadingCubeGridScaleDelay__S4rcT",loadingCube1:"LoadingSpinner_loadingCube1__9Xdf3",loadingCube2:"LoadingSpinner_loadingCube2__9hDGq",loadingCube3:"LoadingSpinner_loadingCube3__pmAJ5",loadingCube4:"LoadingSpinner_loadingCube4__QGZuW",loadingCube5:"LoadingSpinner_loadingCube5__vJpHG",loadingCube6:"LoadingSpinner_loadingCube6__3tWSf",loadingCube7:"LoadingSpinner_loadingCube7__PBJGj",loadingCube8:"LoadingSpinner_loadingCube8__mJD7v",loadingCube9:"LoadingSpinner_loadingCube9__oiwQt"}}},function(e){e.O(0,[6911,6644,2696,9774,2888,179],function(){return e(e.s=29045)}),_N_E=e.O()}]);