(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{76606:function(e,r,t){"use strict";t.d(r,{Z:function(){return p}});var n=t(79939),a=t(87462),i=t(67294),o=t(54142),l=i.forwardRef(function(e,r){return i.createElement(o.r,(0,a.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:r}),i.createElement("path",{d:"M12 2C9.243 2 7 4.243 7 7v2H6c-1.103 0-2 .897-2 2v9c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-9c0-1.103-.897-2-2-2h-1V7c0-2.757-2.243-5-5-5zM9 7c0-1.654 1.346-3 3-3s3 1.346 3 3v2H9V7zm9.002 13H13v-2.278c.595-.347 1-.985 1-1.722 0-1.103-.897-2-2-2s-2 .897-2 2c0 .736.405 1.375 1 1.722V20H6v-9h12l.002 9z"}))});l.displayName="Lock";var u=t(41664),c=t.n(u),s=t(11163),d=t(35944),f=[{name:"Edit Profile",icon:n.n,href:"/profile",current:!0},{name:"Change Password",icon:l,href:"/profile/change-password",current:!1}];function m(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter(Boolean).join(" ")}function p(){var e=(0,s.useRouter)().asPath;return(0,d.tZ)("div",{className:"flex flex-grow flex-col max-w-xs rounded-md overflow-hidden shadow-md mr-8",children:(0,d.tZ)("nav",{className:"flex-1 space-y-1 bg-white px-2 py-4","aria-label":"Sidebar",children:f.map(function(r){var t=e===r.href;return(0,d.BX)(c(),{href:r.href,className:m(t?"bg-main/10 border-main text-main":"border-transparent text-gray-600 hover:bg-gray-50 hover:text-gray-900","group flex items-center px-3 py-2 text-sm font-medium border-l-4 rounded-md "),children:[(0,d.tZ)(r.icon,{className:m(t?"text-main":"text-gray-400 group-hover:text-gray-500","mr-3 flex-shrink-0 h-6 w-6"),"aria-hidden":"true"}),r.name]},r.name)})})})}},77731:function(e,r,t){"use strict";t.d(r,{Z:function(){return p}});var n,a=t(59499),i=t(17674),o=t(71383),l=t(17283),u=t(50051),c=(0,l.Ps)(n||(n=(0,o.Z)(["\n  mutation UpdateUser(\n    $id: ID!\n    $firstName: String\n    $lastName: String\n    $email: String\n    $userType: String\n    $status: String\n  ) {\n    updateUser(\n      input: {\n      id: $id,\n      firstName: $firstName,\n      lastName: $lastName,\n      email: $email,\n      userType: $userType,\n      status: $status\n      }\n    ) {\n      user {\n      ...UserFragment\n      }\n    }\n  }\n  ","\n"])),u.mm),s=t(71641),d=t(50319);function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach(function(r){(0,a.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=(0,s.a)(u.JA,{variables:{id:e}}),t=r.loading,n=r.error,a=r.data,o=(a=void 0===a?{}:a).user,l=(0,d.D)(c),f=(0,i.Z)(l,2),p=f[0];f[1];var v=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=m({},r);p({variables:m({id:e},n),optimisticResponse:{updateUser:{__typename:"UpdateUserPayload",user:m(m({},o),n)}},onCompleted:t}).catch(function(e){})};return{user:o,loading:t,error:n,updateUser:v}}},83112:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return j}});var n=t(40350),a=t(24545),i=t(39316),o=t(59499),l=t(4730),u=t(97088),c=t(87536),s=t(77961),d=t(78773),f=t(11163),m=t(61458),p=t(77731),v=t(69291),g=t(67294),h=t(35944),b=["profile_image"];function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function Z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach(function(r){(0,o.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var O=function(){var e=(0,f.useRouter)(),r=(0,m.Z)(),t=r.user;r.loading,r.error;var n=(0,p.Z)().updateUser,a=(0,v.Z)({method:"PUT"}).uploadFileAndNotify,i=function(r){var i=r.profile_image,o=(0,l.Z)(r,b);if(console.log("values"),console.log(o),n(o),i){var u="/api/v1/users/".concat(t.id,"/update_profile_image");i instanceof File&&a(i,"profile_image",u)}e.push("/")},o=Z(Z({},t),{},{role_ids:null==t?void 0:t.roles.map(function(e){return e.id})}),y=(0,c.cI)({defaultValues:o}),O=y.register,w=y.handleSubmit,x=y.control,N=y.formState.errors,j=y.reset;return(0,g.useEffect)(function(){j(o)},[t]),(0,h.BX)("form",{className:"h-full w-full max-w-sm flex flex-col space-y-4",onSubmit:w(i),children:[(0,h.tZ)(u.Z,{label:"First name",placeholder:"First name",inputAttrs:O("firstName",{required:"First name is required",maxLength:{value:20,message:"Max length of the name is 20"}})}),N.firstName&&(0,h.tZ)("small",{className:"text-danger text-red-500",children:N.firstName.message}),(0,h.tZ)(u.Z,{label:"Last name",placeholder:"Last name",inputAttrs:O("lastName",{required:"Last is required",maxLength:{value:20,message:"Max length of the name is 20"}})}),N.lastName&&(0,h.tZ)("small",{className:"text-danger text-red-500",children:N.lastName.message}),(0,h.tZ)(u.Z,{label:"Email",placeholder:"email",inputAttrs:O("email",{required:"Email is required",maxLength:{value:40,message:"Max length of the name is 40"},pattern:{value:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i,message:"Please give valid email"}})}),N.email&&(0,h.tZ)("small",{className:"text-danger text-red-500",children:N.email.message}),(0,h.tZ)(s.Z,{buttonText:"Choose profile image",label:"Profile image",control:x,name:"profile_image",initialValue:null==t?void 0:t.profileImageUrl}),(0,h.tZ)(d.Z,{type:"submit",children:"Submit"})]})},w=t(76606),x=function(){return(0,h.BX)(h.HY,{children:[(0,h.tZ)("span",{className:"hidden lg:block",children:"Back to Dashboard"}),(0,h.tZ)("span",{className:"block lg:hidden",children:(0,h.tZ)(i.x,{width:"20"})})]})},N=function(){return(0,n.Z)({title:"Profile"}),(0,a.Z)([[(0,h.tZ)(x,{}),"/"]]),(0,h.BX)("div",{className:"flex",children:[(0,h.tZ)(w.Z,{}),(0,h.tZ)(O,{})]})};N.navState={topLevel:"dashboard"};var j=N},99813:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return t(83112)}])},50319:function(e,r,t){"use strict";t.d(r,{D:function(){return s}});var n=t(70655),a=t(67294),i=t(14012),o=t(82152),l=t(14692),u=t(30990),c=t(66252);function s(e,r){var t=(0,c.x)(null==r?void 0:r.client);(0,l.Vp)(e,l.n_.Mutation);var s=(0,a.useState)({called:!1,loading:!1,client:t}),d=s[0],f=s[1],m=(0,a.useRef)({result:d,mutationId:0,isMounted:!0,client:t,mutation:e,options:r});Object.assign(m.current,{client:t,options:r,mutation:e});var p=(0,a.useCallback)(function(e){void 0===e&&(e={});var r=m.current,t=r.client,a=r.options,l=r.mutation,c=(0,n.pi)((0,n.pi)({},a),{mutation:l});m.current.result.loading||c.ignoreResults||!m.current.isMounted||f(m.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:t});var s=++m.current.mutationId,d=(0,i.J)(c,e);return t.mutate(d).then(function(r){var n,a,i,l=r.data,c=r.errors,p=c&&c.length>0?new u.c({graphQLErrors:c}):void 0;if(s===m.current.mutationId&&!d.ignoreResults){var v={called:!0,loading:!1,data:l,error:p,client:t};m.current.isMounted&&!(0,o.D)(m.current.result,v)&&f(m.current.result=v)}return null===(a=null===(n=m.current.options)||void 0===n?void 0:n.onCompleted)||void 0===a||a.call(n,r.data,d),null===(i=e.onCompleted)||void 0===i||i.call(e,r.data,d),r}).catch(function(r){var n,a,i,l;if(s===m.current.mutationId&&m.current.isMounted){var u={loading:!1,error:r,data:void 0,called:!0,client:t};(0,o.D)(m.current.result,u)||f(m.current.result=u)}if((null===(n=m.current.options)||void 0===n?void 0:n.onError)||d.onError)return null===(i=null===(a=m.current.options)||void 0===a?void 0:a.onError)||void 0===i||i.call(a,r,d),null===(l=e.onError)||void 0===l||l.call(e,r,d),{data:void 0,errors:r};throw r})},[]),v=(0,a.useCallback)(function(){m.current.isMounted&&f({called:!1,loading:!1,client:t})},[]);return(0,a.useEffect)(function(){return m.current.isMounted=!0,function(){m.current.isMounted=!1}},[]),[p,(0,n.pi)({reset:v},d)]}},14666:function(e,r,t){"use strict";function n(e){if(Array.isArray(e))return e}t.d(r,{Z:function(){return n}})},14882:function(e,r,t){"use strict";function n(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.d(r,{Z:function(){return n}})},4730:function(e,r,t){"use strict";function n(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}t.d(r,{Z:function(){return n}})},17674:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var n=t(14666),a=t(2937),i=t(14882);function o(e,r){return(0,n.Z)(e)||function(e,r){var t,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i=[],o=!0,l=!1;try{for(a=a.call(e);!(o=(t=a.next()).done)&&(i.push(t.value),!r||i.length!==r);o=!0);}catch(u){l=!0,n=u}finally{try{o||null==a.return||a.return()}finally{if(l)throw n}}return i}}(e,r)||(0,a.Z)(e,r)||(0,i.Z)()}}},function(e){e.O(0,[6107,7216,9774,2888,179],function(){return e(e.s=99813)}),_N_E=e.O()}]);