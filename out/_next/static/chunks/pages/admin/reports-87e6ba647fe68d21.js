(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2133],{62697:function(e,t,r){"use strict";r.d(t,{Q:function(){return s}});var n=r(87462),o=r(67294),i=r(54142),s=o.forwardRef(function(e,t){return o.createElement(i.r,(0,n.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),o.createElement("path",{d:"M0 .5A.5.5 0 0 1 .5 0h15a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H14v2h1.5a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H14v2h1.5a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H.5a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5H2v-2H.5a.5.5 0 0 1-.5-.5v-3A.5.5 0 0 1 .5 6H2V4H.5a.5.5 0 0 1-.5-.5v-3zM3 4v2h4.5V4H3zm5.5 0v2H13V4H8.5zM3 10v2h4.5v-2H3zm5.5 0v2H13v-2H8.5zM1 1v2h3.5V1H1zm4.5 0v2h5V1h-5zm6 0v2H15V1h-3.5zM1 7v2h3.5V7H1zm4.5 0v2h5V7h-5zm6 0v2H15V7h-3.5zM1 13v2h3.5v-2H1zm4.5 0v2h5v-2h-5zm6 0v2H15v-2h-3.5z"}))});s.displayName="Bricks"},67865:function(e,t,r){"use strict";r.d(t,{J:function(){return s}});var n=r(87462),o=r(67294),i=r(54142),s=o.forwardRef(function(e,t){return o.createElement(i.r,(0,n.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),o.createElement("path",{fillRule:"evenodd",d:"M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"}))});s.displayName="TextLeft"},40930:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});var n=r(87462),o=r(67294),i=r(54142),s=o.forwardRef(function(e,t){return o.createElement(i.r,(0,n.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),o.createElement("path",{d:"M13.4 2.51a3.75 3.75 0 0 0-2.8 0l-2.2.9L18 7.12l3.37-1.3c-.14-.12-.3-.2-.46-.28l-7.5-3.04zM22 7.2l-9.25 3.58V21.7c.22-.05.44-.11.66-.2l7.5-3.04A1.75 1.75 0 0 0 22 16.84V7.19zM11.25 21.7V10.77L2 7.19v9.64c0 .71.43 1.35 1.1 1.62l7.5 3.04c.2.09.43.15.65.2zM2.63 5.83 12 9.45l3.92-1.52-9.55-3.7L3.1 5.54c-.17.07-.32.16-.46.28z"}))});s.displayName="Box"},48453:function(e,t,r){"use strict";r.d(t,{E:function(){return s}});var n=r(87462),o=r(67294),i=r(54142),s=o.forwardRef(function(e,t){return o.createElement(i.r,(0,n.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 48 48"},e,{ref:t}),o.createElement("path",{d:"M31 14.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM6 10.75A4.75 4.75 0 0 1 10.75 6h26.5A4.75 4.75 0 0 1 42 10.75v26.5c0 .86-.23 1.66-.63 2.36L26.63 25.08a3.75 3.75 0 0 0-5.26 0L6.63 39.62c-.4-.7-.63-1.5-.63-2.36v-26.5zM26 17a5 5 0 1 0 10 0 5 5 0 0 0-10 0zM8.4 41.38c.69.4 1.5.62 2.35.62h26.5c.86 0 1.66-.23 2.36-.63l-14.73-14.5a1.25 1.25 0 0 0-1.76 0L8.4 41.37z"}))});s.displayName="Image"},71105:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});var n=r(87462),o=r(67294),i=r(54142),s=o.forwardRef(function(e,t){return o.createElement(i.r,(0,n.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),o.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),o.createElement("path",{d:"M17 20H4V7c0-.55-.45-1-1-1s-1 .45-1 1v13c0 1.1.9 2 2 2h13c.55 0 1-.45 1-1s-.45-1-1-1z"}),o.createElement("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5.99 13c-.59 0-1.05-.47-1.05-1.05 0-.59.47-1.04 1.05-1.04.59 0 1.04.45 1.04 1.04-.01.58-.45 1.05-1.04 1.05zm2.5-6.17c-.63.93-1.23 1.21-1.56 1.81-.08.14-.13.26-.16.49-.05.39-.36.68-.75.68h-.03c-.44 0-.79-.38-.75-.82.03-.28.09-.57.25-.84.41-.73 1.18-1.16 1.63-1.8.48-.68.21-1.94-1.14-1.94-.61 0-1.01.32-1.26.7-.19.29-.57.39-.89.25-.42-.18-.6-.7-.34-1.07.51-.74 1.36-1.29 2.48-1.29 1.23 0 2.08.56 2.51 1.26.37.61.58 1.73.01 2.57z"}))});s.displayName="Quiz"},27484:function(e){var t;t=function(){"use strict";var e="millisecond",t="second",r="minute",n="hour",o="week",i="month",s="quarter",c="year",a="date",u="Invalid Date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},p="en",h={};h[p]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||"th")+"]"}};var g=function(e){return e instanceof b},m=function e(t,r,n){var o;if(!t)return p;if("string"==typeof t){var i=t.toLowerCase();h[i]&&(o=i),r&&(h[i]=r,o=i);var s=t.split("-");if(!o&&s.length>1)return e(s[0])}else{var c=t.name;h[c]=t,o=c}return!n&&o&&(p=o),o||!n&&p},v=function(e,t){if(g(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new b(r)},y={s:f,z:function(e){var t=-e.utcOffset(),r=Math.abs(t);return(t<=0?"+":"-")+f(Math.floor(r/60),2,"0")+":"+f(r%60,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),o=t.clone().add(n,i),s=r-o<0,c=t.clone().add(n+(s?-1:1),i);return+(-(n+(r-o)/(s?o-c:c-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return({M:i,y:c,w:o,d:"day",D:a,h:n,m:r,s:t,ms:e,Q:s})[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};y.l=m,y.i=g,y.w=function(e,t){return v(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var b=function(){function f(e){this.$L=m(e.locale,null,!0),this.parse(e)}var p=f.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(y.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(l);if(n){var o=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return y},p.isValid=function(){return this.$d.toString()!==u},p.isSame=function(e,t){var r=v(e);return this.startOf(t)<=r&&r<=this.endOf(t)},p.isAfter=function(e,t){return v(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<v(e)},p.$g=function(e,t,r){return y.u(e)?this[t]:this.set(r,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,s){var u=this,l=!!y.u(s)||s,d=y.p(e),f=function(e,t){var r=y.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return l?r:r.endOf("day")},p=function(e,t){return y.w(u.toDate()[e].apply(u.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},h=this.$W,g=this.$M,m=this.$D,v="set"+(this.$u?"UTC":"");switch(d){case c:return l?f(1,0):f(31,11);case i:return l?f(1,g):f(0,g+1);case o:var b=this.$locale().weekStart||0,O=(h<b?h+7:h)-b;return f(l?m-O:m+(6-O),g);case"day":case a:return p(v+"Hours",0);case n:return p(v+"Minutes",1);case r:return p(v+"Seconds",2);case t:return p(v+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(o,s){var u,l=y.p(o),d="set"+(this.$u?"UTC":""),f=((u={}).day=d+"Date",u[a]=d+"Date",u[i]=d+"Month",u[c]=d+"FullYear",u[n]=d+"Hours",u[r]=d+"Minutes",u[t]=d+"Seconds",u[e]=d+"Milliseconds",u)[l],p="day"===l?this.$D+(s-this.$W):s;if(l===i||l===c){var h=this.clone().set(a,1);h.$d[f](p),h.init(),this.$d=h.set(a,Math.min(this.$D,h.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[y.p(e)]()},p.add=function(e,s){var a,u=this;e=Number(e);var l=y.p(s),d=function(t){var r=v(u);return y.w(r.date(r.date()+Math.round(t*e)),u)};if(l===i)return this.set(i,this.$M+e);if(l===c)return this.set(c,this.$y+e);if("day"===l)return d(1);if(l===o)return d(7);var f=((a={})[r]=6e4,a[n]=36e5,a[t]=1e3,a)[l]||1,p=this.$d.getTime()+e*f;return y.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||u;var n=e||"YYYY-MM-DDTHH:mm:ssZ",o=y.z(this),i=this.$H,s=this.$m,c=this.$M,a=r.weekdays,l=r.months,f=function(e,r,o,i){return e&&(e[r]||e(t,n))||o[r].slice(0,i)},p=function(e){return y.s(i%12||12,e,"0")},h=r.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:c+1,MM:y.s(c+1,2,"0"),MMM:f(r.monthsShort,c,l,3),MMMM:f(l,c),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:f(r.weekdaysMin,this.$W,a,2),ddd:f(r.weekdaysShort,this.$W,a,3),dddd:a[this.$W],H:String(i),HH:y.s(i,2,"0"),h:p(1),hh:p(2),a:h(i,s,!0),A:h(i,s,!1),m:String(s),mm:y.s(s,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:o};return n.replace(d,function(e,t){return t||g[e]||o.replace(":","")})},p.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},p.diff=function(e,a,u){var l,d=y.p(a),f=v(e),p=(f.utcOffset()-this.utcOffset())*6e4,h=this-f,g=y.m(this,f);return g=((l={})[c]=g/12,l[i]=g,l[s]=g/3,l[o]=(h-p)/6048e5,l.day=(h-p)/864e5,l[n]=h/36e5,l[r]=h/6e4,l[t]=h/1e3,l)[d]||h,u?g:y.a(g)},p.daysInMonth=function(){return this.endOf(i).$D},p.$locale=function(){return h[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=m(e,t,!0);return n&&(r.$L=n),r},p.clone=function(){return y.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),O=b.prototype;return v.prototype=O,[["$ms",e],["$s",t],["$m",r],["$H",n],["$W","day"],["$M",i],["$y",c],["$D",a]].forEach(function(e){O[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),v.extend=function(e,t){return e.$i||(e(t,b,v),e.$i=!0),v},v.locale=m,v.isDayjs=g,v.unix=function(e){return v(1e3*e)},v.en=h[p],v.Ls=h,v.p={},v},e.exports=t()},28734:function(e){var t;t=function(){return function(e,t){var r=t.prototype,n=r.format;r.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return n.bind(this)(e);var o=this.$utils(),i=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return r.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return r.ordinal(t.week(),"W");case"w":case"ww":return o.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return o.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return o.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}});return n.bind(this)(i)}}},e.exports=t()},78773:function(e,t,r){"use strict";var n=r(20516),o=r.n(n),i=r(35944),s=function(e){var t=e.onClick,r=e.disabled,n=e.type,s=e.displayType,c=e.size,a=e.className,u=e.children,l="bg-main group-hover:bg-opacity-80 transition-colors duration-1000";return(void 0===s?"normal":s)==="alert"&&(l="bg-red-800 group-hover:bg-red-700 transition-colors duration-1000"),(0,i.BX)("button",{type:void 0===n?"button":n,disabled:void 0!==r&&r,className:"\n        ".concat(a,"\n        ").concat(o().button,"\n        ").concat(o().button_bestia,"\n        ").concat("sm"===c?"px-1":"px-8","\n\n        min-w-16 py-2 \n        whitespace-nowrap nowrap\n        border border-transparent rounded-md\n        text-sm\n        group\n        disabled bg-main text-white\n        focus:bg-opacity-50 focus:outline-none \n        active:bg-opacity-50 \n      "),onClick:t,children:[(0,i.tZ)("div",{className:"".concat(o().button__bg," ").concat(l)}),(0,i.tZ)("span",{className:o().button__span,children:u})]})};t.Z=s},57389:function(e,t,r){"use strict";var n=r(41664),o=r.n(n),i=r(20516),s=r.n(i),c=r(35944),a=function(e){var t,r=e.target,n=e.href,i=e.displayType,a=e.children,u=e.className,l=e.onClick;switch(void 0===i?"normal":i){case"cancel":t="bg-gray-200 group-hover:bg-gray-700 transition-colors duration-1000",s().button_grey;break;case"alert":t="bg-red-800 group-hover:bg-red-700 transition-colors duration-1000";break;default:t="bg-main group-hover:bg-opacity-80 transition-colors duration-1000",s().button}return(0,c.BX)(o(),{href:n,onClick:l,target:r,className:"\n      ".concat(u,"\n      ").concat(s().button,"\n      ").concat(s().button_bestia,"\n      min-w-16 py-2 px-8\n      whitespace-nowrap nowrap\n      border border-transparent rounded-md\n      text-sm\n      bg-main text-white\n      focus:bg-opacity-50 focus:outline-none \n      active:bg-opacity-50 \n    "),children:[(0,c.tZ)("div",{className:"".concat(s().button__bg," ").concat(t)}),(0,c.tZ)("span",{className:s().button__span,children:a})]})};t.Z=a},76322:function(e,t,r){"use strict";r.d(t,{o:function(){return a}});var n,o,i=r(71383),s=r(68777),c=(0,s.F4)(n||(n=(0,i.Z)(["\n  50% {color: transparent;}\n"]))),a=s.ZP.span(o||(o=(0,i.Z)(["\n  animation: 1s "," infinite;\n  &:nth-child(1) {\n    animation-delay: 0ms;\n  }\n  &:nth-child(2) {\n    animation-delay: 250ms;\n  }\n  &:nth-child(3) {\n    animation-delay: 500ms;\n  }\n"])),c)},41637:function(e,t,r){"use strict";r.d(t,{f:function(){return f}});var n=r(67865),o=r(62697),i=r(51876),s=r(48453),c=r(32284),a=r(40930),u=r(71105),l=r(32274),d=r(57632),f={text:{label:"Text",icon:n.J,getDefaultContent:function(){return{blocks:[{id:(0,d.Z)(),type:"text"}]}}},video:{label:"Video",icon:i.n,getDefaultContent:function(){return{blocks:[{id:(0,d.Z)(),type:"video",properties:{url:""}}]}}},image:{label:"Image",icon:s.E,getDefaultContent:function(){return{blocks:[{id:(0,d.Z)(),type:"image"}]}}},document:{label:"Document",icon:c.B,getDefaultContent:function(){return{blocks:[{id:(0,d.Z)(),type:"document"}]}}},audio:{label:"Audio",icon:l.M,getDefaultContent:function(){return{blocks:[{id:(0,d.Z)(),type:"audio"}]}}},scorm:{label:"SCORM",icon:a.x,getDefaultContent:function(){return{blocks:[{id:(0,d.Z)(),type:"package",properties:{url:""}}]}}},freeform:{label:"Freeform",icon:o.Q,getDefaultContent:function(){return{blocks:[]}}},quiz:{label:"Quiz",icon:u.x,getDefaultContent:function(){return{blocks:[{id:(0,d.Z)(),type:"text"}]}}}}},40673:function(e,t,r){"use strict";var n=r(59499),o=r(39299),i=r(58779),s=r(35944);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var u=function(e){var t=e.tagType,r=e.onSelect,n=e.selected,c=(0,i.Z)(),u=c.tags;c.loading,c.error;var l=function(e){r(e)},d={options:u&&u.filter(function(e){return e.tagType===t}),getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.label},value:(null==u?void 0:u.find(function(e){return e.id===n}))||null,placeholder:"Select ".concat(t),menuPortalTarget:document.body,isSearchable:!1,onChange:l,styles:{menuPortal:function(e){return a(a({},e),{},{zIndex:9999})},control:function(e,t){return a(a({},e),{},{minWidth:"240px"})}}};return(0,s.tZ)("div",{className:"flex space-x-4",children:u&&(0,s.tZ)(s.HY,{children:(0,s.tZ)(o.ZP,a({},d))})})};t.Z=u},58779:function(e,t,r){"use strict";var n=r(71641),o=r(54232);t.Z=function(){var e=(0,n.a)(o.F$),t=e.loading,r=e.error,i=e.data;return{tags:(i=void 0===i?{}:i).tags,loading:t,error:r}}},24545:function(e,t,r){"use strict";var n=r(11163),o=r(67294),i=r(78773),s=r(94225),c=r(35944),a=function(e){var t=(0,n.useRouter)();(0,o.useEffect)(function(){(0,s.ac)((0,c.tZ)("div",{className:"space-x-2 flex items-center",children:e.map(function(e,r){return(0,c.tZ)(i.Z,{onClick:function(){"function"==typeof e[1]?e[1]():t.push(e[1])},children:e[0]},r)})}))},[])};t.Z=a},40350:function(e,t,r){"use strict";var n=r(67294),o=r(94225);t.Z=function(e){(0,n.useEffect)(function(){(0,o.jL)(e)},[e])}},3130:function(e,t,r){"use strict";var n=r(50051),o=r(71641);t.Z=function(){var e=(0,o.a)(n.fo),t=e.loading,r=e.error,i=e.data;return{users:(i=void 0===i?{}:i).users,loading:t,error:r,refetchUsers:e.refetch}}},46540:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return eX}});var n,o,i,s,c,a,u=r(40350),l=r(59499),d=r(11163),f=r(71383),p=r(67294),h=r(17283),g=r(71641),m=r(57389),v=r(70442),y=r(74094),b=r(27060),O=r(64202),w=r(76322),Z=r(78773),j=r(57815),x=r(24249),P=r(36094),D=r(35944),M=function(e){var t=e.simple,r=e.children;return(0,D.tZ)(D.HY,{children:t?(0,D.tZ)(D.HY,{children:r}):(0,D.tZ)("div",{className:"mb-4 bg-white shadow rounded-md p-6",children:r})})},$=function(e){var t=e.simple,r=e.title,n=(0,x.t)().query;return n.user,n.group,n.course,n.lesson,n.category,n.type,(0,D.tZ)(M,{simple:void 0!==t&&t,children:(0,D.tZ)("h3",{className:"text-main-secondary font-semibold text-center mb-3 sm:text-left",children:r})})},C=r(87462),S=r(54142),N=p.forwardRef(function(e,t){return p.createElement(S.r,(0,C.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),p.createElement("path",{d:"M18 22a2 2 0 0 0 2-2v-5l-5 4v-3H8v-2h7v-3l5 4V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12zM13 4l5 5h-5V4z"}))});N.displayName="FileExport";var _=r(39299),H=r(89872);function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var A=function(e){var t=e.onSelect,r=e.selected,n=void 0===r?"all":r,o={name:"All groups",id:"all"},i=(0,H.Z)().groups,s=null==i?void 0:i.edges.map(function(e){return e.node});s&&s.unshift(o);var c=(0,p.useMemo)(function(){return{options:s,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},value:(null==s?void 0:s.find(function(e){return e.id===n}))||o,menuPortalTarget:document.body,isSearchable:!1,onChange:t,styles:{menuPortal:function(e){return V(V({},e),{},{zIndex:9999})},control:function(e,t){return V(V({},e),{},{minWidth:"240px"})}}}},[s,t]);return(0,D.tZ)("div",{className:"flex space-x-4",children:s&&(0,D.tZ)(D.HY,{children:(0,D.tZ)(_.ZP,V({},c))})})},k=r(40673),z=r(11762);r(65198);var Y=r(1717);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var U={menuPortal:function(e,t){return F(F({},e),{},{zIndex:3e3})},input:function(e,t){return F(F({},e),{},{boxShadow:"none"})}},L=function(e){return(0,D.tZ)(z.c.Input,F(F({},e),{},{inputClassName:"outline-none border-none shadow-none focus:ring-transparent"}))},q=function(e){var t=e.options,r=e.onSelect;return(0,D.tZ)(D.HY,{children:(0,D.tZ)(_.ZP,{placeholder:(0,D.tZ)("span",{className:"text-main-secondary",children:"All courses"}),options:t,styles:U,components:{Option:Y.Z,Input:L},onChange:r,className:"w-full",isSearchable:!0,menuPortalTarget:document.body})})},I=r(3130);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var R=function(e){var t=e.onSelect,r=e.selected,n=(0,I.Z)().users,o=null==n?void 0:n.edges.map(function(e){return e.node}),i=(0,p.useMemo)(function(){return{options:o,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},value:(null==o?void 0:o.find(function(e){return e.id===r}))||null,placeholder:"Select user",menuPortalTarget:document.body,isSearchable:!1,onChange:t,styles:{menuPortal:function(e){return X(X({},e),{},{zIndex:9999})},control:function(e,t){return X(X({},e),{},{minWidth:"240px"})}}}},[o,t]);return(0,D.tZ)("div",{className:"flex space-x-4",children:o&&(0,D.tZ)(D.HY,{children:(0,D.tZ)(_.ZP,X({},i))})})},W=r(61458);function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Q=function(e){var t=e.filters,r=void 0===t?[]:t,n=(0,d.useRouter)(),o=(0,W.Z)(),i=(o.tags,o.courses,o.pathways,o.lessons,o.resources,o.groups),s=n.query,c=s.user,a=s.group,u=s.course,l=(s.lesson,s.category),f=function(){n.push({query:K(K({},n.query),r.reduce(function(e,t){return e[t]="",e},{}))})};return(0,D.BX)("div",{className:"flex items-center flex-col sm:flex-row space-x-2",children:[i&&r.includes("group")&&(0,D.BX)("div",{className:"flex flex-col",children:[(0,D.tZ)("label",{className:"text-left text-xs font-medium text-gray-500 uppercase",children:"in group"}),(0,D.tZ)(A,{selected:a,onSelect:function(e){n.push({query:K(K({},n.query),{},{group:null==e?void 0:e.id})})}})]}),r.includes("user")&&(0,D.BX)("div",{className:"flex flex-col",children:[(0,D.tZ)("label",{className:"text-left text-xs font-medium text-gray-500 uppercase",children:"for user"}),(0,D.tZ)(R,{selected:c,onSelect:function(e){n.push({query:K(K({},n.query),{},{user:null==e?void 0:e.id})})}})]}),r.includes("course")&&(0,D.BX)("div",{className:"flex flex-col",children:[(0,D.tZ)("label",{className:"text-left text-xs font-medium text-gray-500 uppercase",children:"in course"}),(0,D.tZ)(q,{options:u,onSelect:function(e){n.push({query:K(K({},n.query),{},{course:null==e?void 0:e.id})})}})]}),r.includes("category")&&(0,D.tZ)("div",{className:"flex flex-col",children:(0,D.tZ)(k.Z,{label:"in category",selected:l,tagType:"category",onSelect:function(e){n.push({query:K(K({},n.query),{},{tag:null==e?void 0:e.id})})}})}),!!r.length&&r.length>1&&(0,D.BX)("div",{className:"flex flex-col",children:[(0,D.tZ)("span",{className:"h-4"}),(0,D.tZ)("span",{className:"text-main-secondary hover:text-main p-1 px-3 cursor-pointer",onClick:f,children:"clear filters"})]})]})},J=function(e){var t=e.tableData,r=e.tableCols,o=e.loadingText,i=e.errorText,s=e.simpleHeader,c=e.loading,a=void 0===c?null:c,u=e.error,l=void 0===u?null:u,d=e.csvFilename,g=e.title,m=void 0===g?(0,D.tZ)(D.HY,{children:"Reports"}):g,v=e.filters,M=(0,x.t)().query,C=(M.user,M.group),S=(M.course,M.lesson,M.category),_=M.type,H=["course","user","group"].includes(_)?_:"course",E=function(e){return e&&"all"!==e},V=(0,p.useMemo)(function(){var e,r,o,i;return t?("user"===H?(e=t.filter(function(e){return!e.node._deleted}),E(C)&&(e=null===(r=e)||void 0===r?void 0:r.filter(function(e){return e.node.groups.edges.some(function(e){return e.node.id===C})}))):"course"===H&&(e=t.filter(function(e){return!e.node._deleted}),E(C)&&(e=null===(o=e)||void 0===o?void 0:o.filter(function(e){var t=P.L.readFragment({id:"UserContentEdge:".concat(e.userId,":").concat(e.node.id),fragment:(0,h.Ps)(n||(n=(0,f.Z)(["\n              fragment UserContentGroupFragment on UserContentEdge {\n                groups {\n                  edges {\n                    node {\n                      id\n                    }\n                  }\n                }\n              }\n            "])))}),r=null==t?void 0:t.groups.edges.map(function(e){return e.node.id});return null==r?void 0:r.some(function(e){return e===C})})),E(S)&&(e=null===(i=e)||void 0===i?void 0:i.filter(function(e){return e.node.tags.some(function(e){return e.id===S})}))),e||[]):[]},[t,C]),A=(0,p.useState)([]),k=A[0],z=A[1],Y=(0,y.b7)({state:{sorting:k},columns:r,data:V,onSortingChange:z,getCoreRowModel:(0,b.sC)(),getSortedRowModel:(0,b.tj)(),debugTable:!0});(void 0===d?"report":d).replace(/[^a-z0-9_\-]/gi,"_").toLowerCase();var T=function(){r.filter(function(e){return!0!==e.hideOnCsv}).map(function(e){return e.Header})};return console.log("table"),Y&&console.log("aa"),console.log(Y),console.log(Y.getHeaderGroups()),(0,D.BX)(D.HY,{children:[(0,D.tZ)($,{simple:void 0!==s&&s,title:m}),(0,D.BX)("div",{className:"flex items-center flex-col mb-3 sm:flex-row justify-between",children:[(0,D.tZ)(Q,{filters:void 0===v?[]:v}),(0,D.tZ)(Z.Z,{onClick:function(){return T()},children:(0,D.BX)(D.HY,{children:["Export to CSV",(0,D.tZ)(N,{className:"w-5 ml-2 -mr-1"})]})})]}),a&&(0,D.tZ)(O.Z,{text:(0,D.BX)(D.HY,{children:[void 0===o?"Loading...":o,(0,D.tZ)(w.o,{children:"."}),(0,D.tZ)(w.o,{children:"."}),(0,D.tZ)(w.o,{children:"."})]})}),l&&(0,D.tZ)("p",{children:void 0===i?"Unable to fetch report.":i}),!a&&!l&&Y&&(0,D.tZ)(j.Z,{table:Y})]})};function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var er=(0,h.Ps)(o||(o=(0,f.Z)(["\n  query CoursesReportQuery {\n    courses {\n      edges {\n        groups {\n          edges {\n            node {\n              id\n              name      \n            }\n          }\n        }\n        userId\n        node {\n          id\n          title\n          _deleted @client\n          image {\n            id\n            location\n          }\n          tags {\n            id\n            label\n          }\n          users {\n            totalCount\n            edges {\n              score\n              status\n              node {\n                id\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),en=function(){var e=(0,g.a)(er),t=e.loading,r=e.error,n=e.data,o=(n=void 0===n?{}:n).courses,i=(0,x.t)(),s=(0,p.useMemo)(function(){return null==o?void 0:o.edges},[o]),c=(0,p.useMemo)(function(){return[{id:"title",header:"Course",accessorFn:function(e){return e.node.title},cell:function(e){var t,r=e.cell,n={image:r.row.original.node.image,title:r.getValue(),secondary:null===(t=r.row.original.node.tags)||void 0===t?void 0:t.map(function(e){return e.label}).join(", "),href:r.row.original.node.id&&{query:{course:r.row.original.node.id,type:"user"}}};return(0,D.tZ)(v.Z,et({},n))}},{id:"enrolled",header:"Enrolled users",accessorFn:function(e){return e.node.users.totalCount},cell:function(e){var t;return null===(t=e.cell.row.original.node.users)||void 0===t?void 0:t.totalCount}},{id:"not_started",header:"Not started",accessorFn:function(e){return e.node.users.edges.filter(function(e){return!(null!=e&&e.status)||"not_started"===e.status}).length}},{id:"in_progress",header:"In progress",accessorFn:function(e){return e.node.users.edges.filter(function(e){return"in_progress"===e.status}).length}},{id:"completed",header:"Completed",accessorFn:function(e){return e.node.users.edges.filter(function(e){return"completed"===e.status}).length}},{id:"percentage_complete",header:"% Complete",accessorFn:function(e){var t=e.node.users.edges.length,r=e.node.users.edges.filter(function(e){return"completed"===e.status}).length;return Math.round(100*(t?r/t:0))+"%"}},{id:"actions",header:"",hideOnCsv:!0,width:300,style:{width:"300px"},cell:function(e){var t=e.cell,r=t.row.original.node.id&&{query:et(et({},i.query),{},{type:"user",course:t.row.original.node.id})};return t.row.original.node.id&&et(et({},i.query),{},{type:"lesson",course:t.row.original.node.id}),(0,D.tZ)("div",{className:"flex space-x-4 justify-center",children:(0,D.tZ)(m.Z,{href:r,children:"View users"})})}}]},[]);return(0,D.tZ)(J,{csvFilename:"Course report",simpleHeader:!0,title:(0,D.tZ)(D.HY,{children:"Courses"}),tableData:s,tableCols:c,loadingText:"Loading courses",errorText:"Unable to fetch course report.",loading:t,error:r,filters:["group"]})},eo=r(22345),ei=r(50051),es=(0,h.Ps)(i||(i=(0,f.Z)(["\n  fragment ContentUserEdgeFragment on ContentUserConnection {\n    edges {\n      node {\n        ...UserFragment\n      }\n      status\n      lastVisited\n      firstVisited\n      createdAt\n      updatedAt\n      score\n      visits\n      completed\n    }\n  }\n"]))),ec=(0,h.Ps)(s||(s=(0,f.Z)(["\n  query GetCourseUsers($id: ID!) {\n    course(id: $id) {\n      ...CourseFragment\n      users {\n        ...ContentUserEdgeFragment\n      }\n      # sections {\n      #   ...SectionFragment\n      #   users {\n      #     ...ContentUserEdgeFragment\n      #   }\n      #   lessons {\n      #     ...LessonFragment\n      #     users {\n      #       ...ContentUserEdgeFragment\n      #     }\n      #   }\n      # }\n    }\n  }\n  ","\n  ","\n  ","\n"])),eo.mk,ei.mm,es),ea=function(e){var t,r=(0,g.a)(ec,{variables:{id:e}}),n=r.loading,o=r.error,i=r.data,s=null==i?void 0:null===(t=i.course)||void 0===t?void 0:t.users;return{course:null==i?void 0:i.course,userConnection:s,loading:n,error:o}},eu=r(27484),el=r.n(eu),ed=r(79939),ef=r(28734);el().extend(ef);var ep=(0,D.tZ)("span",{children:"—"}),eh={createdAt:{id:"createdAt",header:"First access",accessorFn:function(e){return e.createdAt?el()(e.createdAt).format("Do MMMM YYYY [at] h:mm A"):null},cell:function(e){return e.getValue()||ep}},updatedAt:{id:"updatedAt",header:"Last visited",accessorFn:function(e){return e.updatedAt?el()(e.updatedAt).format("Do MMMM YYYY [at] h:mm A"):null},cell:function(e){return e.getValue()||ep}}};function eg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function em(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eg(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ev=r(28734);el().extend(ev);var ey=function(){var e=(0,x.t)().query.course,t=ea(e),r=t.loading,n=t.error,o=t.userConnection,i=t.course,s=(0,p.useMemo)(function(){return(null==o?void 0:o.edges)||[]},[o]),c=(0,p.useMemo)(function(){return[{id:"name",header:"Name",accessorFn:function(e){return e.node.fullName},cell:function(t){var r=t.cell,n={imageSrc:r.row.original.node.profileImageUrl,icon:(0,D.tZ)(ed.n,{className:"hidden w-auto h-full bg-grey-500 text-main-secondary text-opacity-50"}),title:r.row.original.node.fullName,secondary:r.row.original.node.email,href:r.row.original.node.id&&{query:{course:e,user:r.row.original.node.id}}};return(0,D.tZ)(v.Z,em({},n))}},{id:"status",header:"Course status",accessorKey:"status"},{id:"score",header:"Score",accessorKey:"score"},em(em({},eh.createdAt),{},{header:"First access"}),em(em({},eh.updatedAt),{},{header:"Last visited"}),{id:"actions",header:"",hideOnCsv:!0,width:300,cell:function(t){var r=t.cell.row.original.node.id,n={query:em({course:e},r&&{user:r})};return(0,D.tZ)("div",{className:"flex space-x-4 justify-center",children:(0,D.tZ)(m.Z,{href:n,children:"See details"})})}}]},[]);return(0,D.tZ)(J,{title:(0,D.BX)(D.HY,{children:[(0,D.tZ)("span",{className:"font-semibold",children:"User report "}),(0,D.tZ)("span",{className:"font-normal",children:"for course: "}),(0,D.tZ)("span",{className:"font-semibold",children:null==i?void 0:i.title})]}),simpleHeader:!0,csvFilename:"Course users for ".concat(null==i?void 0:i.title),tableData:s,tableCols:c,loadingText:"Loading course users",errorText:"Unable to fetch course users.",loading:r,error:n})};function eb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eb(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ew=r(28734);el().extend(ew);var eZ=function(){var e=(0,x.t)().query,t=e.lesson,r=e.course,n=(0,g.a)((0,h.Ps)(c||(c=(0,f.Z)(["\n      query getLessonsUsers($lessonId: ID!) {\n        lesson(id: $lessonId) {\n          title\n          users {\n            edges {\n              node {\n                id\n                fullName\n                email\n              }\n              status\n              lastVisited\n              firstVisited\n              createdAt\n              updatedAt\n              score\n              visits\n              completed\n            }\n            totalCount\n          }\n        }\n      }\n    "]))),{variables:{lessonId:t}}),o=n.loading,i=n.error,s=n.data,a=(0,p.useMemo)(function(){var e;return(null==s?void 0:null===(e=s.lesson)||void 0===e?void 0:e.users.edges)||[]},[s]),u=(0,p.useMemo)(function(){return[{id:"name",header:"Name",cell:function(e){var t=e.cell,r=t.row.original.node,n={title:r.fullName,secondary:r.email,imageSrc:t.row.original.profileImageUrl,icon:(0,D.tZ)(ed.n,{className:"hidden w-auto h-full bg-grey-500 text-main-secondary text-opacity-50"})};return(0,D.tZ)(v.Z,eO({},n))}},{id:"status",header:"Lesson status",accessorKey:"status"},{id:"score",header:"Score",accessorKey:"score"},eO(eO({},eh.createdAt),{},{header:"First access"}),eO(eO({},eh.updatedAt),{},{header:"Last visited"}),{id:"actions",header:"",hideOnCsv:!0,width:300,cell:function(e){var n=e.cell.row.original.node.id;return eO({lesson:t,course:r},n&&{user:n}),(0,D.tZ)("div",{className:"flex space-x-4 justify-center"})}}]},[]);return(0,D.tZ)(J,{tableData:a,tableCols:u,loadingText:"Loading users",errorText:"Unable to fetch users for this lesson.",loading:o,error:i})},ej=r(5564),ex=r(5309),eP=r(97698);function eD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eD(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var e$=r(28734);el().extend(e$);var eC=function(){var e=(0,g.a)(ex.IP),t=(e.loading,e.error,e.data),r=(0,x.t)(),n=(0,p.useMemo)(function(){var e,r;return(null==t?void 0:null===(e=t.groups)||void 0===e?void 0:null===(r=e.edges)||void 0===r?void 0:r.map(function(e){return e.node}).filter(function(e){return!e._deleted}))||[]},[t]),o=(0,p.useMemo)(function(){return[{header:"Group Name",accessorKey:"name",cell:function(e){var t=e.cell,r=t.row.original.users.totalCount,n={image:t.row.original.image,title:t.getValue(),icon:(0,D.tZ)(eP.Y,{className:"hidden w-auto h-full bg-grey-500 text-main-secondary text-opacity-80"}),secondary:"".concat(r," user").concat(1!==r?"s":"")};return(0,D.tZ)(v.Z,eM({},n))}},{header:"Date Created",accessorKey:"createdAt",cell:function(e){var t=e.cell;return el()(t.getValue()).format("Do MMMM YYYY [at] h:mm A")}},{header:"Enrolled Courses",accessorFn:function(e){return e.enrolledCourses.totalCount}},{width:300,header:"Actions",accessorKey:"actions",cell:function(e){var t=e.cell,n=t.row.original.id&&{query:eM(eM({},r.query),{},{type:"user",group:t.row.original.id})},o=t.row.original.id&&{query:eM(eM({},r.query),{},{type:"course",group:t.row.original.id})};return(0,D.BX)("div",{className:"flex space-x-4 justify-center",children:[(0,D.tZ)(m.Z,{href:n,children:"View users"}),(0,D.tZ)(m.Z,{href:o,children:"View courses"})]})}}]},[]);return(0,D.tZ)(ej.Z,{tableData:n,tableCols:o})},eS=r(10893);function eN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function e_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eN(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eH=function(){var e=(0,x.t)().query.user,t=(0,eS.Z)(e),r=t.loading,n=t.error,o=t.user,i=(0,p.useMemo)(function(){var e;return(null==o?void 0:null===(e=o.courses)||void 0===e?void 0:e.edges.filter(function(e){return!e.node._deleted}))||[]},[o]),s=(0,p.useMemo)(function(){return[{id:"title",header:"Course",accessorFn:function(e){return e.node.title},cell:function(t){var r=t.cell.row.original.node,n={title:null==r?void 0:r.title,image:null==r?void 0:r.image,href:(null==r?void 0:r.id)&&{query:{course:null==r?void 0:r.id,user:e}}};return(0,D.tZ)(v.Z,e_({},n))}},{id:"status",header:"Course status",accessorKey:"status"},{id:"score",header:"Score",accessorKey:"score"},e_(e_({},eh.createdAt),{},{header:"First access"}),e_(e_({},eh.updatedAt),{},{header:"Last visited"}),{id:"actions",header:"",hideOnCsv:!0,width:300,cell:function(t){var r=t.cell.row.original.node,n={query:e_(e_({},r.id&&{course:r.id}),{},{user:e})};return(0,D.tZ)("div",{className:"space-x-4",children:(0,D.tZ)(m.Z,{href:n,children:"See details"})})}}]},[]);return(0,D.tZ)(J,{title:"".concat(null==o?void 0:o.fullName,"'s courses"),csvFilename:"User courses for ".concat(null==o?void 0:o.fullName),tableData:i,tableCols:s,loadingText:"Loading user's courses",errorText:"Unable to fetch user's courses.",loading:r,error:n})},eE=r(41637);function eV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eV(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eV(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ek=function(){var e,t,r,n,o=(0,x.t)().query,i=o.user,s=o.course,c=(0,g.a)((0,h.Ps)(a||(a=(0,f.Z)(["\n      query getUsersLessons($userId: ID!, $where: JSON) {\n        user(id: $userId) {\n          fullName\n          courses(where: $where) {\n            nodes {\n              id\n              title\n            }\n          }\n          lessons(where: $where) {\n            edges {\n              node {\n                id\n                title\n                contentType\n              }\n              status\n              lastVisited\n              firstVisited\n              createdAt\n              updatedAt\n              score\n              visits\n              completed\n            }\n            totalCount\n          }\n        }\n      }\n    "]))),{variables:{userId:i,where:{courseId:s}}}),u=c.loading,l=c.error,d=c.data,m=(0,p.useMemo)(function(){var e;return null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.lessons.edges},[d]),y=(0,p.useMemo)(function(){return[{id:"title",header:"Lesson",accessorFn:function(e){return e.node.title},cell:function(e){var t,r,n,o=e.cell,i=(null===(t=eE.f[null===(r=o.row.original.node)||void 0===r?void 0:r.contentType])||void 0===t?void 0:t.icon)||null,s={title:null===(n=o.row.original.node)||void 0===n?void 0:n.title,icon:!!i&&(0,D.tZ)(i,{className:"hidden w-6 h-full bg-grey-500 text-main-secondary"})};return(0,D.tZ)(v.Z,eA({},s))}},{id:"status",header:"Course status",accessorKey:"status"},{id:"score",header:"Score",accessorKey:"score"},eA(eA({},eh.createdAt),{},{header:"First access"}),eA(eA({},eh.updatedAt),{},{header:"Last visited"}),{id:"actions",header:"",hideOnCsv:!0,width:300,cell:function(e){var t,r=null===(t=e.cell.row.original.node)||void 0===t?void 0:t.id;return eA({user:i,course:s},r&&{lesson:r}),(0,D.tZ)("div",{className:"flex space-x-4 justify-center"})}}]},[]),b=null==d?void 0:null===(e=d.user)||void 0===e?void 0:null===(t=e.courses)||void 0===t?void 0:null===(r=t.nodes)||void 0===r?void 0:r[0];return(0,D.tZ)(D.HY,{children:(0,D.tZ)(J,{simpleHeader:!0,title:(0,D.BX)(D.HY,{children:[(0,D.tZ)("span",{className:"font-semibold",children:"Lesson report "}),(0,D.tZ)("span",{className:"font-normal",children:"for user: "}),(0,D.BX)("span",{className:"font-semibold",children:[null==d?void 0:null===(n=d.user)||void 0===n?void 0:n.fullName," "]}),(0,D.tZ)("span",{className:"font-normal",children:"in course: "}),(0,D.tZ)("span",{className:"font-semibold",children:null==b?void 0:b.title})]}),tableData:m,tableCols:y,loadingText:"Loading lessons",errorText:"Unable to fetch user's lessons.",loading:u,error:l})})};function ez(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ez(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ez(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eT=function(){var e=(0,g.a)(ei.u7),t=e.loading,r=e.error,n=e.data,o=(0,x.t)(),i=(0,p.useMemo)(function(){var e;return(null==n?void 0:null===(e=n.users)||void 0===e?void 0:e.edges)||[]},[n]),s=(0,p.useMemo)(function(){return[{id:"name",header:"Name",accessorFn:function(e){return e.node.fullName},cell:function(e){var t=e.cell,r={imageSrc:t.row.original.node.profileImageUrl,icon:(0,D.tZ)(ed.n,{className:"hidden w-auto h-full bg-grey-500 text-main-secondary text-opacity-50"}),title:t.row.original.node.fullName,secondary:t.row.original.node.email,href:t.row.original.node.id&&{query:{user:t.row.original.node.id}}};return(0,D.tZ)(v.Z,eY({placeholder:"/images/user-generic.png"},r))}},{id:"enrolled",accessorFn:function(e){return e.node.courses.totalCount},header:"Courses Enrolled"},{id:"not_started",header:"Not started",accessorFn:function(e){return e.node.courses.edges.filter(function(e){return!(null!=e&&e.status)||"not_started"===e.status}).length}},{id:"in_progress",header:"In progress",accessorFn:function(e){return e.node.courses.edges.filter(function(e){return"in_progress"===e.status}).length}},{id:"completed",header:"Completed",accessorFn:function(e){return e.node.courses.edges.filter(function(e){return"completed"===e.status}).length}},{id:"actions",header:"",hideOnCsv:!0,width:300,cell:function(e){var t=e.cell,r=t.row.original.node.id&&{query:eY(eY({},o.query),{},{type:"course",user:t.row.original.node.id})};return t.row.original.node.id&&eY(eY({},o.query),{},{type:"group",user:t.row.original.node.id}),(0,D.tZ)("div",{className:"flex space-x-4 justify-center",children:(0,D.tZ)(m.Z,{href:r,children:"View courses"})})}}]},[]);return(0,D.tZ)(J,{tableData:i,tableCols:s,loadingText:"Loading users",errorText:"Unable to fetch users.",loading:t,error:r,filters:["group"],simpleHeader:!0,title:(0,D.tZ)(D.HY,{children:"Users"})})};function eF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var eU=function(){var e=(0,d.useRouter)().query,t=e.user,r=(e.group,e.course),n=e.lesson,o=(e.category,e.type),i=en;return"user"===o&&(i=eT),"group"===o&&(i=eC),t?i=n?function(){return(0,D.BX)("p",{children:["User's lesson statistics for lesson with id: ",n]})}:r?ek:eH:n?i=eZ:r&&(i=ey),(0,D.tZ)(D.HY,{children:i&&(0,D.tZ)(i,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eF(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},{}))})},eL=r(24545),eq=r(58042),eI=r(46157),eB=function(){return(0,u.Z)({title:"Reports"}),(0,eL.Z)([[(0,D.BX)(D.HY,{children:[(0,D.tZ)(eq.X,{className:"w-5 mr-2 -ml-1"})," Courses"]}),"/admin/reports?type=course"],[(0,D.BX)(D.HY,{children:[(0,D.tZ)(eI.Q,{className:"w-5 mr-2 -ml-1"})," Users"]}),"/admin/reports?type=user"],[(0,D.BX)(D.HY,{children:[(0,D.tZ)(eP.Y,{className:"w-5 mr-2 -ml-1"})," Groups"]}),"/admin/reports?type=group"]]),(0,D.tZ)(eU,{})};eB.navState={topLevel:"reports",secondary:"overview"};var eX=eB},98231:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/reports",function(){return r(46540)}])},20516:function(e){e.exports={button:"Button_button__RRrLU",button_bestia:"Button_button_bestia__QRXEX",button__bg:"Button_button__bg__EuarU",button__span:"Button_button__span__Tcje3"}},57632:function(e,t,r){"use strict";let n;r.d(t,{Z:function(){return l}});let o="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var i={randomUUID:o};let s=new Uint8Array(16);function c(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(s)}let a=[];for(let u=0;u<256;++u)a.push((u+256).toString(16).slice(1));var l=function(e,t,r){if(i.randomUUID&&!t&&!e)return i.randomUUID();e=e||{};let n=e.random||(e.rng||c)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return function(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}(n)}}},function(e){e.O(0,[9299,6644,4723,9774,2888,179],function(){return e(e.s=98231)}),_N_E=e.O()}]);