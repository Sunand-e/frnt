(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7464],{66631:function(e,t,n){"use strict";var r=n(59499),o=n(4730),a=n(87536),c=n(99273),i=n(70990),s=n(26316),u=n(13873),l=n(9310),d=n.n(l);n(95833);var f=n(23239),p=n.n(f),b=n(35944),v=["control","name","label"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var y=function(e){var t=e.control,n=e.name,l=e.label,f=(0,o.Z)(e,v),y=(0,a.bc)({control:t,name:n}).field,m=function(e){y.onChange(e)};return(0,b.BX)("div",{children:[l&&(0,b.tZ)("label",{className:"block",children:(0,b.tZ)("span",{className:"text-sm font-medium text-gray-700",children:l})}),(0,b.tZ)(d(),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({selected:y.value,className:p().DualInput,onChange:m,showHeaderLabels:!0,canFilter:!0,icons:{moveLeft:(0,b.tZ)(c.s,{className:"h-5"}),moveAllLeft:(0,b.tZ)(i.$,{className:"h-5"}),moveRight:(0,b.tZ)(s._,{className:"h-5"}),moveAllRight:(0,b.tZ)(u.B,{className:"h-5"})}},f))]})};t.Z=y},55103:function(e,t,n){"use strict";var r=n(22345),o=n(71641);t.Z=function(){var e=(0,o.a)(r.Pb),t=e.loading,n=e.error,a=e.data;return{courses:(a=void 0===a?{}:a).courses,loading:t,error:n}}},81896:function(e,t,n){"use strict";var r=n(22345),o=n(71641);t.Z=function(){var e=(0,o.a)(r.kQ),t=e.loading,n=e.error,a=e.data;return{pathways:(a=void 0===a?{}:a).pathways,loading:t,error:n}}},68624:function(e,t,n){"use strict";var r=n(22345),o=n(71641);t.Z=function(){var e=(0,o.a)(r.Yu),t=e.loading,n=e.error,a=e.data;return{resources:(a=void 0===a?{}:a).resources,loading:t,error:n}}},99139:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}});var r,o,a,c=n(40350),i=n(24249),s=n(24545),u=n(71641),l=n(86612),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,u.a)(l.H7,{variables:e?{id:e}:null}),n=t.loading,r=t.error,o=t.data;return{tenant:(o=void 0===o?{}:o).tenant,loading:n,error:r}},f=n(59499),p=n(17674),b=n(71383),v=n(17283),h=(0,v.Ps)(r||(r=(0,b.Z)(["\n  mutation UpdateTenant(\n    $id: ID!,\n    $name: String,\n    $shortName: String,\n    $parentId: ID,\n    $settings: JSON,\n    $url: String\n  ) {\n    updateTenant(\n      input: {\n        id: $id,\n        name: $name,\n        shortName: $shortName,\n        parentId: $parentId,\n        settings: $settings,\n        url: $url\n      }\n    ) {\n      tenant {\n        ...TenantFragment\n      }\n    }\n  }\n  ","\n"])),l.Zz),y=n(50319);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,f.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,u.a)(l.H7,{variables:{id:e}}),n=t.loading,r=t.error,o=t.data,a=(o=void 0===o?{}:o).tenant,c=(0,y.D)(h),i=(0,p.Z)(c,2),s=i[0];i[1];var d=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=O({},t);s({variables:O({id:e},r),optimisticResponse:{updateTenant:{__typename:"UpdateTenantPayload",tenant:O(O({},a),r)}},onCompleted:n}).catch(function(e){})};return{tenant:a,loading:n,error:r,updateTenant:d}},j=n(49745),Z=n(50029),w=n(90116),I=n(87794),P=n.n(I),S=n(67294),D=n(78773),C=n(87536),E=n(55103),k=n(66631),$=n(35944),N=function(e){var t,n=e.control,r=(0,E.Z)().courses,o=null==r?void 0:null===(t=r.edges)||void 0===t?void 0:t.map(function(e){var t=e.node;return{value:t.id,label:t.title}});return(0,$.tZ)($.HY,{children:r&&(0,$.tZ)(k.Z,{label:"Shared courses",control:n,name:"sharedCourseIds",options:o,lang:{availableHeader:"Available",selectedHeader:"Shared"}})})},x=n(81896),_=function(e){var t,n=e.control,r=(0,x.Z)().pathways,o=null==r?void 0:null===(t=r.edges)||void 0===t?void 0:t.map(function(e){var t=e.node;return{value:t.id,label:t.title}});return(0,$.tZ)($.HY,{children:r&&(0,$.tZ)(k.Z,{label:"Shared pathways",control:n,name:"sharedPathwayIds",options:o,lang:{availableHeader:"Available",selectedHeader:"Shared"}})})},H=n(68624),B=function(e){var t,n=e.control,r=(0,H.Z)().resources,o=null==r?void 0:null===(t=r.edges)||void 0===t?void 0:t.map(function(e){var t=e.node;return{value:t.id,label:t.title}});return(0,$.tZ)($.HY,{children:r&&(0,$.tZ)(k.Z,{label:"Shared resources",control:n,name:"sharedResourceIds",options:o,lang:{availableHeader:"Available",selectedHeader:"Shared"}})})},A=(0,v.Ps)(o||(o=(0,b.Z)(["\n  mutation ShareContentItems(\n    $contentItemIds: [ID!]!,\n    $tenantId: ID!\n  ) {\n    shareContentItems(\n      input: {\n        contentItemIds: $contentItemIds,\n        tenantId: $tenantId,\n      }\n    ) {\n      message\n    }\n  }\n"])));function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var T=function(){var e=(0,y.D)(A),t=(0,p.Z)(e,2),n=t[0];return t[1],{shareContentItems:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],n({variables:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){(0,f.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e)}).catch(function(e){})}}},L=function(e){var t=(0,u.a)(l.EL,{variables:{where:{sharedWith:e}}});return{sharedContentItems:(t.loading,t.error,t.data)}},X=(0,v.Ps)(a||(a=(0,b.Z)(["\n  mutation RevokeShareContentItems(\n    $contentItemIds: [ID!]!,\n    $tenantId: ID!\n  ) {\n    revokeShareContentItems(\n      input: {\n        contentItemIds: $contentItemIds,\n        tenantId: $tenantId,\n      }\n    ) {\n      message\n    }\n  }\n"])));function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var q=function(){var e=(0,y.D)(X),t=(0,p.Z)(e,2),n=t[0];return t[1],{revokeShareContentItems:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],n({variables:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach(function(t){(0,f.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e)}).catch(function(e){})}}},U=function(){var e,t=(0,i.t)().query.id,n=T().shareContentItems,r=q().revokeShareContentItems,o=L(t).sharedContentItems,a=(0,S.useState)([]),c=a[0],s=a[1],u={id:t,sharedCourseIds:o?(0,w.Z)(null==o?void 0:o.courses.edges.map(function(e){return e.node.id})):[],sharedResourceIds:o?(0,w.Z)(null==o?void 0:o.resources.edges.map(function(e){return e.node.id})):[],sharedPathwayIds:o?(0,w.Z)(null==o?void 0:o.pathways.edges.map(function(e){return e.node.id})):[]},l=(0,C.cI)({defaultValues:u}),d=l.handleSubmit,f=(l.formState.errors,l.control),p=l.reset;(0,S.useEffect)(function(){p(u),s([].concat((0,w.Z)(u.sharedCourseIds),(0,w.Z)(u.sharedResourceIds),(0,w.Z)(u.sharedPathwayIds)))},[o]);var b=(e=(0,Z.Z)(P().mark(function e(o){var a,i,u;return P().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=[].concat((0,w.Z)(o.sharedCourseIds),(0,w.Z)(o.sharedResourceIds),(0,w.Z)(o.sharedPathwayIds)),i=c.filter(function(e){return!a.includes(e)}),u=a.filter(function(e){return!c.includes(e)}),console.log("revokeIds"),console.log(i),console.log("shareIds"),console.log(u),r({tenantId:t,contentItemIds:i}),n({tenantId:t,contentItemIds:u}),s(a);case 11:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)});return(0,$.BX)("form",{className:"h-full w-full flex flex-col space-y-4",onSubmit:d(b),children:[(0,$.tZ)(N,{control:f}),(0,$.tZ)(B,{control:f}),(0,$.tZ)(_,{control:f}),(0,$.tZ)(D.Z,{type:"submit",children:"Share content with this tenant"})]})};function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach(function(t){(0,f.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var G=function(){var e=(0,i.t)(),t=e.query.id,n=d(t),r=n.tenant;n.loading,n.error;var o=g(t).updateTenant,a=function(t){o(z(z({},t),{},{settings:z(z(z({},t.settings),t.primaryBrandColor&&z({},{primaryBrandColor:t.primaryBrandColor})),t.secondaryBrandColor&&z({},{secondaryBrandColor:t.secondaryBrandColor}))})),e.push("/admin/tenants")};return(0,$.BX)("div",{className:"flex space-x-0 flex-col w-full max-w-screen-lg md:flex-row md:space-x-11",children:[(0,$.tZ)(j.Z,{tenant:r,onSubmit:a}),(0,$.tZ)("div",{className:"flex flex-col w-full space-y-8 mt-4 md:mt-0",children:(0,$.tZ)(U,{})})]})},J=n(39316),M=function(){return(0,$.BX)($.HY,{children:[(0,$.tZ)("span",{className:"hidden lg:block",children:"Back to tenants list"}),(0,$.tZ)("span",{className:"block lg:hidden",children:(0,$.tZ)(J.x,{width:"20"})})]})},Q=function(){var e=d((0,i.t)().query.id),t=e.tenant;return e.loading,e.error,(0,c.Z)({title:"Edit Tenant".concat(t?": ".concat(t.name):"")}),(0,s.Z)([[(0,$.tZ)(M,{}),"/admin/tenants"]]),(0,$.tZ)($.HY,{children:t&&(0,$.tZ)(G,{})})};Q.navState={topLevel:"tenants"};var V=Q},24249:function(e,t,n){"use strict";n.d(t,{t:function(){return d}});var r=n(59499),o=n(17674),a=n(83618);n(67294);var c=n(11163);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l=function(e){var t,n=e.split("?"),r=(0,a.Z)(n).slice(1).join("?"),c={},i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw a}}}}(new URLSearchParams(r).entries());try{for(i.s();!(t=i.n()).done;){var s=(0,o.Z)(t.value,2),l=s[0],d=s[1];c[l]=d}}catch(f){i.e(f)}finally{i.f()}return c},d=function(){var e=(0,c.useRouter)();return e.query=s(s({},l(e.asPath)),e.query),e}},58255:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/tenants/edit",function(){return n(99139)}])},23239:function(e){e.exports={DualInput:"DualListBoxInput_DualInput__PER2G"}},4730:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,{Z:function(){return r}})},83618:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(14666),o=n(28811),a=n(2937),c=n(14882);function i(e){return(0,r.Z)(e)||(0,o.Z)(e)||(0,a.Z)(e)||(0,c.Z)()}}},function(e){e.O(0,[6107,3538,7216,4656,9774,2888,179],function(){return e(e.s=58255)}),_N_E=e.O()}]);