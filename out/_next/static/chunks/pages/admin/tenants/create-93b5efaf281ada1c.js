(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7873],{83360:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return _}});var r,o=e(40350),a=e(49745),i=e(24545),u=e(11163),c=e(90116),l=e(59499),s=e(17674),d=e(50319),f=e(71383),p=e(17283),v=e(86612),m=(0,p.Ps)(r||(r=(0,f.Z)(["\n  mutation CreateTenant(\n    $name: String!,\n    $shortName: String!,\n    $parentId: ID,\n    $settings: JSON,\n    $url: String!\n  ) {\n    createTenant(\n      input: {\n        name: $name,\n        shortName: $shortName,\n        parentId: $parentId,\n        settings: $settings,\n        url: $url\n      }\n    ) {\n      tenant {\n        ...TenantFragment\n      }\n    }\n  }\n  ","\n"])),v.Zz);function h(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function g(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?h(Object(e),!0).forEach(function(n){(0,l.Z)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):h(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var y=function(){var t=(0,d.D)(m,{update:function(t,n){var e=n.data.createTenant,r=t.readQuery({query:v.Rf});t.writeQuery({query:v.Rf,data:g(g({},r),{},{tenants:g(g({},r.tenants),{},{edges:[{node:e.tenant}].concat((0,c.Z)(r.tenants.edges))})})})}}),n=(0,s.Z)(t,2),e=n[0];return n[1],{createTenant:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],e({variables:g({},t),optimisticResponse:{createTenant:{__typename:"CreateTenantPayload",tenant:g(g({__typename:"Tenant",_deleted:!1,createdAt:0,logos:[],updatedAt:0,settings:{}},t),{},{id:"tmp-".concat(Math.floor(1e4*Math.random()))})}}}).catch(function(t){})}}},b=e(39316),O=e(35944),w=function(){return(0,O.BX)(O.HY,{children:[(0,O.tZ)("span",{className:"hidden lg:block",children:"Back to tenant list"}),(0,O.tZ)("span",{className:"block lg:hidden",children:(0,O.tZ)(b.x,{width:"20"})})]})},Z=function(){(0,o.Z)({title:"Create new tenant"}),(0,i.Z)([[(0,O.tZ)(w,{}),"/admin/tenants"]]);var t=(0,u.useRouter)(),n=y().createTenant,e=function(e){n(e,function(){}),t.push("/admin/tenants")};return(0,O.tZ)(O.HY,{children:(0,O.tZ)(a.Z,{onSubmit:e})})};Z.navState={topLevel:"tenants",secondary:"overview"};var _=Z},89694:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/tenants/create",function(){return e(83360)}])},50319:function(t,n,e){"use strict";e.d(n,{D:function(){return s}});var r=e(70655),o=e(67294),a=e(14012),i=e(82152),u=e(14692),c=e(30990),l=e(66252);function s(t,n){var e=(0,l.x)(null==n?void 0:n.client);(0,u.Vp)(t,u.n_.Mutation);var s=(0,o.useState)({called:!1,loading:!1,client:e}),d=s[0],f=s[1],p=(0,o.useRef)({result:d,mutationId:0,isMounted:!0,client:e,mutation:t,options:n});Object.assign(p.current,{client:e,options:n,mutation:t});var v=(0,o.useCallback)(function(t){void 0===t&&(t={});var n=p.current,e=n.client,o=n.options,u=n.mutation,l=(0,r.pi)((0,r.pi)({},o),{mutation:u});p.current.result.loading||l.ignoreResults||!p.current.isMounted||f(p.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:e});var s=++p.current.mutationId,d=(0,a.J)(l,t);return e.mutate(d).then(function(n){var r,o,a,u=n.data,l=n.errors,v=l&&l.length>0?new c.c({graphQLErrors:l}):void 0;if(s===p.current.mutationId&&!d.ignoreResults){var m={called:!0,loading:!1,data:u,error:v,client:e};p.current.isMounted&&!(0,i.D)(p.current.result,m)&&f(p.current.result=m)}return null===(o=null===(r=p.current.options)||void 0===r?void 0:r.onCompleted)||void 0===o||o.call(r,n.data,d),null===(a=t.onCompleted)||void 0===a||a.call(t,n.data,d),n}).catch(function(n){var r,o,a,u;if(s===p.current.mutationId&&p.current.isMounted){var c={loading:!1,error:n,data:void 0,called:!0,client:e};(0,i.D)(p.current.result,c)||f(p.current.result=c)}if((null===(r=p.current.options)||void 0===r?void 0:r.onError)||d.onError)return null===(a=null===(o=p.current.options)||void 0===o?void 0:o.onError)||void 0===a||a.call(o,n,d),null===(u=t.onError)||void 0===u||u.call(t,n,d),{data:void 0,errors:n};throw n})},[]),m=(0,o.useCallback)(function(){p.current.isMounted&&f({called:!1,loading:!1,client:e})},[]);return(0,o.useEffect)(function(){return p.current.isMounted=!0,function(){p.current.isMounted=!1}},[]),[v,(0,r.pi)({reset:m},d)]}},14666:function(t,n,e){"use strict";function r(t){if(Array.isArray(t))return t}e.d(n,{Z:function(){return r}})},14882:function(t,n,e){"use strict";function r(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.d(n,{Z:function(){return r}})},17674:function(t,n,e){"use strict";e.d(n,{Z:function(){return i}});var r=e(14666),o=e(2937),a=e(14882);function i(t,n){return(0,r.Z)(t)||function(t,n){var e,r,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var a=[],i=!0,u=!1;try{for(o=o.call(t);!(i=(e=o.next()).done)&&(a.push(e.value),!n||a.length!==n);i=!0);}catch(c){u=!0,r=c}finally{try{i||null==o.return||o.return()}finally{if(u)throw r}}return a}}(t,n)||(0,o.Z)(t,n)||(0,a.Z)()}}},function(t){t.O(0,[6107,7216,4656,9774,2888,179],function(){return t(t.s=89694)}),_N_E=t.O()}]);