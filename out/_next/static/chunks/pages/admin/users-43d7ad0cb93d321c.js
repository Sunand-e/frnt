(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9635],{26373:function(e,n,t){"use strict";t.d(n,{m:function(){return a}});var r=t(87462),o=t(67294),i=t(54142),a=o.forwardRef(function(e,n){return o.createElement(i.r,(0,r.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 28 28"},e,{ref:n}),o.createElement("path",{d:"M24 13h-9V4a1 1 0 1 0-2 0v9H4a1 1 0 1 0 0 2h9v9a1 1 0 1 0 2 0v-9h9a1 1 0 1 0 0-2z"}))});a.displayName="Add"},78773:function(e,n,t){"use strict";var r=t(20516),o=t.n(r),i=t(35944),a=function(e){var n=e.onClick,t=e.disabled,r=e.type,a=e.displayType,c=e.size,s=e.className,l=e.children,u="bg-main group-hover:bg-opacity-80 transition-colors duration-1000";return(void 0===a?"normal":a)==="alert"&&(u="bg-red-800 group-hover:bg-red-700 transition-colors duration-1000"),(0,i.BX)("button",{type:void 0===r?"button":r,disabled:void 0!==t&&t,className:"\n        ".concat(s,"\n        ").concat(o().button,"\n        ").concat(o().button_bestia,"\n        ").concat("sm"===c?"px-1":"px-8","\n\n        min-w-16 py-2 \n        whitespace-nowrap nowrap\n        border border-transparent rounded-md\n        text-sm\n        group\n        disabled bg-main text-white\n        focus:bg-opacity-50 focus:outline-none \n        active:bg-opacity-50 \n      "),onClick:n,children:[(0,i.tZ)("div",{className:"".concat(o().button__bg," ").concat(u)}),(0,i.tZ)("span",{className:o().button__span,children:l})]})};n.Z=a},40350:function(e,n,t){"use strict";var r=t(67294),o=t(94225);n.Z=function(e){(0,r.useEffect)(function(){(0,o.jL)(e)},[e])}},75375:function(e,n,t){"use strict";var r=t(50029),o=t(87794),i=t.n(o),a=t(50196),c=t(67294),s=function(){var e,n=(0,c.useState)(""),t=n[0],o=n[1];return(0,c.useEffect)(function(){o(localStorage.getItem("token"))},[]),{sendInvite:(0,c.useCallback)((e=(0,r.Z)(i().mark(function e(n){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.ZP.request({method:"post",url:"/api/v1/users/send_invitation",headers:{Authorization:"Bearer ".concat(t)},data:{user_ids:n}}).then(function(e){console.log("then...."),console.log(e)});case 2:case"end":return e.stop()}},e)})),function(n){return e.apply(this,arguments)}),[t])}};n.Z=s},71764:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return A}});var r,o=t(40350),i=t(71641),a=t(67294),c=t(5564),s=t(50051),l=t(70442),u=t(79939),d=t(96420),f=t(17674),m=t(50319),p=t(71383),h=(0,t(17283).Ps)(r||(r=(0,p.Z)(["\n  mutation DeleteUser(\n    $id: ID!\n  ) {\n    deleteUser(\n      id: $id\n    ) {\n      user {\n        id\n        _deleted @client\n      }\n    }\n  }\n"]))),b=function(){var e=(0,m.D)(h,{refetchQueries:[s.fo]}),n=(0,f.Z)(e,2),t=n[0];return n[1],{deleteUser:function(e){t({variables:{id:e},optimisticResponse:{deleteUser:{__typename:"DeleteUserPayload",user:{__typename:"User",id:e,_deleted:!0}}}})}}},v=t(9023),g=t(35944),_=function(e){var n=e.user,t=(null==n?void 0:n.id)&&"".concat("/admin/users/edit","?id=").concat(n.id),r=b().deleteUser,o=(0,v.Z)({type:"user",name:n.fullName,onConfirm:function(){return r(n.id)}}).confirmDelete,i=[{label:"Edit user",href:t,capability:"UpdateUser"},{label:(0,g.tZ)("span",{className:"text-red-500",children:"Delete user"}),capability:"DeleteUser",onClick:o}];return(0,g.tZ)(d.Z,{menuItems:i,buttonText:"Actions"})},w=t(75375),Z=function(){var e=(0,i.a)(s.fo),n=(e.loading,e.error,e.data),t=(0,a.useMemo)(function(){var e,t;return(null==n?void 0:null===(e=n.users)||void 0===e?void 0:null===(t=e.edges)||void 0===t?void 0:t.map(function(e){return e.node}))||[]},[n]),r=(0,a.useMemo)(function(){return[{header:"User ",accessorFn:function(e){return e.fullName},cell:function(e){var n=e.cell;return(0,g.tZ)(l.Z,{title:n.row.original.fullName,secondary:n.row.original.email,href:n.row.original.id&&"".concat("/admin/users/edit","?id=").concat(n.row.original.id),imageSrc:n.row.original.profileImageUrl,icon:(0,g.tZ)(u.n,{className:"hidden w-auto h-full bg-grey-500 text-main-secondary text-opacity-50"}),placeholder:"/images/user-generic.png"})}},{header:"Groups",accessorFn:function(e){return e.groups.edges.map(function(e){return e.node.name}).join(", ")},cell:function(e){return e.cell.getValue()||"-"}},{header:"Global Roles",id:"roles",cell:function(e){return e.cell.row.original.roles.filter(function(e){return"User"!==e.name}).map(function(e){return e.name}).join(", ")||"-"}},{width:300,header:"Actions",accessorKey:"actions",cell:function(e){var n=e.cell;return(0,g.tZ)(_,{user:n.row.original})}}]},[]),o=(0,a.useState)({}),d=o[0],f=o[1],m=(0,w.Z)().sendInvite,p=[{label:"Send invites to selected users",onClick:(0,a.useCallback)(function(){m(d)},[d])},{label:(0,g.tZ)("span",{className:"text-red-500",children:"Delete users"}),onClick:console.log("test")}];return(0,g.tZ)(c.Z,{tableData:t,tableCols:r,bulkActions:p,onRowSelect:f})},y=t(24545),N=t(26373),k=t(87462),x=t(54142),U=a.forwardRef(function(e,n){return a.createElement(x.r,(0,k.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),a.createElement("path",{d:"m12 18 4-5h-3V2h-2v11H8z"}),a.createElement("path",{d:"M19 9h-4v2h4v9H5v-9h4V9H5c-1.103 0-2 .897-2 2v9c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-9c0-1.103-.897-2-2-2z"}))});U.displayName="Import";var E=function(){return(0,g.BX)(g.HY,{children:[(0,g.tZ)("span",{className:"hidden lg:block",children:"Create new user"}),(0,g.tZ)("span",{className:"block lg:hidden",children:(0,g.tZ)(N.m,{width:"20"})})]})},C=function(){return(0,g.BX)(g.HY,{children:[(0,g.tZ)("p",{className:"hidden lg:block",children:"Import users"}),(0,g.tZ)("span",{className:"block lg:hidden",children:(0,g.tZ)(U,{width:"20"})})]})},B=function(){return(0,o.Z)({title:"Users"}),(0,y.Z)([[(0,g.tZ)(E,{}),"/admin/users/create"],[(0,g.tZ)(C,{}),"/admin/users/import"]]),(0,g.tZ)(g.HY,{children:(0,g.tZ)(Z,{})})};B.navState={topLevel:"users",secondary:"overview"};var A=B},64168:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return t(71764)}])},20516:function(e){e.exports={button:"Button_button__RRrLU",button_bestia:"Button_button_bestia__QRXEX",button__bg:"Button_button__bg__EuarU",button__span:"Button_button__span__Tcje3"}}},function(e){e.O(0,[6644,744,9774,2888,179],function(){return e(e.s=64168)}),_N_E=e.O()}]);