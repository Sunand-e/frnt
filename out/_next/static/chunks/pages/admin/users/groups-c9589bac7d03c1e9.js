(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6652],{26373:function(t,e,n){"use strict";n.d(e,{m:function(){return s}});var r=n(87462),i=n(67294),o=n(54142),s=i.forwardRef(function(t,e){return i.createElement(o.r,(0,r.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 28 28"},t,{ref:e}),i.createElement("path",{d:"M24 13h-9V4a1 1 0 1 0-2 0v9H4a1 1 0 1 0 0 2h9v9a1 1 0 1 0 2 0v-9h9a1 1 0 1 0 0-2z"}))});s.displayName="Add"},27484:function(t){var e;e=function(){"use strict";var t="millisecond",e="second",n="minute",r="hour",i="week",o="month",s="quarter",a="year",u="date",c="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},h="en",p={};p[h]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||"th")+"]"}};var g=function(t){return t instanceof b},m=function t(e,n,r){var i;if(!e)return h;if("string"==typeof e){var o=e.toLowerCase();p[o]&&(i=o),n&&(p[o]=n,i=o);var s=e.split("-");if(!i&&s.length>1)return t(s[0])}else{var a=e.name;p[a]=e,i=a}return!r&&i&&(h=i),i||!r&&h},v=function(t,e){if(g(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new b(n)},y={s:f,z:function(t){var e=-t.utcOffset(),n=Math.abs(e);return(e<=0?"+":"-")+f(Math.floor(n/60),2,"0")+":"+f(n%60,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,o),s=n-i<0,a=e.clone().add(r+(s?-1:1),o);return+(-(r+(n-i)/(s?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(c){return({M:o,y:a,w:i,d:"day",D:u,h:r,m:n,s:e,ms:t,Q:s})[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}};y.l=m,y.i=g,y.w=function(t,e){return v(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var b=function(){function f(t){this.$L=m(t.locale,null,!0),this.parse(t)}var h=f.prototype;return h.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(y.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(d);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},h.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},h.$utils=function(){return y},h.isValid=function(){return this.$d.toString()!==c},h.isSame=function(t,e){var n=v(t);return this.startOf(e)<=n&&n<=this.endOf(e)},h.isAfter=function(t,e){return v(t)<this.startOf(e)},h.isBefore=function(t,e){return this.endOf(e)<v(t)},h.$g=function(t,e,n){return y.u(t)?this[e]:this.set(n,t)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(t,s){var c=this,d=!!y.u(s)||s,l=y.p(t),f=function(t,e){var n=y.w(c.$u?Date.UTC(c.$y,e,t):new Date(c.$y,e,t),c);return d?n:n.endOf("day")},h=function(t,e){return y.w(c.toDate()[t].apply(c.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(e)),c)},p=this.$W,g=this.$M,m=this.$D,v="set"+(this.$u?"UTC":"");switch(l){case a:return d?f(1,0):f(31,11);case o:return d?f(1,g):f(0,g+1);case i:var b=this.$locale().weekStart||0,$=(p<b?p+7:p)-b;return f(d?m-$:m+(6-$),g);case"day":case u:return h(v+"Hours",0);case r:return h(v+"Minutes",1);case n:return h(v+"Seconds",2);case e:return h(v+"Milliseconds",3);default:return this.clone()}},h.endOf=function(t){return this.startOf(t,!1)},h.$set=function(i,s){var c,d=y.p(i),l="set"+(this.$u?"UTC":""),f=((c={}).day=l+"Date",c[u]=l+"Date",c[o]=l+"Month",c[a]=l+"FullYear",c[r]=l+"Hours",c[n]=l+"Minutes",c[e]=l+"Seconds",c[t]=l+"Milliseconds",c)[d],h="day"===d?this.$D+(s-this.$W):s;if(d===o||d===a){var p=this.clone().set(u,1);p.$d[f](h),p.init(),this.$d=p.set(u,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},h.set=function(t,e){return this.clone().$set(t,e)},h.get=function(t){return this[y.p(t)]()},h.add=function(t,s){var u,c=this;t=Number(t);var d=y.p(s),l=function(e){var n=v(c);return y.w(n.date(n.date()+Math.round(e*t)),c)};if(d===o)return this.set(o,this.$M+t);if(d===a)return this.set(a,this.$y+t);if("day"===d)return l(1);if(d===i)return l(7);var f=((u={})[n]=6e4,u[r]=36e5,u[e]=1e3,u)[d]||1,h=this.$d.getTime()+t*f;return y.w(h,this)},h.subtract=function(t,e){return this.add(-1*t,e)},h.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||c;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=y.z(this),o=this.$H,s=this.$m,a=this.$M,u=n.weekdays,d=n.months,f=function(t,n,i,o){return t&&(t[n]||t(e,r))||i[n].slice(0,o)},h=function(t){return y.s(o%12||12,t,"0")},p=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:y.s(a+1,2,"0"),MMM:f(n.monthsShort,a,d,3),MMMM:f(d,a),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:f(n.weekdaysMin,this.$W,u,2),ddd:f(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:y.s(o,2,"0"),h:h(1),hh:h(2),a:p(o,s,!0),A:p(o,s,!1),m:String(s),mm:y.s(s,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:i};return r.replace(l,function(t,e){return e||g[t]||i.replace(":","")})},h.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},h.diff=function(t,u,c){var d,l=y.p(u),f=v(t),h=(f.utcOffset()-this.utcOffset())*6e4,p=this-f,g=y.m(this,f);return g=((d={})[a]=g/12,d[o]=g,d[s]=g/3,d[i]=(p-h)/6048e5,d.day=(p-h)/864e5,d[r]=p/36e5,d[n]=p/6e4,d[e]=p/1e3,d)[l]||p,c?g:y.a(g)},h.daysInMonth=function(){return this.endOf(o).$D},h.$locale=function(){return p[this.$L]},h.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=m(t,e,!0);return r&&(n.$L=r),n},h.clone=function(){return y.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},f}(),$=b.prototype;return v.prototype=$,[["$ms",t],["$s",e],["$m",n],["$H",r],["$W","day"],["$M",o],["$y",a],["$D",u]].forEach(function(t){$[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),v.extend=function(t,e){return t.$i||(t(e,b,v),t.$i=!0),v},v.locale=m,v.isDayjs=g,v.unix=function(t){return v(1e3*t)},v.en=p[h],v.Ls=p,v.p={},v},t.exports=e()},28734:function(t){var e;e=function(){return function(t,e){var n=e.prototype,r=n.format;n.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return r.bind(this)(t);var i=this.$utils(),o=(t||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(t){switch(t){case"Q":return Math.ceil((e.$M+1)/3);case"Do":return n.ordinal(e.$D);case"gggg":return e.weekYear();case"GGGG":return e.isoWeekYear();case"wo":return n.ordinal(e.week(),"W");case"w":case"ww":return i.s(e.week(),"w"===t?1:2,"0");case"W":case"WW":return i.s(e.isoWeek(),"W"===t?1:2,"0");case"k":case"kk":return i.s(String(0===e.$H?24:e.$H),"k"===t?1:2,"0");case"X":return Math.floor(e.$d.getTime()/1e3);case"x":return e.$d.getTime();case"z":return"["+e.offsetName()+"]";case"zzz":return"["+e.offsetName("long")+"]";default:return t}});return r.bind(this)(o)}}},t.exports=e()},78773:function(t,e,n){"use strict";var r=n(20516),i=n.n(r),o=n(35944),s=function(t){var e=t.onClick,n=t.disabled,r=t.type,s=t.displayType,a=t.size,u=t.className,c=t.children,d="bg-main group-hover:bg-opacity-80 transition-colors duration-1000";return(void 0===s?"normal":s)==="alert"&&(d="bg-red-800 group-hover:bg-red-700 transition-colors duration-1000"),(0,o.BX)("button",{type:void 0===r?"button":r,disabled:void 0!==n&&n,className:"\n        ".concat(u,"\n        ").concat(i().button,"\n        ").concat(i().button_bestia,"\n        ").concat("sm"===a?"px-1":"px-8","\n\n        min-w-16 py-2 \n        whitespace-nowrap nowrap\n        border border-transparent rounded-md\n        text-sm\n        group\n        disabled bg-main text-white\n        focus:bg-opacity-50 focus:outline-none \n        active:bg-opacity-50 \n      "),onClick:e,children:[(0,o.tZ)("div",{className:"".concat(i().button__bg," ").concat(d)}),(0,o.tZ)("span",{className:i().button__span,children:c})]})};e.Z=s},46771:function(t,e,n){"use strict";n.d(e,{w:function(){return u}});var r=n(94225),i=n(13433),o=n(67814),s=n(35944);function a(t){var e=t.className,n=t.notice,i=t.children,a=function(){(0,r.dy)((0,r.dy)().filter(function(t){return t.id!==n.id}))};return(0,s.tZ)("div",{className:"min-h-60 w-full",children:(0,s.BX)("div",{className:"w-full rounded-2xl flex items-center border-l-20 border-main text-main-secondary py-4 px-6 mb-6 ".concat("bg-main bg-opacity-10"," ").concat(e),children:[(0,s.tZ)(o.G,{className:"h-6 mr-9 text-main",icon:{prefix:"fas",iconName:"file-pdf"}}),(0,s.tZ)("div",{className:"w-full",children:(null==n?void 0:n.content)||i}),(null==n?void 0:n.id)&&(0,s.tZ)("a",{className:"cursor-pointer",onClick:a,children:"Dismiss"})]})})}var u=function(){var t=(0,i.l)(r.dy);return(0,s.tZ)(s.HY,{children:t&&t.map(function(t,e){return(0,s.tZ)(a,{notice:t},e)})})}},5309:function(t,e,n){"use strict";n.d(e,{Hq:function(){return u},IP:function(){return d},OW:function(){return c}});var r,i,o,s=n(71383),a=n(17283),u=(0,a.Ps)(r||(r=(0,s.Z)(["\n  fragment GroupFragment on Group {\n    createdAt\n    id\n    name\n    updatedAt\n    users {\n      totalCount\n      edges {\n        node {\n          id\n        }\n      }\n    }\n    image {\n      location\n      id\n      altText\n      properties\n      title\n    }\n    enrolledCourses {\n      totalCount\n      edges {\n        node {\n          id\n        }\n      }\n    }\n    assignedResources {\n      totalCount\n      edges {\n        node {\n          id\n        }\n      }\n    }\n    assignedCourses {\n      totalCount\n      edges {\n        node {\n          id\n        }\n      }\n    }\n    _deleted @client\n  }\n"]))),c=(0,a.Ps)(i||(i=(0,s.Z)(["\n  query GetGroup($id: ID!) {\n    group(id: $id) {\n      ...GroupFragment\n    }\n  }\n  ","\n"])),u),d=(0,a.Ps)(o||(o=(0,s.Z)(["\n  query GetGroups {\n    groups {\n      edges {\n        node {\n          ...GroupFragment\n        }\n      }\n    }\n  }\n  ","\n"])),u)},40350:function(t,e,n){"use strict";var r=n(67294),i=n(94225);e.Z=function(t){(0,r.useEffect)(function(){(0,i.jL)(t)},[t])}},75375:function(t,e,n){"use strict";var r=n(50029),i=n(87794),o=n.n(i),s=n(50196),a=n(67294),u=function(){var t,e=(0,a.useState)(""),n=e[0],i=e[1];return(0,a.useEffect)(function(){i(localStorage.getItem("token"))},[]),{sendInvite:(0,a.useCallback)((t=(0,r.Z)(o().mark(function t(e){return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.ZP.request({method:"post",url:"/api/v1/users/send_invitation",headers:{Authorization:"Bearer ".concat(n)},data:{user_ids:e}}).then(function(t){console.log("then...."),console.log(t)});case 2:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}),[n])}};e.Z=u},73512:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return W}});var r,i=n(40350),o=n(59499),s=n(71641),a=n(67294),u=n(5564),c=n(5309),d=n(97698),l=n(70442),f=n(27484),h=n.n(f),p=n(95815),g=n(17674),m=n(50319),v=n(71383),y=(0,n(17283).Ps)(r||(r=(0,v.Z)(["\n  mutation DeleteGroup(\n    $id: ID!\n  ) {\n    deleteGroup(\n      id: $id\n    ) {\n      group {\n        id\n        _deleted @client\n      }\n      message\n    }\n  }\n"])));function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach(function(e){(0,o.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var w=function(){var t=(0,m.D)(y),e=(0,g.Z)(t,2),n=e[0];return e[1],{deleteGroup:function(t){n({variables:{id:t},optimisticResponse:{__typename:"Mutation",deleteGroup:{__typename:"DeleteGroupPayload",group:{id:t,_deleted:!0},message:""}},update:function(e,n){n.data;var r=e.readFragment({id:"Group:".concat(t),fragment:c.Hq});r&&e.writeFragment({id:"Group:".concat(t),fragment:c.Hq,data:$($({},r),{},{_deleted:!0})})}})}}},_=n(9023),D=n(96420),O=n(75375),M=n(78773),Z=n(35944),S=function(t){var e=t.group,n=(0,O.Z)().sendInvite,r=(0,a.useContext)(p.t).closeModal,i=function(){n(e.users.edges.map(function(t){return t.node.id})),r()};return(0,Z.BX)(Z.HY,{children:[(0,Z.BX)("p",{children:["This will send an invite to all of ",(0,Z.tZ)("span",{className:"font-bold",children:e.name}),"'s inactive users."]}),(0,Z.tZ)("p",{className:"font-bold mb-2",children:"This action cannot be undone."}),(0,Z.tZ)(M.Z,{onClick:i,children:"Send invites"})]})},C=function(t){var e=t.group,n=(null==e?void 0:e.id)&&"".concat("/admin/users/groups/edit","?id=").concat(e.id),r=w().deleteGroup,i=(0,_.Z)({type:"group",name:e.title,onConfirm:function(){return r(e.id)}}).confirmDelete,o=(0,a.useContext)(p.t).handleModal,s=[{label:"Edit group",href:n,capability:"UpdateGroup"},{label:"Send user invites",onClick:function(){o({title:"Send invites to group",content:(0,Z.tZ)(S,{group:e})})}},{label:(0,Z.tZ)("span",{className:"text-red-500",children:"Delete group"}),onClick:i,capability:"DeleteGroup"}];return(0,Z.tZ)(D.Z,{menuItems:s,buttonText:"Actions"})};function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var k=n(28734);h().extend(k);var N=function(){var t=(0,s.a)(c.IP),e=(t.loading,t.error,t.data),n=(0,a.useMemo)(function(){var t,n;return(null==e?void 0:null===(t=e.groups)||void 0===t?void 0:null===(n=t.edges)||void 0===n?void 0:n.map(function(t){return t.node}).filter(function(t){return!t._deleted}))||[]},[e]),r=(0,a.useMemo)(function(){return[{header:"Group Name",accessorKey:"name",cell:function(t){var e=t.cell,n=e.row.original.users.totalCount,r={image:e.row.original.image,title:e.getValue(),icon:(0,Z.tZ)(d.Y,{className:"hidden w-auto h-full bg-grey-500 text-main-secondary text-opacity-80"}),secondary:"".concat(n," user").concat(1!==n?"s":""),href:e.row.original.id&&"".concat("/admin/users/groups/edit","?id=").concat(e.row.original.id)};return(0,Z.tZ)(l.Z,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach(function(e){(0,o.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},r))}},{header:"Date Created",accessorKey:"createdAt",cell:function(t){var e=t.cell;return h()(e.getValue()).format("Do MMMM YYYY [at] h:mm A")}},{header:"Enrolled Courses",accessorFn:function(t){var e;return null===(e=t.enrolledCourses)||void 0===e?void 0:e.totalCount}},{header:"Assigned Resources",accessorFn:function(t){var e;return null===(e=t.assignedResources)||void 0===e?void 0:e.totalCount}},{width:300,header:"Actions",accessorKey:"actions",cell:function(t){var e=t.cell;return(0,Z.tZ)(C,{group:e.row.original})}}]},[]);return(0,Z.tZ)(u.Z,{tableData:n,tableCols:r,options:{selectable:!1}})},G=n(46771),Y=n(11163),j=n(26373),P=n(24545),H=function(){return(0,Z.BX)(Z.HY,{children:[(0,Z.tZ)("span",{className:"hidden lg:block",children:"Create new group"}),(0,Z.tZ)("span",{className:"block lg:hidden",children:(0,Z.tZ)(j.m,{width:"20"})})]})},T=function(){return(0,i.Z)({title:"Groups"}),(0,Y.useRouter)(),(0,P.Z)([[(0,Z.tZ)(H,{}),"/admin/users/groups/add"]]),(0,Z.BX)(Z.HY,{children:[(0,Z.tZ)(G.w,{}),(0,Z.tZ)(N,{})]})};T.capabilities=["UpdateGroup"],T.navState={topLevel:"users",secondary:"groups"};var W=T},34703:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users/groups",function(){return n(73512)}])},20516:function(t){t.exports={button:"Button_button__RRrLU",button_bestia:"Button_button_bestia__QRXEX",button__bg:"Button_button__bg__EuarU",button__span:"Button_button__span__Tcje3"}}},function(t){t.O(0,[6644,744,9774,2888,179],function(){return t(t.s=34703)}),_N_E=t.O()}]);