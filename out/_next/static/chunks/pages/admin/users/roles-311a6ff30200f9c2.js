(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1149],{26373:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var r=n(87462),o=n(67294),i=n(54142),a=o.forwardRef(function(e,t){return o.createElement(i.r,(0,r.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 28 28"},e,{ref:t}),o.createElement("path",{d:"M24 13h-9V4a1 1 0 1 0-2 0v9H4a1 1 0 1 0 0 2h9v9a1 1 0 1 0 2 0v-9h9a1 1 0 1 0 0-2z"}))});a.displayName="Add"},57389:function(e,t,n){"use strict";var r=n(41664),o=n.n(r),i=n(20516),a=n.n(i),l=n(35944),c=function(e){var t,n=e.target,r=e.href,i=e.displayType,c=e.children,s=e.className,d=e.onClick;switch(void 0===i?"normal":i){case"cancel":t="bg-gray-200 group-hover:bg-gray-700 transition-colors duration-1000",a().button_grey;break;case"alert":t="bg-red-800 group-hover:bg-red-700 transition-colors duration-1000";break;default:t="bg-main group-hover:bg-opacity-80 transition-colors duration-1000",a().button}return(0,l.BX)(o(),{href:r,onClick:d,target:n,className:"\n      ".concat(s,"\n      ").concat(a().button,"\n      ").concat(a().button_bestia,"\n      min-w-16 py-2 px-8\n      whitespace-nowrap nowrap\n      border border-transparent rounded-md\n      text-sm\n      bg-main text-white\n      focus:bg-opacity-50 focus:outline-none \n      active:bg-opacity-50 \n    "),children:[(0,l.tZ)("div",{className:"".concat(a().button__bg," ").concat(t)}),(0,l.tZ)("span",{className:a().button__span,children:c})]})};t.Z=c},64202:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(90116),o=n(25440),i=n.n(o),a=n(35944);function l(e){var t=e.text,n=e.className;return(0,a.BX)("div",{className:"".concat(n," display flex-col text-center text-main-secondary mx-auto"),children:[t,(0,a.tZ)("div",{className:i().loadingCubeGrid,children:(0,r.Z)(Array(9)).map(function(e,t){return(0,a.tZ)("div",{className:"".concat(i().loadingCube," ").concat(i().loadingCube1," ").concat(i()["loadingCube".concat(t+1)]," bg-main-secondary")},t)})})]})}},96420:function(e,t,n){"use strict";var r=n(35064),o=n(57349),i=n(71674),a=n(16294),l=n(35944),c=function(e){var t=e.menuItems,n=e.buttonText,c=e.align,s=(0,i.Z)().userHasCapability,d=!t.filter(function(e){return!e.capability||s(e.capability)}).length,u=(0,l.BX)(r.v.Button,{disabled:d,className:"inline-flex justify-center rounded-md border border-gray-300 ".concat(d?"bg-gray-300 text-gray-400":"bg-white text-main-secondary"," bg-white px-4 py-2 text-sm font-medium shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-main focus:ring-offset-2 focus:ring-offset-gray-100"),children:[void 0===n?"Actions":n,(0,l.tZ)(o.Z,{className:"-mr-1 ml-2 h-5 w-5","aria-hidden":"true"})]});return(0,l.tZ)(a.Z,{align:void 0===c?"right":c,menuItems:t,button:u})};t.Z=c},5564:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(90116),o=n(74094),i=n(27060),a=n(67294),l=n(96420),c=n(35944),s=function(e){var t=e.bulkActions;return(0,c.tZ)(l.Z,{align:"left",menuItems:t,buttonText:"Bulk actions"})},d=n(59499),u=n(4730),g=["indeterminate","className"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var m=function(e){var t=e.indeterminate,n=e.className,r=(0,u.Z)(e,g),o=(0,a.useRef)(null);return(0,a.useEffect)(function(){"boolean"==typeof t&&(o.current.indeterminate=!r.checked&&t)},[o,t]),(0,c.tZ)("input",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,d.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({type:"checkbox",ref:o,className:(void 0===n?"":n)+" cursor-pointer h-4 w-4 rounded border-gray-300 text-main focus:ring-main"},r))},b=n(57815),p=function(e){var t=e.tableData,n=e.tableCols,l=(e.options,e.bulkActions),d=void 0===l?[]:l,u=e.onRowSelect,g=void 0===u?function(e){return null}:u,f=(0,a.useState)([]),p=f[0],h=f[1],y=(0,a.useState)("");y[0],y[1];var v=(0,a.useState)({}),w=v[0],Z=v[1],_=!!d.length,C=function(e){Z(e)};(0,a.useEffect)(function(){g(x.getSelectedRowModel().flatRows.map(function(e){return e.original.id}))},[w]);var O=[].concat((0,r.Z)(_?[{id:"select",header:function(e){var t=e.table;return(0,c.tZ)(m,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler()})},cell:function(e){var t=e.row;return(0,c.tZ)(m,{checked:t.getIsSelected(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler()})}}]:[]),(0,r.Z)(n)),x=(0,o.b7)({state:{sorting:p,rowSelection:w},columns:O,data:t,onSortingChange:h,onRowSelectionChange:C,getCoreRowModel:(0,i.sC)(),getSortedRowModel:(0,i.tj)(),getFilteredRowModel:(0,i.vL)()});return(0,c.BX)(c.HY,{children:[(0,c.tZ)("div",{className:"mb-2",children:!!d.length&&(0,c.tZ)(s,{bulkActions:d})}),(0,c.tZ)(b.Z,{table:x,selectable:_})]})}},57815:function(e,t,n){"use strict";var r=n(59499),o=n(74094),i=n(16246),a=n(35944);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s=function(e){var t=e.table,n=e.selectable;return(0,a.tZ)("div",{className:"flex flex-col",children:(0,a.tZ)("div",{className:"-my-2 overflow-y-visible sm:-mx-6 lg:-mx-8",children:(0,a.tZ)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,a.tZ)("div",{className:"shadow overflow-y-visible border-b border-gray-200 sm:rounded-lg",children:(0,a.BX)("table",{className:"min-w-full divide-y divide-gray-200 bg-white",children:[(0,a.tZ)("thead",{className:"bg-gray-50",children:t.getHeaderGroups().map(function(e){return(0,a.tZ)("tr",{children:e.headers.map(function(e,t){var r,l;return(0,a.BX)("th",{colSpan:e.colSpan,className:"px-6 py-3 text-left h-11 text-xs font-medium max-w-max text-gray-500 uppercase tracking-wider",style:c({textAlign:t>(n?1:0)?"center":"left"},(null===(r=e.column.columnDef)||void 0===r?void 0:r.id)==="select"?{paddingRight:0,width:"16px"}:{}),children:[" ",e.isPlaceholder?null:(0,a.tZ)("div",{className:"inline-block",children:(0,a.BX)("div",{className:"".concat(e.column.getCanSort()?"cursor-pointer select-none":""," flex space-x-2 max-w-max items-center justify-center"),onClick:e.column.getToggleSortingHandler(),children:[(0,a.tZ)("div",{children:(0,o.ie)(e.column.columnDef.header,e.getContext())}),e.column.getIsSorted()&&(0,a.tZ)("div",{className:"w-4 h-4 flex items-center",children:null!==(l=({asc:(0,a.tZ)(i.U,{className:"w-full"}),desc:(0,a.tZ)(i.U,{className:"rotate-180"})})[e.column.getIsSorted()])&&void 0!==l?l:null})]})})]},e.id)})},e.id)})}),(0,a.tZ)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.getRowModel().rows.map(function(e){return(0,a.tZ)("tr",{children:e.getVisibleCells().map(function(e,t){var r;return(0,a.tZ)("td",{className:"".concat(t>(n?1:0)?"text-center":""," px-6 py-4 text-sm text-gray-900"),style:c({},(null===(r=e.column.columnDef)||void 0===r?void 0:r.id)==="select"?{paddingRight:0,width:"16px"}:{}),children:(0,o.ie)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})})})})})};t.Z=s},73759:function(e,t,n){"use strict";var r=n(71641),o=n(26815);t.Z=function(){var e=(0,r.a)(o.Qi),t=e.loading,n=e.error,i=e.data;return{roles:(i=void 0===i?{}:i).roles,loading:t,error:n}}},80804:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var r,o,i=n(67294),a=n(40350),l=n(24545),c=n(95815),s=n(59499),d=n(17674),u=n(50319),g=n(71383),f=n(17283),m=n(26815),b=(0,f.Ps)(r||(r=(0,g.Z)(["\n  mutation CreateRole(\n    $name: String!,\n    $roleType: String!,\n    $capabilityIds: [ID!]\n  ) {\n    createRole(\n      input: {\n        name: $name,\n        roleType: $roleType,\n        capabilityIds: $capabilityIds\n      }\n    ) {\n      role {\n        ...RoleFragment\n      }\n      message\n    }\n  }\n  ","\n"])),m.o3);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(){var e=(0,u.D)(b,{refetchQueries:[m.Qi]}),t=(0,d.Z)(e,2),n=t[0];return t[1],{createRole:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n({variables:h({},e),optimisticResponse:{createRole:{__typename:"CreateRolePayload",role:h({__typename:"Role",id:"tmp-".concat(Math.floor(1e4*Math.random())),capabilities:[]},e),message:""}},onCompleted:t}).catch(function(e){})}}},v=n(63493),w=n(24249),Z=n(35944),_=function(e){e.type;var t=(0,w.t)(),n=(0,i.useContext)(c.t).closeModal,r=y().createRole,o=(0,i.useCallback)(function(e){r(e),t.push("/admin/users/roles"),n()},[]);return(0,Z.tZ)(Z.HY,{children:(0,Z.tZ)(v.Z,{onSubmit:o})})},C=n(5564),O=n(57389),x=n(41664),S=n.n(x),N=function(e){var t=e.cell,n=t.row.original.id&&"/admin/users/roles/edit?id=".concat(t.row.original.id);return(0,Z.tZ)(Z.HY,{children:(0,Z.tZ)(S(),{href:n,className:"mt-auto text-center p-2 text-main-secondary font-semibold",children:t.getValue()})})},j=n(73759),R=(0,f.Ps)(o||(o=(0,g.Z)(["\n  mutation DeleteRole(\n    $id: ID!\n  ) {\n    deleteRole(\n      id: $id\n    ) {\n      role {\n        id\n        _deleted @client\n      }\n      message\n    }\n  }\n"]))),P=function(){var e=(0,u.D)(R,{refetchQueries:[m.Qi]}),t=(0,d.Z)(e,2),n=t[0];return t[1],{deleteRole:function(e){n({variables:{id:e},optimisticResponse:{__typename:"Mutation",deleteRole:{__typename:"DeleteRolePayload",role:{id:e,_deleted:!0},message:""}}})}}},D=n(64202),k=function(){var e=(0,j.Z)(),t=e.roles,n=e.loading,r=e.error;P().deleteRole;var o=(0,i.useMemo)(function(){return(null==t?void 0:t.filter(function(e){return!e._deleted&&"content_item_role"!==e.roleType&&"User"!==e.name}))||[]},[t]),a=(0,i.useMemo)(function(){return[{header:"Role Name",accessorKey:"name",cell:N},{header:"Role Type",accessorKey:"roleType",cell:function(e){return({tenant_role:"Global Role",group_role:"Group Role"})[e.cell.getValue()]||""}},{width:300,header:"Actions",accessorKey:"actions",cell:function(e){var t=e.cell,n=t.row.original.id&&"".concat("/admin/users/roles/edit","?id=").concat(t.row.original.id);return(0,Z.tZ)("div",{className:"flex space-x-4 justify-center",children:(0,Z.tZ)(O.Z,{href:n,children:"Edit"})})}}]},[]);return(0,Z.BX)(Z.HY,{children:[n&&(0,Z.tZ)(D.Z,{}),r&&(0,Z.tZ)("p",{children:"Unable to fetch roles."}),!n&&!r&&(0,Z.tZ)(C.Z,{tableData:o,tableCols:a})]})},E=n(26373),T=function(){return(0,Z.BX)(Z.HY,{children:[(0,Z.tZ)("span",{className:"hidden lg:block",children:"Create new role"}),(0,Z.tZ)("span",{className:"block lg:hidden",children:(0,Z.tZ)(E.m,{width:"20"})})]})},A=function(){(0,a.Z)({title:"User Roles"});var e=(0,i.useContext)(c.t).handleModal,t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e({title:"Add a new role",size:"lg",content:(0,Z.tZ)(_,{type:t})})};return(0,l.Z)([[(0,Z.tZ)(T,{}),function(){return t()}]]),(0,Z.tZ)(Z.HY,{children:(0,Z.tZ)(k,{})})};A.navState={topLevel:"users",secondary:"roles"};var I=A},20597:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users/roles",function(){return n(80804)}])},25440:function(e){e.exports={loadingCubeGrid:"LoadingSpinner_loadingCubeGrid__9Okru",loadingCube:"LoadingSpinner_loadingCube__WnqWw",loadingCubeGridScaleDelay:"LoadingSpinner_loadingCubeGridScaleDelay__S4rcT",loadingCube1:"LoadingSpinner_loadingCube1__9Xdf3",loadingCube2:"LoadingSpinner_loadingCube2__9hDGq",loadingCube3:"LoadingSpinner_loadingCube3__pmAJ5",loadingCube4:"LoadingSpinner_loadingCube4__QGZuW",loadingCube5:"LoadingSpinner_loadingCube5__vJpHG",loadingCube6:"LoadingSpinner_loadingCube6__3tWSf",loadingCube7:"LoadingSpinner_loadingCube7__PBJGj",loadingCube8:"LoadingSpinner_loadingCube8__mJD7v",loadingCube9:"LoadingSpinner_loadingCube9__oiwQt"}}},function(e){e.O(0,[9299,6644,3538,8e3,9774,2888,179],function(){return e(e.s=20597)}),_N_E=e.O()}]);