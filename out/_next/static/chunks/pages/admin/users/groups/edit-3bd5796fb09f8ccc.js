(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89],{39316:function(e,n,t){"use strict";t.d(n,{x:function(){return i}});var r=t(87462),o=t(67294),a=t(54142),i=o.forwardRef(function(e,n){return o.createElement(a.r,(0,r.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),o.createElement("path",{d:"M21 11H6.414l5.293-5.293-1.414-1.414L2.586 12l7.707 7.707 1.414-1.414L6.414 13H21z"}))});i.displayName="ArrowBack"},78773:function(e,n,t){"use strict";var r=t(20516),o=t.n(r),a=t(35944),i=function(e){var n=e.onClick,t=e.disabled,r=e.type,i=e.displayType,u=e.size,s=e.className,c=e.children,l="bg-main group-hover:bg-opacity-80 transition-colors duration-1000";return(void 0===i?"normal":i)==="alert"&&(l="bg-red-800 group-hover:bg-red-700 transition-colors duration-1000"),(0,a.BX)("button",{type:void 0===r?"button":r,disabled:void 0!==t&&t,className:"\n        ".concat(s,"\n        ").concat(o().button,"\n        ").concat(o().button_bestia,"\n        ").concat("sm"===u?"px-1":"px-8","\n\n        min-w-16 py-2 \n        whitespace-nowrap nowrap\n        border border-transparent rounded-md\n        text-sm\n        group\n        disabled bg-main text-white\n        focus:bg-opacity-50 focus:outline-none \n        active:bg-opacity-50 \n      "),onClick:n,children:[(0,a.tZ)("div",{className:"".concat(o().button__bg," ").concat(l)}),(0,a.tZ)("span",{className:o().button__span,children:c})]})};n.Z=i},66631:function(e,n,t){"use strict";var r=t(59499),o=t(4730),a=t(87536),i=t(99273),u=t(70990),s=t(26316),c=t(13873),l=t(9310),d=t.n(l);t(95833);var p=t(23239),f=t.n(p),b=t(35944),g=["control","name","label"];function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var m=function(e){var n=e.control,t=e.name,l=e.label,p=(0,o.Z)(e,g),m=(0,a.bc)({control:n,name:t}).field,y=function(e){m.onChange(e)};return(0,b.BX)("div",{children:[l&&(0,b.tZ)("label",{className:"block",children:(0,b.tZ)("span",{className:"text-sm font-medium text-gray-700",children:l})}),(0,b.tZ)(d(),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({selected:m.value,className:f().DualInput,onChange:y,showHeaderLabels:!0,canFilter:!0,icons:{moveLeft:(0,b.tZ)(i.s,{className:"h-5"}),moveAllLeft:(0,b.tZ)(u.$,{className:"h-5"}),moveRight:(0,b.tZ)(s._,{className:"h-5"}),moveAllRight:(0,b.tZ)(c.B,{className:"h-5"})}},p))]})};n.Z=m},53635:function(e,n,t){"use strict";var r=t(55103),o=t(66631),a=t(35944),i=function(e){var n,t=e.control,i=(0,r.Z)().courses,u=null==i?void 0:null===(n=i.edges)||void 0===n?void 0:n.map(function(e){var n=e.node;return{value:n.id,label:n.title}});return(0,a.tZ)(a.HY,{children:i&&(0,a.tZ)(o.Z,{label:"Assigned courses",control:t,name:"assignedCourseIds",options:u,lang:{availableHeader:"Available courses",selectedHeader:"Selected courses"}})})};n.Z=i},98222:function(e,n,t){"use strict";var r=t(68624),o=t(66631),a=t(35944),i=function(e){var n,t=e.control,i=(0,r.Z)().resources,u=null==i?void 0:null===(n=i.edges)||void 0===n?void 0:n.map(function(e){var n=e.node;return{value:n.id,label:n.title}});return(0,a.tZ)(a.HY,{children:i&&(0,a.tZ)(o.Z,{label:"Assigned resources",control:t,name:"assignedResourceIds",options:u,lang:{availableHeader:"Available resources",selectedHeader:"Selected resources"}})})};n.Z=i},28867:function(e,n,t){"use strict";var r=t(3130),o=t(66631),a=t(35944),i=function(e){var n,t=e.control,i=(0,r.Z)().users,u=null==i?void 0:null===(n=i.edges)||void 0===n?void 0:n.map(function(e){var n=e.node;return{value:n.id,label:n.fullName}});return(0,a.tZ)(a.HY,{children:u&&(0,a.tZ)(o.Z,{label:"Group users",control:t,name:"userIds",options:u,lang:{availableHeader:"Available users",selectedHeader:"Selected users"}})})};n.Z=i},5309:function(e,n,t){"use strict";t.d(n,{Hq:function(){return s},IP:function(){return l},OW:function(){return c}});var r,o,a,i=t(71383),u=t(17283),s=(0,u.Ps)(r||(r=(0,i.Z)(["\n  fragment GroupFragment on Group {\n    createdAt\n    id\n    name\n    updatedAt\n    users {\n      totalCount\n      edges {\n        node {\n          id\n        }\n      }\n    }\n    image {\n      location\n      id\n      altText\n      properties\n      title\n    }\n    enrolledCourses {\n      totalCount\n      edges {\n        node {\n          id\n        }\n      }\n    }\n    assignedResources {\n      totalCount\n      edges {\n        node {\n          id\n        }\n      }\n    }\n    assignedCourses {\n      totalCount\n      edges {\n        node {\n          id\n        }\n      }\n    }\n    _deleted @client\n  }\n"]))),c=(0,u.Ps)(o||(o=(0,i.Z)(["\n  query GetGroup($id: ID!) {\n    group(id: $id) {\n      ...GroupFragment\n    }\n  }\n  ","\n"])),s),l=(0,u.Ps)(a||(a=(0,i.Z)(["\n  query GetGroups {\n    groups {\n      edges {\n        node {\n          ...GroupFragment\n        }\n      }\n    }\n  }\n  ","\n"])),s)},55103:function(e,n,t){"use strict";var r=t(22345),o=t(71641);n.Z=function(){var e=(0,o.a)(r.Pb),n=e.loading,t=e.error,a=e.data;return{courses:(a=void 0===a?{}:a).courses,loading:n,error:t}}},68624:function(e,n,t){"use strict";var r=t(22345),o=t(71641);n.Z=function(){var e=(0,o.a)(r.Yu),n=e.loading,t=e.error,a=e.data;return{resources:(a=void 0===a?{}:a).resources,loading:n,error:t}}},24545:function(e,n,t){"use strict";var r=t(11163),o=t(67294),a=t(78773),i=t(94225),u=t(35944),s=function(e){var n=(0,r.useRouter)();(0,o.useEffect)(function(){(0,i.ac)((0,u.tZ)("div",{className:"space-x-2 flex items-center",children:e.map(function(e,t){return(0,u.tZ)(a.Z,{onClick:function(){"function"==typeof e[1]?e[1]():n.push(e[1])},children:e[0]},t)})}))},[])};n.Z=s},40350:function(e,n,t){"use strict";var r=t(67294),o=t(94225);n.Z=function(e){(0,r.useEffect)(function(){(0,o.jL)(e)},[e])}},3130:function(e,n,t){"use strict";var r=t(50051),o=t(71641);n.Z=function(){var e=(0,o.a)(r.fo),n=e.loading,t=e.error,a=e.data;return{users:(a=void 0===a?{}:a).users,loading:n,error:t,refetchUsers:e.refetch}}},7637:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return A}});var r,o=t(90116),a=t(59499),i=t(78773),u=t(87536),s=t(97088),c=t(28867),l=t(11163),d=t(67294),p=t(17674),f=t(71383),b=t(17283),g=t(5309),v=(0,b.Ps)(r||(r=(0,f.Z)(["\n  mutation UpdateGroup(\n    $id: ID!\n    $name: String,\n    $parentId: ID,\n    $imageId: ID,\n    $assignedContentIds: [ID!],\n    $enrolledContentIds: [ID!],\n    $userIds: [ID!]\n  ) {\n    updateGroup(\n      input: {\n        name: $name,\n        id: $id,\n        imageId: $imageId,\n        parentId: $parentId,\n        assignedContentIds: $assignedContentIds,\n        enrolledContentIds: $enrolledContentIds,\n        userIds: $userIds\n      }\n    ) {\n      group {\n      ...GroupFragment\n      }\n    }\n  }\n  ","\n"])),g.Hq),m=t(71641),y=t(50319);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach(function(n){(0,a.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(0,m.a)(g.OW,{variables:{id:e}}),t=n.loading,r=n.error,o=n.data,a=(o=void 0===o?{}:o).group,i=(0,y.D)(v),u=(0,p.Z)(i,2),s=u[0];u[1];var c=function(n){var t=h({},n);s({variables:h({id:e},t),optimisticResponse:{updateGroup:{__typename:"UpdateGroupPayload",group:h(h({},a),t)}}}).catch(function(e){})};return{group:a,loading:t,error:r,updateGroup:c}},j=t(98222),w=t(53635),P=t(35944);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach(function(n){(0,a.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var C=function(e){var n=e.group,t=(null==n?void 0:n.users.edges.map(function(e){return e.node}))||[],r=(0,u.cI)({defaultValues:I(I({},n),{},{userIds:t.map(function(e){return e.id}),assignedCourseIds:(null==n?void 0:n.assignedCourses.edges.map(function(e){return e.node.id}))||[],assignedResourceIds:(null==n?void 0:n.assignedResources.edges.map(function(e){return e.node.id}))||[]})}),a=r.register,p=r.watch,f=r.handleSubmit,b=r.control,g=r.setFocus;(0,d.useEffect)(function(){g("name")},[]);var v=(0,l.useRouter)(),m=Z(n.id).updateGroup,y=(0,d.useCallback)(function(e){var t=I(I({},e),{},{assignedContentIds:[].concat((0,o.Z)(e.assignedCourseIds),(0,o.Z)(e.assignedResourceIds))});n&&m(t),v.push("/admin/users/groups")},[n]);return p(),(0,P.BX)("form",{className:"h-full w-full max-w-3xl flex flex-col space-y-4",onSubmit:f(y),children:[(0,P.tZ)(s.Z,{label:"Group name",placeholder:"Group name",inputAttrs:a("name",{maxLength:20})}),(0,P.tZ)(c.Z,{control:b}),(0,P.tZ)("p",{children:(0,P.tZ)("a",{className:"text-main cursor-pointer",onClick:function(){return console.log("inviteUsers")},children:"Send invitation to all users"})}),(0,P.tZ)(w.Z,{control:b}),(0,P.tZ)(j.Z,{control:b}),(0,P.tZ)(i.Z,{type:"submit",children:n?"Save changes":"Create group"})]})},D=t(24249),x=t(40350),S=function(e){var n=(0,m.a)(g.OW,{variables:{id:e}}),t=n.loading,r=n.error,o=n.data;return{group:(o=void 0===o?{}:o).group,loading:t,error:r}},E=t(39316),N=t(24545),G=function(){return(0,P.BX)(P.HY,{children:[(0,P.tZ)("span",{className:"hidden lg:block",children:"Back to groups list"}),(0,P.tZ)("span",{className:"block lg:hidden",children:(0,P.tZ)(E.x,{width:"20"})})]})},k=function(){var e=S((0,D.t)().query.id).group;return(0,N.Z)([[(0,P.tZ)(G,{}),"/admin/users/groups"]]),(0,x.Z)({title:"Edit group: ".concat(null==e?void 0:e.name)}),(0,P.tZ)(P.HY,{children:e&&(0,P.tZ)(C,{group:e})})};k.capabilities=["UpdateGroup"],k.navState={topLevel:"users",secondary:"groups"};var A=k},24249:function(e,n,t){"use strict";t.d(n,{t:function(){return d}});var r=t(59499),o=t(17674),a=t(83618);t(67294);var i=t(11163);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var l=function(e){var n,t=e.split("?"),r=(0,a.Z)(t).slice(1).join("?"),i={},u=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return c(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,n)}}(e))){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(u)throw a}}}}(new URLSearchParams(r).entries());try{for(u.s();!(n=u.n()).done;){var s=(0,o.Z)(n.value,2),l=s[0],d=s[1];i[l]=d}}catch(p){u.e(p)}finally{u.f()}return i},d=function(){var e=(0,i.useRouter)();return e.query=s(s({},l(e.asPath)),e.query),e}},65827:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users/groups/edit",function(){return t(7637)}])},20516:function(e){e.exports={button:"Button_button__RRrLU",button_bestia:"Button_button_bestia__QRXEX",button__bg:"Button_button__bg__EuarU",button__span:"Button_button__span__Tcje3"}},23239:function(e){e.exports={DualInput:"DualListBoxInput_DualInput__PER2G"}},4730:function(e,n,t){"use strict";function r(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],!(n.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}t.d(n,{Z:function(){return r}})},83618:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(14666),o=t(28811),a=t(2937),i=t(14882);function u(e){return(0,r.Z)(e)||(0,o.Z)(e)||(0,a.Z)(e)||(0,i.Z)()}}},function(e){e.O(0,[3538,9774,2888,179],function(){return e(e.s=65827)}),_N_E=e.O()}]);