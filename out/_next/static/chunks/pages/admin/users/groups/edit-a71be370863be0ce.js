(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89],{39316:function(e,n,t){"use strict";t.d(n,{x:function(){return u}});var r=t(87462),o=t(67294),a=t(54142),u=o.forwardRef(function(e,n){return o.createElement(a.r,(0,r.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),o.createElement("path",{d:"M21 11H6.414l5.293-5.293-1.414-1.414L2.586 12l7.707 7.707 1.414-1.414L6.414 13H21z"}))});u.displayName="ArrowBack"},78773:function(e,n,t){"use strict";var r=t(20516),o=t.n(r),a=t(35944),u=function(e){var n=e.onClick,t=e.disabled,r=e.type,u=e.displayType,i=e.size,s=e.className,c=e.children,l="bg-main group-hover:bg-opacity-80 transition-colors duration-1000";return(void 0===u?"normal":u)==="alert"&&(l="bg-red-800 group-hover:bg-red-700 transition-colors duration-1000"),(0,a.BX)("button",{type:void 0===r?"button":r,disabled:void 0!==t&&t,className:"\n        ".concat(s,"\n        ").concat(o().button,"\n        ").concat(o().button_bestia,"\n        ").concat("sm"===i?"px-1":"px-8","\n\n        min-w-16 py-2 \n        whitespace-nowrap nowrap\n        border border-transparent rounded-md\n        text-sm\n        group\n        disabled bg-main text-white\n        focus:bg-opacity-50 focus:outline-none \n        active:bg-opacity-50 \n      "),onClick:n,children:[(0,a.tZ)("div",{className:"".concat(o().button__bg," ").concat(l)}),(0,a.tZ)("span",{className:o().button__span,children:c})]})};n.Z=u},66631:function(e,n,t){"use strict";var r=t(59499),o=t(4730),a=t(87536),u=t(99273),i=t(70990),s=t(26316),c=t(13873),l=t(9310),d=t.n(l);t(95833);var p=t(23239),f=t.n(p),b=t(35944),g=["control","name","label"];function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var m=function(e){var n=e.control,t=e.name,l=e.label,p=(0,o.Z)(e,g),m=(0,a.bc)({control:n,name:t}).field,y=function(e){m.onChange(e)};return(0,b.BX)("div",{children:[l&&(0,b.tZ)("label",{className:"block",children:(0,b.tZ)("span",{className:"text-sm font-medium text-gray-700",children:l})}),(0,b.tZ)(d(),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({selected:m.value,className:f().DualInput,onChange:y,showHeaderLabels:!0,canFilter:!0,icons:{moveLeft:(0,b.tZ)(u.s,{className:"h-5"}),moveAllLeft:(0,b.tZ)(i.$,{className:"h-5"}),moveRight:(0,b.tZ)(s._,{className:"h-5"}),moveAllRight:(0,b.tZ)(c.B,{className:"h-5"})}},p))]})};n.Z=m},80135:function(e,n,t){"use strict";var r=t(55103),o=t(66631),a=t(35944),u=function(e){var n,t=e.control,u=(0,r.Z)().courses,i=null==u?void 0:null===(n=u.edges)||void 0===n?void 0:n.map(function(e){var n=e.node;return{value:n.id,label:n.title}});return(0,a.tZ)(a.HY,{children:u&&(0,a.tZ)(o.Z,{label:"Enrolled courses",control:t,name:"assignedCourseIds",options:i,lang:{availableHeader:"Available courses",selectedHeader:"Selected courses"}})})};n.Z=u},28867:function(e,n,t){"use strict";var r=t(3130),o=t(66631),a=t(35944),u=function(e){var n,t=e.control,u=(0,r.Z)().users,i=null==u?void 0:null===(n=u.edges)||void 0===n?void 0:n.map(function(e){var n=e.node;return{value:n.id,label:n.fullName}});return(0,a.tZ)(a.HY,{children:i&&(0,a.tZ)(o.Z,{label:"Group users",control:t,name:"userIds",options:i,lang:{availableHeader:"Available users",selectedHeader:"Selected users"}})})};n.Z=u},5309:function(e,n,t){"use strict";t.d(n,{Hq:function(){return s},IP:function(){return l},OW:function(){return c}});var r,o,a,u=t(71383),i=t(17283),s=(0,i.Ps)(r||(r=(0,u.Z)(["\n  fragment GroupFragment on Group {\n    createdAt\n    id\n    name\n    updatedAt\n    users {\n      totalCount\n      edges {\n        node {\n          id\n        }\n      }\n    }\n    image {\n      location\n      id\n      altText\n      properties\n      title\n    }\n    enrolledCourses {\n      totalCount\n      edges {\n        node {\n          id\n        }\n      }\n    }\n    assignedResources {\n      totalCount\n      edges {\n        node {\n          id\n        }\n      }\n    }\n    assignedCourses {\n      totalCount\n      edges {\n        node {\n          id\n        }\n      }\n    }\n    _deleted @client\n  }\n"]))),c=(0,i.Ps)(o||(o=(0,u.Z)(["\n  query GetGroup($id: ID!) {\n    group(id: $id) {\n      ...GroupFragment\n    }\n  }\n  ","\n"])),s),l=(0,i.Ps)(a||(a=(0,u.Z)(["\n  query GetGroups {\n    groups {\n      edges {\n        node {\n          ...GroupFragment\n        }\n      }\n    }\n  }\n  ","\n"])),s)},55103:function(e,n,t){"use strict";var r=t(22345),o=t(71641);n.Z=function(){var e=(0,o.a)(r.Pb),n=e.loading,t=e.error,a=e.data;return{courses:(a=void 0===a?{}:a).courses,loading:n,error:t}}},68624:function(e,n,t){"use strict";var r=t(22345),o=t(71641);n.Z=function(){var e=(0,o.a)(r.Yu),n=e.loading,t=e.error,a=e.data;return{resources:(a=void 0===a?{}:a).resources,loading:n,error:t}}},24545:function(e,n,t){"use strict";var r=t(11163),o=t(67294),a=t(78773),u=t(94225),i=t(35944),s=function(e){var n=(0,r.useRouter)();(0,o.useEffect)(function(){(0,u.ac)((0,i.tZ)("div",{className:"space-x-2 flex items-center",children:e.map(function(e,t){return(0,i.tZ)(a.Z,{onClick:function(){"function"==typeof e[1]?e[1]():n.push(e[1])},children:e[0]},t)})}))},[])};n.Z=s},40350:function(e,n,t){"use strict";var r=t(67294),o=t(94225);n.Z=function(e){(0,r.useEffect)(function(){(0,o.jL)(e)},[e])}},3130:function(e,n,t){"use strict";var r=t(50051),o=t(71641);n.Z=function(){var e=(0,o.a)(r.fo),n=e.loading,t=e.error,a=e.data;return{users:(a=void 0===a?{}:a).users,loading:n,error:t,refetchUsers:e.refetch}}},90044:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return R}});var r,o=t(90116),a=t(59499),u=t(78773),i=t(87536),s=t(97088),c=t(28867),l=t(11163),d=t(80135),p=t(67294),f=t(17674),b=t(71383),g=t(17283),v=t(5309),m=(0,g.Ps)(r||(r=(0,b.Z)(["\n  mutation UpdateGroup(\n    $id: ID!\n    $name: String,\n    $parentId: ID,\n    $imageId: ID,\n    $assignedContentIds: [ID!],\n    $enrolledContentIds: [ID!],\n    $userIds: [ID!]\n  ) {\n    updateGroup(\n      input: {\n        name: $name,\n        id: $id,\n        imageId: $imageId,\n        parentId: $parentId,\n        assignedContentIds: $assignedContentIds,\n        enrolledContentIds: $enrolledContentIds,\n        userIds: $userIds\n      }\n    ) {\n      group {\n      ...GroupFragment\n      }\n    }\n  }\n  ","\n"])),v.Hq),y=t(71641),O=t(50319);function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach(function(n){(0,a.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(0,y.a)(v.OW,{variables:{id:e}}),t=n.loading,r=n.error,o=n.data,a=(o=void 0===o?{}:o).group,u=(0,O.D)(m),i=(0,f.Z)(u,2),s=i[0];i[1];var c=function(n){var t=Z({},n);s({variables:Z({id:e},t),optimisticResponse:{updateGroup:{__typename:"UpdateGroupPayload",group:Z(Z({},a),t)}}}).catch(function(e){})};return{group:a,loading:t,error:r,updateGroup:c}},w=t(68624),P=t(66631),_=t(35944),I=function(e){var n,t=e.control,r=(0,w.Z)().resources,o=null==r?void 0:null===(n=r.edges)||void 0===n?void 0:n.map(function(e){var n=e.node;return{value:n.id,label:n.title}});return(0,_.tZ)(_.HY,{children:r&&(0,_.tZ)(P.Z,{label:"Assigned resources",control:t,name:"assignedResourceIds",options:o,lang:{availableHeader:"Available resources",selectedHeader:"Selected resources"}})})};function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach(function(n){(0,a.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var x=function(e){var n=e.group,t=(null==n?void 0:n.users.edges.map(function(e){return e.node}))||[],r=(0,i.cI)({defaultValues:D(D({},n),{},{userIds:t.map(function(e){return e.id}),assignedCourseIds:(null==n?void 0:n.assignedCourses.edges.map(function(e){return e.node.id}))||[],assignedResourceIds:(null==n?void 0:n.assignedResources.edges.map(function(e){return e.node.id}))||[]})}),a=r.register,f=r.watch,b=r.handleSubmit,g=r.control,v=r.setFocus;(0,p.useEffect)(function(){v("name")},[]);var m=(0,l.useRouter)(),y=j(n.id).updateGroup,O=(0,p.useCallback)(function(e){var t=D(D({},e),{},{enrolledContentIds:[].concat((0,o.Z)(e.assignedCourseIds),(0,o.Z)(e.assignedResourceIds))});n&&y(t),m.push("/admin/users/groups")},[n]);return f(),(0,_.BX)("form",{className:"h-full w-full max-w-3xl flex flex-col space-y-4",onSubmit:b(O),children:[(0,_.tZ)(s.Z,{label:"Group name",placeholder:"Group name",inputAttrs:a("name",{maxLength:20})}),(0,_.tZ)(c.Z,{control:g}),(0,_.tZ)("p",{children:(0,_.tZ)("a",{className:"text-main cursor-pointer",onClick:function(){return console.log("inviteUsers")},children:"Send invitation to all users"})}),(0,_.tZ)(d.Z,{control:g}),(0,_.tZ)(I,{control:g}),(0,_.tZ)(u.Z,{type:"submit",children:n?"Save changes":"Create group"})]})},E=t(24249),S=t(40350),N=function(e){var n=(0,y.a)(v.OW,{variables:{id:e}}),t=n.loading,r=n.error,o=n.data;return{group:(o=void 0===o?{}:o).group,loading:t,error:r}},k=t(39316),G=t(24545),A=function(){return(0,_.BX)(_.HY,{children:[(0,_.tZ)("span",{className:"hidden lg:block",children:"Back to groups list"}),(0,_.tZ)("span",{className:"block lg:hidden",children:(0,_.tZ)(k.x,{width:"20"})})]})},$=function(){var e=N((0,E.t)().query.id).group;return(0,G.Z)([[(0,_.tZ)(A,{}),"/admin/users/groups"]]),(0,S.Z)({title:"Edit group: ".concat(null==e?void 0:e.name)}),(0,_.tZ)(_.HY,{children:e&&(0,_.tZ)(x,{group:e})})};$.navState={topLevel:"users",secondary:"groups"};var R=$},24249:function(e,n,t){"use strict";t.d(n,{t:function(){return d}});var r=t(59499),o=t(17674),a=t(83618);t(67294);var u=t(11163);function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var l=function(e){var n,t=e.split("?"),r=(0,a.Z)(t).slice(1).join("?"),u={},i=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return c(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,n)}}(e))){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){i=!0,a=e},f:function(){try{u||null==t.return||t.return()}finally{if(i)throw a}}}}(new URLSearchParams(r).entries());try{for(i.s();!(n=i.n()).done;){var s=(0,o.Z)(n.value,2),l=s[0],d=s[1];u[l]=d}}catch(p){i.e(p)}finally{i.f()}return u},d=function(){var e=(0,u.useRouter)();return e.query=s(s({},l(e.asPath)),e.query),e}},65827:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users/groups/edit",function(){return t(90044)}])},20516:function(e){e.exports={button:"Button_button__RRrLU",button_bestia:"Button_button_bestia__QRXEX",button__bg:"Button_button__bg__EuarU",button__span:"Button_button__span__Tcje3"}},23239:function(e){e.exports={DualInput:"DualListBoxInput_DualInput__PER2G"}},4730:function(e,n,t){"use strict";function r(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],!(n.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}t.d(n,{Z:function(){return r}})},83618:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(14666),o=t(28811),a=t(2937),u=t(14882);function i(e){return(0,r.Z)(e)||(0,o.Z)(e)||(0,a.Z)(e)||(0,u.Z)()}}},function(e){e.O(0,[3538,9774,2888,179],function(){return e(e.s=65827)}),_N_E=e.O()}]);