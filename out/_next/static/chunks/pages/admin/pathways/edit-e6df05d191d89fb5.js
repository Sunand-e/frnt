(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7387],{78773:function(e,t,n){"use strict";var r=n(20516),o=n.n(r),i=n(35944),c=function(e){var t=e.onClick,n=e.disabled,r=e.type,c=e.displayType,a=e.size,l=e.className,u=e.children,s="bg-main group-hover:bg-opacity-80 transition-colors duration-1000";return(void 0===c?"normal":c)==="alert"&&(s="bg-red-800 group-hover:bg-red-700 transition-colors duration-1000"),(0,i.BX)("button",{type:void 0===r?"button":r,disabled:void 0!==n&&n,className:"\n        ".concat(l,"\n        ").concat(o().button,"\n        ").concat(o().button_bestia,"\n        ").concat("sm"===a?"px-1":"px-8","\n\n        min-w-16 py-2 \n        whitespace-nowrap nowrap\n        border border-transparent rounded-md\n        text-sm\n        group\n        disabled bg-main text-white\n        focus:bg-opacity-50 focus:outline-none \n        active:bg-opacity-50 \n      "),onClick:t,children:[(0,i.tZ)("div",{className:"".concat(o().button__bg," ").concat(s)}),(0,i.tZ)("span",{className:o().button__span,children:u})]})};t.Z=c},96420:function(e,t,n){"use strict";var r=n(35064),o=n(57349),i=n(71674),c=n(16294),a=n(35944),l=function(e){var t=e.menuItems,n=e.buttonText,l=e.align,u=(0,i.Z)().userHasCapability,s=!t.filter(function(e){return console.log("item.capability"),console.log(e.capability),!e.capability||u(e.capability)}).length,d=(0,a.BX)(r.v.Button,{disabled:s,className:"inline-flex justify-center rounded-md border border-gray-300 ".concat(s?"bg-gray-300 text-gray-400":"bg-white text-main-secondary"," bg-white px-4 py-2 text-sm font-medium shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-main focus:ring-offset-2 focus:ring-offset-gray-100"),children:[void 0===n?"Actions":n,(0,a.tZ)(o.Z,{className:"-mr-1 ml-2 h-5 w-5","aria-hidden":"true"})]});return(0,a.tZ)(c.Z,{align:void 0===l?"right":l,menuItems:t,button:d})};t.Z=l},5564:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(90116),o=n(74094),i=n(27060),c=n(67294),a=n(96420),l=n(35944),u=function(e){var t=e.bulkActions;return(0,l.tZ)(a.Z,{align:"left",menuItems:t,buttonText:"Bulk actions"})},s=n(59499),d=n(4730),f=["indeterminate","className"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var g=function(e){var t=e.indeterminate,n=e.className,r=(0,d.Z)(e,f),o=(0,c.useRef)(null);return(0,c.useEffect)(function(){"boolean"==typeof t&&(o.current.indeterminate=!r.checked&&t)},[o,t]),(0,l.tZ)("input",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({type:"checkbox",ref:o,className:(void 0===n?"":n)+" cursor-pointer h-4 w-4 rounded border-gray-300 text-main focus:ring-main"},r))},m=n(57815),v=function(e){var t=e.tableData,n=e.tableCols,a=(e.options,e.bulkActions),s=void 0===a?[]:a,d=e.onRowSelect,f=void 0===d?function(e){return null}:d,p=(0,c.useState)([]),v=p[0],b=p[1],h=(0,c.useState)("");h[0],h[1];var y=(0,c.useState)({}),w=y[0],O=y[1],Z=!!s.length,S=function(e){O(e)};(0,c.useEffect)(function(){f(x.getSelectedRowModel().flatRows.map(function(e){return e.original.id}))},[w]);var P=[].concat((0,r.Z)(Z?[{id:"select",header:function(e){var t=e.table;return(0,l.tZ)(g,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler()})},cell:function(e){var t=e.row;return(0,l.tZ)(g,{checked:t.getIsSelected(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler()})}}]:[]),(0,r.Z)(n)),x=(0,o.b7)({state:{sorting:v,rowSelection:w},columns:P,data:t,onSortingChange:b,onRowSelectionChange:S,getCoreRowModel:(0,i.sC)(),getSortedRowModel:(0,i.tj)(),getFilteredRowModel:(0,i.vL)(),debugTable:!0});return(0,l.BX)(l.HY,{children:[(0,l.tZ)("div",{className:"mb-2",children:!!s.length&&(0,l.tZ)(u,{bulkActions:s})}),(0,l.tZ)(m.Z,{table:x,selectable:Z})]})}},57815:function(e,t,n){"use strict";var r=n(59499),o=n(74094),i=n(16246),c=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=function(e){var t=e.table,n=e.selectable;return(0,c.tZ)("div",{className:"flex flex-col",children:(0,c.tZ)("div",{className:"-my-2 overflow-y-visible sm:-mx-6 lg:-mx-8",children:(0,c.tZ)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,c.tZ)("div",{className:"shadow overflow-y-visible border-b border-gray-200 sm:rounded-lg",children:(0,c.BX)("table",{className:"min-w-full divide-y divide-gray-200 bg-white",children:[(0,c.tZ)("thead",{className:"bg-gray-50",children:t.getHeaderGroups().map(function(e){return(0,c.tZ)("tr",{children:e.headers.map(function(e,t){var r,a;return(0,c.BX)("th",{colSpan:e.colSpan,className:"px-6 py-3 text-left h-11 text-xs font-medium max-w-max text-gray-500 uppercase tracking-wider",style:l({textAlign:t>(n?1:0)?"center":"left"},(null===(r=e.column.columnDef)||void 0===r?void 0:r.id)==="select"?{paddingRight:0,width:"16px"}:{}),children:[" ",e.isPlaceholder?null:(0,c.tZ)("div",{className:"inline-block",children:(0,c.BX)("div",{className:"".concat(e.column.getCanSort()?"cursor-pointer select-none":""," flex space-x-2 max-w-max items-center justify-center"),onClick:e.column.getToggleSortingHandler(),children:[(0,c.tZ)("div",{children:(0,o.ie)(e.column.columnDef.header,e.getContext())}),e.column.getIsSorted()&&(0,c.tZ)("div",{className:"w-4 h-4 flex items-center",children:null!==(a=({asc:(0,c.tZ)(i.U,{className:"w-full"}),desc:(0,c.tZ)(i.U,{className:"rotate-180"})})[e.column.getIsSorted()])&&void 0!==a?a:null})]})})]},e.id)})},e.id)})}),(0,c.tZ)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.getRowModel().rows.map(function(e){return(0,c.tZ)("tr",{children:e.getVisibleCells().map(function(e,t){var r;return(0,c.tZ)("td",{className:"".concat(t>(n?1:0)?"text-center":""," px-6 py-4 text-sm text-gray-900"),style:l({},(null===(r=e.column.columnDef)||void 0===r?void 0:r.id)==="select"?{paddingRight:0,width:"16px"}:{}),children:(0,o.ie)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})})})})})};t.Z=u},40673:function(e,t,n){"use strict";var r=n(59499),o=n(39299),i=n(58779),c=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=function(e){var t=e.tagType,n=e.onSelect,r=e.selected,a=(0,i.Z)(),u=a.tags;a.loading,a.error;var s=function(e){n(e)},d={options:u&&u.filter(function(e){return e.tagType===t}),getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.label},value:(null==u?void 0:u.find(function(e){return e.id===r}))||null,placeholder:"Select ".concat(t),menuPortalTarget:document.body,isSearchable:!1,onChange:s,styles:{menuPortal:function(e){return l(l({},e),{},{zIndex:9999})},control:function(e,t){return l(l({},e),{},{minWidth:"240px"})}}};return(0,c.tZ)("div",{className:"flex space-x-4",children:u&&(0,c.tZ)(c.HY,{children:(0,c.tZ)(o.ZP,l({},d))})})};t.Z=u},58779:function(e,t,n){"use strict";var r=n(71641),o=n(54232);t.Z=function(){var e=(0,r.a)(o.F$),t=e.loading,n=e.error,i=e.data;return{tags:(i=void 0===i?{}:i).tags,loading:t,error:n}}},52694:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return J}});var r,o=n(40350),i=n(24249),c=n(59499),a=n(17674),l=n(71383),u=n(17283),s=n(22345),d=(0,u.Ps)(r||(r=(0,l.Z)(["\n  mutation UpdatePathway(\n    $id: ID!\n    $title: String,\n    $content: JSON,\n    $certificateProperties: JSON,\n    $settings: JSON,\n    $tags: [TagInput!],\n    $imageId: ID,\n    $imageUrl: String,\n    $childrenIds: JSON,\n    $prerequisites: JSON\n  ) {\n    updatePathway(\n      input: {\n        id: $id,\n        title: $title,\n        content: $content,\n        certificateProperties: $certificateProperties,\n        settings: $settings,\n        tags: $tags,\n        imageId: $imageId,\n        imageUrl: $imageUrl\n        childrenIds: $childrenIds,\n        prerequisites: $prerequisites\n      }\n    ) {\n      pathway {\n      ...PathwayFragment\n      }\n    }\n  }\n  ","\n"])),s.dp),f=n(50319),p=n(94225);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(e){var t=(0,f.D)(d),n=(0,a.Z)(t,2),r=n[0];return n[1],{updatePathway:function(t){var n=p.ZP.readFragment({id:"ContentItem:".concat(e),fragment:s.dp,fragmentName:"PathwayFragment"});r({variables:m({id:e},t),optimisticResponse:{updatePathway:{__typename:"UpdatePathwayPayload",pathway:m(m({},n),t)}}}).catch(function(e){})}}},b=n(67294),h=n(95815),y=n(78773),w=n(61458),O=n(5564),Z=n(70442),S=n(40673),P=n(64202),x=n(58042),j=n(78129),C=n(35944);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var D=function(e){var t=e.contentItems,n=e.typeName,r=e.onRowSelect,o=e.loading,i=e.error,c=(0,j.S)(function(e){return e.items}),a=(0,b.useState)(null),l=a[0],u=a[1],s=(0,b.useMemo)(function(){var e,n=null==t?void 0:t.filter(function(e){return!e._deleted}).filter(function(e){return!c.some(function(t){return t.id===e.id})});return l&&(n=null===(e=n)||void 0===e?void 0:e.filter(function(e){var t;return null==e?void 0:null===(t=e.tags)||void 0===t?void 0:t.some(function(e){return e.id===l})})),n||[]},[t,l,c]),d=(0,b.useMemo)(function(){return[{header:"".concat(n.charAt(0).toUpperCase()+n.slice(1)," Name"),accessorKey:"title",cell:function(e){var t,n,r,o=e.cell;return(0,C.tZ)(Z.Z,{image:o.row.original.image,icon:(0,C.tZ)(x.X,{className:"p-1"}),title:o.getValue(),secondary:null===(t=o.row.original)||void 0===t?void 0:null===(n=t.tags)||void 0===n?void 0:null===(r=n.map)||void 0===r?void 0:r.call(n,function(e){return e.label}).join(", ")})}}]},[]),f=function(){u(null)};return(0,C.BX)(C.HY,{children:[(0,C.BX)("div",{className:"flex items-center flex-col mb-2 sm:justify-between sm:flex-row",children:[(0,C.BX)("div",{className:"flex items-center flex-col sm:flex-row",children:[(0,C.tZ)(S.Z,{selected:l,tagType:"category",onSelect:function(e){return u(e.id)}}),(0,C.tZ)("span",{className:"text-main-secondary hover:text-main p-1 px-3 cursor-pointer",onClick:f,children:"clear filters"})]}),(0,C.BX)("p",{children:["Showing ",s.length," ",n||"item","s"]})]}),o&&(0,C.tZ)(P.Z,{}),i&&(0,C.BX)("p",{children:["Unable to fetch ",n||"item","s."]}),!o&&!i&&(0,C.tZ)(O.Z,_(_({},{tableData:s,tableCols:d,selectable:!0}),{},{rowProps:function(e){return{onClick:function(){return r(e.original)},style:{cursor:"pointer"}}}}))]})},k=function(e){var t=e.onRowSelect,n=(0,w.Z)(),r=n.courses,o=n.loading,i=n.error,c=null==r?void 0:r.edges.map(function(e){return e.node});return(0,C.tZ)(D,{contentItems:c,typeName:"course",onRowSelect:t,loading:o,error:i})},E=n(87870),I=function(e){var t=e.onRowSelect,n=(0,w.Z)(),r=n.resources,o=n.loading,i=n.error,c=null==r?void 0:r.edges.map(function(e){return e.node});return(0,C.tZ)(D,{contentItems:c,typeName:"resource",onRowSelect:t,loading:o,error:i})},R=n(11163),B=function(){throw"Abort route change due to unsaved changes in form. Triggered by useWarningOnExit. Please ignore this error. See issue https://github.com/vercel/next.js/issues/2476"},$=function(){return window},M=function(){var e,t;return null===(e=$())||void 0===e?void 0:null===(t=e.history)||void 0===t?void 0:t.state},X=function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Discard unsaved changes?",n=(0,R.useRouter)(),r=(0,b.useRef)(M());(0,b.useEffect)(function(){var e=function(){r.current=M()};return n.events.on("routeChangeComplete",e),function(){n.events.off("routeChangeComplete",e)}},[n]);var o=(0,b.useCallback)(function(){var e=r.current;if(null!==e&&null!==history.state&&e.idx!==history.state.idx){var t=r.current.idx<history.state.idx?-1:1;history.go(t)}},[]),i=(0,b.useCallback)(function(){n.events.emit("routeChangeError"),o(),B()},[o,n]);(0,b.useEffect)(function(){var r,o=!1,c=function(r){if(n.asPath!==r&&e&&!o){if(o=!0,window.confirm(t)){n.push(r);return}o=!1,i()}},a=function(n){if(e&&!o){var r,i=null!=n?n:null===(r=$())||void 0===r?void 0:r.event;return i&&(i.returnValue=Boolean(t)),t}return null};return n.events.on("routeChangeStart",c),null===(r=$())||void 0===r||r.addEventListener("beforeunload",a),function(){var e;n.events.off("routeChangeStart",c),null===(e=$())||void 0===e||e.removeEventListener("beforeunload",a)}},[t,e,i,n])},T=function(e){var t=e.item,n=(0,j.S)(function(e){return e.removeItem}),r=(0,b.useContext)(h.t).closeModal,o=(0,b.useCallback)(function(){n(t),r()},[n,t]);return(0,C.BX)(C.HY,{children:[(0,C.BX)("p",{children:["Are you sure you want to remove",(0,C.tZ)("span",{className:"text-bold",children:t.name}),"?"]}),(0,C.tZ)(y.Z,{onClick:o,children:"Delete lesson"})]})},A=function(){var e=(0,b.useContext)(h.t),t=e.handleModal,n=e.closeModal,r=(0,j.S)(function(e){return e.addItem});X((0,j.S)(function(e){return e.isDirty}));var o=function(e){r(e),n()},i=function(){t({title:"Add course to pathway:",size:"lg",content:(0,C.tZ)(k,{onRowSelect:o})})},c=function(){t({title:"Add resource to pathway:",size:"lg",content:(0,C.tZ)(I,{onRowSelect:o})})},a=function(e){t({title:"Delete lesson",content:(0,C.tZ)(T,{item:e})})};return(0,C.BX)(C.HY,{children:[(0,C.tZ)(E.Z,{editMode:!0,onRemove:a}),(0,C.tZ)(y.Z,{onClick:i,className:"mr-2",children:"Add a course"}),(0,C.tZ)(y.Z,{onClick:c,children:"Add a resource"})]})},H=n(76775),U=n(55678),L=function(){var e=(0,i.t)().query.pid;(0,H.Z)(e).pathway;var t=v(e).updatePathway,n=(0,j.S)(function(e){return e.items}),r=(0,j.S)(function(e){return e.isDirty}),o=(0,j.S)(function(e){return e.setIsDirty}),c=(0,b.useCallback)(function(){t({childrenIds:n.map(function(e){return e.id})}),o(!1),(0,U.Am)("Changes saved.",{toastId:"changesSaved",hideProgressBar:!0,autoClose:2500})},[n,r,t]);(0,b.useEffect)(function(){(0,p.ac)((0,C.tZ)(C.HY,{children:(0,C.tZ)(y.Z,{disabled:!r,onClick:c,children:"Save Changes"})}))},[e,c,r])},Y=function(){var e=(0,i.t)().query.pid,t=(0,H.Z)(e).pathway,n=v(e).updatePathway;return(0,o.Z)({title:"Pathway: ",editable:null==t?void 0:t.title,onEdit:function(e){return n({title:e})}}),L(),(0,C.tZ)(C.HY,{children:t&&(0,C.tZ)(A,{})})};Y.navState={topLevel:"courses",secondary:"pathways"};var J=Y},3371:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/pathways/edit",function(){return n(52694)}])},20516:function(e){e.exports={button:"Button_button__RRrLU",button_bestia:"Button_button_bestia__QRXEX",button__bg:"Button_button__bg__EuarU",button__span:"Button_button__span__Tcje3"}},50319:function(e,t,n){"use strict";n.d(t,{D:function(){return s}});var r=n(70655),o=n(67294),i=n(14012),c=n(82152),a=n(14692),l=n(30990),u=n(66252);function s(e,t){var n=(0,u.x)(null==t?void 0:t.client);(0,a.Vp)(e,a.n_.Mutation);var s=(0,o.useState)({called:!1,loading:!1,client:n}),d=s[0],f=s[1],p=(0,o.useRef)({result:d,mutationId:0,isMounted:!0,client:n,mutation:e,options:t});Object.assign(p.current,{client:n,options:t,mutation:e});var g=(0,o.useCallback)(function(e){void 0===e&&(e={});var t=p.current,n=t.client,o=t.options,a=t.mutation,u=(0,r.pi)((0,r.pi)({},o),{mutation:a});p.current.result.loading||u.ignoreResults||!p.current.isMounted||f(p.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:n});var s=++p.current.mutationId,d=(0,i.J)(u,e);return n.mutate(d).then(function(t){var r,o,i,a=t.data,u=t.errors,g=u&&u.length>0?new l.c({graphQLErrors:u}):void 0;if(s===p.current.mutationId&&!d.ignoreResults){var m={called:!0,loading:!1,data:a,error:g,client:n};p.current.isMounted&&!(0,c.D)(p.current.result,m)&&f(p.current.result=m)}return null===(o=null===(r=p.current.options)||void 0===r?void 0:r.onCompleted)||void 0===o||o.call(r,t.data,d),null===(i=e.onCompleted)||void 0===i||i.call(e,t.data,d),t}).catch(function(t){var r,o,i,a;if(s===p.current.mutationId&&p.current.isMounted){var l={loading:!1,error:t,data:void 0,called:!0,client:n};(0,c.D)(p.current.result,l)||f(p.current.result=l)}if((null===(r=p.current.options)||void 0===r?void 0:r.onError)||d.onError)return null===(i=null===(o=p.current.options)||void 0===o?void 0:o.onError)||void 0===i||i.call(o,t,d),null===(a=e.onError)||void 0===a||a.call(e,t,d),{data:void 0,errors:t};throw t})},[]),m=(0,o.useCallback)(function(){p.current.isMounted&&f({called:!1,loading:!1,client:n})},[]);return(0,o.useEffect)(function(){return p.current.isMounted=!0,function(){p.current.isMounted=!1}},[]),[g,(0,r.pi)({reset:m},d)]}}},function(e){e.O(0,[3662,9299,6644,2110,6152,7639,9774,2888,179],function(){return e(e.s=3371)}),_N_E=e.O()}]);