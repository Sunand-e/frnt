(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9625],{64202:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(90116),o=t(25440),i=t.n(o),a=t(35944);function c(e){var n=e.text,t=e.className;return(0,a.BX)("div",{className:"".concat(t," display flex-col text-center text-main-secondary mx-auto"),children:[n,(0,a.tZ)("div",{className:i().loadingCubeGrid,children:(0,r.Z)(Array(9)).map(function(e,n){return(0,a.tZ)("div",{className:"".concat(i().loadingCube," ").concat(i().loadingCube1," ").concat(i()["loadingCube".concat(n+1)]," bg-main-secondary")},n)})})]})}},46771:function(e,n,t){"use strict";t.d(n,{w:function(){return l}});var r=t(94225),o=t(13433),i=t(67814),a=t(35944);function c(e){var n=e.className,t=e.notice,o=e.children,c=function(){(0,r.dy)((0,r.dy)().filter(function(e){return e.id!==t.id}))};return(0,a.tZ)("div",{className:"min-h-60 w-full",children:(0,a.BX)("div",{className:"w-full rounded-2xl flex items-center border-l-20 border-main text-main-secondary py-4 px-6 mb-6 ".concat("bg-main bg-opacity-10"," ").concat(n),children:[(0,a.tZ)(i.G,{className:"h-6 mr-9 text-main",icon:{prefix:"fas",iconName:"file-pdf"}}),(0,a.tZ)("div",{className:"w-full",children:(null==t?void 0:t.content)||o}),(null==t?void 0:t.id)&&(0,a.tZ)("a",{className:"cursor-pointer",onClick:c,children:"Dismiss"})]})})}var l=function(){var e=(0,o.l)(r.dy);return(0,a.tZ)(a.HY,{children:e&&e.map(function(e,n){return(0,a.tZ)(c,{notice:e},n)})})}},40673:function(e,n,t){"use strict";var r=t(59499),o=t(39299),i=t(58779),a=t(35944);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var u=function(e){var n=e.tagType,t=e.onSelect,r=e.selected,c=(0,i.Z)(),u=c.tags;c.loading,c.error;var s=function(e){t(e)},d={options:u&&u.filter(function(e){return e.tagType===n}),getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.label},value:(null==u?void 0:u.find(function(e){return e.id===r}))||null,placeholder:"Select ".concat(n),menuPortalTarget:document.body,isSearchable:!1,onChange:s,styles:{menuPortal:function(e){return l(l({},e),{},{zIndex:9999})},control:function(e,n){return l(l({},e),{},{minWidth:"240px"})}}};return(0,a.tZ)("div",{className:"flex space-x-4",children:u&&(0,a.tZ)(a.HY,{children:(0,a.tZ)(o.ZP,l({},d))})})};n.Z=u},34588:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var r,o=t(59499),i=t(17674),a=t(50319),c=t(71383),l=(0,t(17283).Ps)(r||(r=(0,c.Z)(["\n  mutation DeleteCourse(\n    $id: ID!\n  ) {\n    deleteCourse(\n      id: $id\n    ) {\n      message\n      contentItem {\n        id\n        _deleted @client\n      }\n    }\n  }\n"]))),u=t(22345);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach(function(n){(0,o.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var f=function(){var e=(0,a.D)(l),n=(0,i.Z)(e,2),t=n[0];return n[1],{deleteCourse:function(e){t({variables:{id:e},optimisticResponse:{deleteCourse:{__typename:"DeleteContentItemPayload",contentItem:{id:e,__typename:"ContentItem",_deleted:!0},message:""}},update:function(n,t){t.data;var r=n.readFragment({id:"ContentItem:".concat(e),fragment:u.mk,fragmentName:"CourseFragment"});r&&n.writeFragment({id:"ContentItem:".concat(e),fragment:u.mk,fragmentName:"CourseFragment",data:d(d({},r),{},{_deleted:!0})})}})}}}},55103:function(e,n,t){"use strict";var r=t(22345),o=t(71641);n.Z=function(){var e=(0,o.a)(r.Pb),n=e.loading,t=e.error,i=e.data;return{courses:(i=void 0===i?{}:i).courses,loading:n,error:t}}},58779:function(e,n,t){"use strict";var r=t(71641),o=t(54232);n.Z=function(){var e=(0,r.a)(o.F$),n=e.loading,t=e.error,i=e.data;return{tags:(i=void 0===i?{}:i).tags,loading:n,error:t}}},42406:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var r=t(11163),o=t(46771),i=t(59499),a=t(67294),c=t(5564),l=t(55103),u=t(70442),s=t(40673),d=t(22345),f=t(71641),g=function(){var e=(0,f.a)(d.cE),n=e.loading,t=e.error,r=e.data;return{courses:(r=void 0===r?{}:r).courses,loading:n,error:t}},p=t(64202),b=t(58042),m=t(96420),v=t(34588),y=t(9023),h=t(35944),C=function(e){var n=e.course,t=(null==n?void 0:n.id)&&"".concat("/admin/courses/edit","?id=").concat(n.id),r=(0,v.Z)().deleteCourse,o=(0,y.Z)({type:"course",name:n.title,onConfirm:function(){return r(n.id)}}).confirmDelete,i=[{label:"Edit course",href:t,capability:"UpdateCourse"},{label:(0,h.tZ)("span",{className:"text-red-500",children:"Delete course"}),onClick:o,capability:"DeleteCourse"}];return(0,h.tZ)(m.Z,{menuItems:i,buttonText:"Actions"})};function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var _=function(e){e.selectable,e.onSelectionChange;var n=g(),t=n.loading,r=n.error,o=n.courses,d=(0,l.Z)().courses,f=(0,a.useState)(null),m=f[0],v=f[1];(0,a.useEffect)(function(){d?v(d):o&&v(o)},[d,o]);var y=(0,a.useState)(null),_=y[0],Z=y[1],w=(0,a.useMemo)(function(){var e,n,t=null==m?void 0:null===(e=m.edges)||void 0===e?void 0:e.map(function(e){return e.node}).filter(function(e){return!e._deleted});return _&&(t=null===(n=t)||void 0===n?void 0:n.filter(function(e){var n;return null==e?void 0:null===(n=e.tags)||void 0===n?void 0:n.some(function(e){return e.id===_})})),t||[]},[m,_]),j=(0,a.useMemo)(function(){return[{header:"Course",accessorKey:"title",cell:function(e){var n,t,r,o=e.cell;return(0,h.tZ)(u.Z,{image:o.row.original.image,icon:(0,h.tZ)(b.X,{className:"p-1"}),title:o.getValue(),secondary:null===(n=o.row.original)||void 0===n?void 0:null===(t=n.tags)||void 0===t?void 0:null===(r=t.map)||void 0===r?void 0:r.call(t,function(e){return e.label}).join(", "),href:!1===o.row.original.shared&&o.row.original.id&&"".concat("/admin/courses/edit","?id=").concat(o.row.original.id)})}},{id:"activeUsers",header:"Active users",accessorFn:function(e){var n;return null===(n=e.users)||void 0===n?void 0:n.totalCount},cell:function(e){var n,t=null===(n=e.cell.row.original.users)||void 0===n?void 0:n.totalCount;return(0,h.tZ)("span",{children:"".concat(t||0," user").concat(1!==t?"s":"")})}},{id:"category",header:"Category",accessorFn:function(e){var n;return(null===(n=e.tags)||void 0===n?void 0:n.filter(function(e){return"category"===e.tagType}).map(function(e){return e.label}).join(", "))||"-"}},{width:300,header:"Actions",accessorKey:"actions",cell:function(e){var n=e.cell;return(0,h.tZ)(C,{course:n.row.original})}}]},[]),P=function(){Z(null)};return(0,h.BX)(h.HY,{children:[(0,h.BX)("div",{className:"flex items-center flex-col mb-2 sm:justify-between sm:flex-row",children:[(0,h.BX)("div",{className:"flex items-center flex-col sm:flex-row",children:[(0,h.tZ)(s.Z,{selected:_,tagType:"category",onSelect:function(e){return Z(e.id)}}),(0,h.tZ)("span",{className:"text-main-secondary hover:text-main p-1 px-3 cursor-pointer",onClick:P,children:"clear filters"})]}),(0,h.BX)("p",{children:["Showing ",w.length," courses"]})]}),t&&(0,h.tZ)(p.Z,{}),r&&(0,h.tZ)("p",{children:"Unable to fetch courses."}),!t&&!r&&(0,h.tZ)(c.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},{tableData:w,tableCols:j,selectable:!0,enableRowSelection:!0}))]})},Z=t(95815),w=t(40350),j=t(24545),P=function(){(0,w.Z)({title:"Courses"}),(0,r.useRouter)();var e=(0,a.useContext)(Z.t);return e.handleModal,e.closeModal,(0,j.Z)([]),(0,h.BX)(h.HY,{children:[(0,h.tZ)(o.w,{}),(0,h.tZ)(_,{})]})};P.navState={topLevel:"courses",secondary:"courses"};var S=P},8701:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/courses",function(){return t(42406)}])},25440:function(e){e.exports={loadingCubeGrid:"LoadingSpinner_loadingCubeGrid__9Okru",loadingCube:"LoadingSpinner_loadingCube__WnqWw",loadingCubeGridScaleDelay:"LoadingSpinner_loadingCubeGridScaleDelay__S4rcT",loadingCube1:"LoadingSpinner_loadingCube1__9Xdf3",loadingCube2:"LoadingSpinner_loadingCube2__9hDGq",loadingCube3:"LoadingSpinner_loadingCube3__pmAJ5",loadingCube4:"LoadingSpinner_loadingCube4__QGZuW",loadingCube5:"LoadingSpinner_loadingCube5__vJpHG",loadingCube6:"LoadingSpinner_loadingCube6__3tWSf",loadingCube7:"LoadingSpinner_loadingCube7__PBJGj",loadingCube8:"LoadingSpinner_loadingCube8__mJD7v",loadingCube9:"LoadingSpinner_loadingCube9__oiwQt"}}},function(e){e.O(0,[9299,6644,9255,9774,2888,179],function(){return e(e.s=8701)}),_N_E=e.O()}]);