(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6487],{77447:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(87462),a=n(67294),o=n(54142),i=a.forwardRef(function(e,t){return a.createElement(o.r,(0,r.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),a.createElement("path",{d:"M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1zm4 0v6h8V1H4zm8 8H4v6h8V9zM1 1v2h2V1H1zm2 3H1v2h2V4zM1 7v2h2V7H1zm2 3H1v2h2v-2zm-2 3v2h2v-2H1zM15 1h-2v2h2V1zm-2 3v2h2V4h-2zm2 3h-2v2h2V7zm-2 3v2h2v-2h-2zm2 3h-2v2h2v-2z"}))});i.displayName="Film"},26373:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var r=n(87462),a=n(67294),o=n(54142),i=a.forwardRef(function(e,t){return a.createElement(o.r,(0,r.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 28 28"},e,{ref:t}),a.createElement("path",{d:"M24 13h-9V4a1 1 0 1 0-2 0v9H4a1 1 0 1 0 0 2h9v9a1 1 0 1 0 2 0v-9h9a1 1 0 1 0 0-2z"}))});i.displayName="Add"},48453:function(e,t,n){"use strict";n.d(t,{E:function(){return i}});var r=n(87462),a=n(67294),o=n(54142),i=a.forwardRef(function(e,t){return a.createElement(o.r,(0,r.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 48 48"},e,{ref:t}),a.createElement("path",{d:"M31 14.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM6 10.75A4.75 4.75 0 0 1 10.75 6h26.5A4.75 4.75 0 0 1 42 10.75v26.5c0 .86-.23 1.66-.63 2.36L26.63 25.08a3.75 3.75 0 0 0-5.26 0L6.63 39.62c-.4-.7-.63-1.5-.63-2.36v-26.5zM26 17a5 5 0 1 0 10 0 5 5 0 0 0-10 0zM8.4 41.38c.69.4 1.5.62 2.35.62h26.5c.86 0 1.66-.23 2.36-.63l-14.73-14.5a1.25 1.25 0 0 0-1.76 0L8.4 41.37z"}))});i.displayName="Image"},72149:function(e,t,n){"use strict";n.d(t,{r:function(){return i}});var r=n(87462),a=n(67294),o=n(54142),i=a.forwardRef(function(e,t){return a.createElement(o.r,(0,r.Z)({iconAttrs:{fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m19 7-.867 12.142A2 2 0 0 1 16.138 21H7.862a2 2 0 0 1-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v3M4 7h16"}))});i.displayName="Trash"},11173:function(e,t,n){"use strict";var r=n(93354),a=n(72149),o=n(35944),i=function(e){var t=e.placeholder,n=e.src,i=e.buttonText,c=e.onClick,l=e.onLoad,u=e.onClear,s=e.className,d=e.isButtonAlwaysVisible;return(0,o.BX)("div",{className:(0,r.Z)("relative",void 0===s?"":s),children:[(0,o.tZ)("img",{onLoad:l,className:"block max-w-full px-1 w-full borderRadius[3px] object-cover boxShadow[0 0 0 1px rgb(59,130,249)]",src:n||t||"/images/placeholder-image.png"}),(0,o.tZ)("div",{className:"absolute w-full h-full top-0 left-0 flex items-center justify-center ".concat(!n||d?"":"opacity-0 hover:opacity-100"),children:(0,o.tZ)("a",{className:"cursor-pointer bg-main-secondary bg-opacity-60 text-white py-1 px-4 rounded hover:bg-opacity-90",onClick:c,children:null!=i?i:"Choose image"})}),u&&n&&(0,o.tZ)("div",{className:"absolute p-2 w-12 h-12 flex items-center justify-center top-0 right-0 'opacity-60 hover:opacity-100'}",children:(0,o.tZ)(a.r,{className:"w-6 cursor-pointer hover:w-14 text-red-800",onClick:u})})]})};t.Z=i},28024:function(e,t,n){"use strict";var r=n(67294),a=n(95815),o=n(27675),i=n(11173),c=n(35944),l=function(e){var t=e.placeholder,n=e.src,l=e.buttonText,u=e.isButtonAlwaysVisible,s=e.className,d=e.onSelect,g=(0,r.useContext)(a.t).handleModal,f=function(){g({title:"Choose image",content:(0,c.tZ)(o.Z,{onItemSelect:d,typeFilter:["image"]}),size:"lg"})};return(0,c.tZ)(i.Z,{placeholder:t,src:n,buttonText:l,isButtonAlwaysVisible:u,onClick:f,onClear:function(){return d(null)},className:void 0===s?"":s})};t.Z=l},64202:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(90116),a=n(25440),o=n.n(a),i=n(35944);function c(e){var t=e.text,n=e.className;return(0,i.BX)("div",{className:"".concat(n," display flex-col text-center text-main-secondary mx-auto"),children:[t,(0,i.tZ)("div",{className:o().loadingCubeGrid,children:(0,r.Z)(Array(9)).map(function(e,t){return(0,i.tZ)("div",{className:"".concat(o().loadingCube," ").concat(o().loadingCube1," ").concat(o()["loadingCube".concat(t+1)]," bg-main-secondary")},t)})})]})}},99083:function(e,t,n){"use strict";var r=n(67294),a=n(87536),o=n(95815),i=n(28024),c=n(35944),l=function(e){var t=e.placeholder,n=e.buttonText,l=e.control,u=e.name,s=e.origImage,d=e.onSelect,g=e.className,f=e.isButtonAlwaysVisible,p=(0,a.bc)({control:l,name:u}).field,m=(0,r.useContext)(o.t).closeModal,b=(0,r.useState)(s),v=b[0],h=b[1],y=function(e){p.onChange((null==e?void 0:e.id)||null),h(e),d?d(e):m()};return(0,c.tZ)(c.HY,{children:(0,c.tZ)(i.Z,{className:void 0===g?"":g,placeholder:t,src:null==v?void 0:v.location,buttonText:n,onSelect:y,isButtonAlwaysVisible:void 0===f||f})})};t.Z=l},76267:function(e,t,n){"use strict";var r=n(59499),a=n(78773),o=n(87536),i=n(97088),c=n(67294),l=n(99083),u=n(95815),s=n(35944);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f=function e(t){var n=t.tag,r=void 0===n?null:n,d=t.onSubmit,f=t.isModal,p=g({tagType:"category"},r),m=(0,c.useContext)(u.t).handleModal,b=(0,o.cI)({defaultValues:p}),v=b.register,h=b.handleSubmit,y=b.control,w=b.setFocus,Z=b.getValues,O=b.formState.errors;(0,c.useEffect)(function(){w("label")},[]);var C=function(t){m({title:"Course settings",size:"lg",content:(0,s.tZ)(e,{tag:g(g({},Z()),{},{image:t}),isModal:!0,onSubmit:d})})};return(0,s.BX)("form",{className:"h-full w-full max-w-sm flex flex-col space-y-4",onSubmit:h(d),children:[(0,s.tZ)(i.Z,{label:"Category Name",placeholder:"Untitled category",inputAttrs:v("label",{required:"Category name is required"})}),O.label&&(0,s.tZ)("small",{className:"text-danger text-red-500",children:O.label.message}),(0,s.tZ)(l.Z,{label:"Category image",origImage:null==r?void 0:r.image,placeholder:"https://picsum.photos/640/360",buttonText:"Choose category image",control:y,name:"mediaItemId",onSelect:void 0!==f&&f?C:null}),(0,s.tZ)(a.Z,{type:"submit",children:r?"Save changes":"Create category"})]})};t.Z=f},80485:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var r,a,o=n(67294),i=n(40350),c=n(24545),l=n(95815),u=n(90116),s=n(59499),d=n(17674),g=n(50319),f=n(71383),p=n(17283),m=n(54232),b=(0,p.Ps)(r||(r=(0,f.Z)(["\n  mutation CreateTag(\n    $label: String!,\n    $tagType: String!,\n    $mediaItemId: ID,\n  ) {\n    createTag(\n      input: {\n        label: $label,\n        tagType: $tagType,\n        mediaItemId: $mediaItemId,\n      }\n    ) {\n      tag {\n        ...TagFragment\n      }\n    }\n  }\n  ","\n"])),m.$v);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(){var e=(0,g.D)(b,{update:function(e,t){var n=t.data.createTag,r=e.readQuery({query:m.F$});e.writeQuery({query:m.F$,data:h(h({},r),{},{tags:[n.tag].concat((0,u.Z)(r.tags))})})}}),t=(0,d.Z)(e,2),n=t[0];return t[1],{createTag:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n({variables:h({},e),optimisticResponse:{createTag:{__typename:"CreateTagPayload",tag:h({__typename:"Tag",id:"tmp-".concat(Math.floor(1e4*Math.random())),image:null},e)}},onCompleted:t}).catch(function(e){})}}},w=n(76267),Z=n(24249),O=n(35944),C=function(e){e.type;var t=(0,Z.t)(),n=(0,o.useContext)(l.t).closeModal,r=y().createTag,a=(0,o.useCallback)(function(e){r(e),t.push("/admin/tags"),n()},[]);return(0,O.tZ)(O.HY,{children:(0,O.tZ)(w.Z,{isModal:!0,onSubmit:a})})},_=n(5564),j=(0,p.Ps)(a||(a=(0,f.Z)(["\n  mutation DeleteTag(\n    $id: ID!\n  ) {\n    deleteTag(\n      id: $id\n    ) {\n      tag {\n        id\n        _deleted @client\n      }\n      message\n    }\n  }\n"])));function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P=function(){var e=(0,g.D)(j,{refetchQueries:[m.F$]}),t=(0,d.Z)(e,2),n=t[0];return t[1],{deleteTag:function(e){n({variables:{id:e},optimisticResponse:{__typename:"Mutation",deleteTag:{__typename:"DeleteTagPayload",tag:{id:e,_deleted:!0},message:""}},update:function(t,n){n.data;var r=t.readFragment({id:"Tag:".concat(e),fragment:m.$v});r&&t.writeFragment({id:"Tag:".concat(e),fragment:m.$v,data:x(x({},r),{},{_deleted:!0})})}})}}},T=n(70442),N=n(45551),D=n(64202),A=n(61458),V=n(96420),E=n(9023),M=function(e){var t=e.tag,n=(null==t?void 0:t.id)&&"".concat("/admin/tags/edit","?id=").concat(t.id),r=P().deleteTag,a=(0,E.Z)({type:"category",name:t.label,onConfirm:function(){return r(t.id)}}).confirmDelete,o=[{label:"Edit category",href:n,capability:"UpdateTag"},{label:(0,O.tZ)("span",{className:"text-red-500",children:"Delete category"}),onClick:a,capability:"DeleteTag"}];return(0,O.tZ)(V.Z,{menuItems:o,buttonText:"Actions"})},k=function(){var e=(0,A.Z)(),t=e.tags,n=e.loading,r=e.error,a=e.courses,i=e.resources,c=e.pathways;P().deleteTag;var l=(0,o.useMemo)(function(){return(null==t?void 0:t.filter(function(e){return!e._deleted}))||[]},[t]),s=(0,o.useMemo)(function(){return[{header:"Category Name",accessorKey:"label",cell:function(e){var t,n=e.cell;return(0,O.tZ)(T.Z,{image:n.row.original.image,icon:(0,O.tZ)(N.W,{className:"p-2"}),title:n.getValue(),secondary:null===(t=n.row.original.tags)||void 0===t?void 0:t.map(function(e){return e.label}).join(", "),href:n.row.original.id&&"".concat("/admin/tags/edit","?id=").concat(n.row.original.id),imgDivClass:"bg-main text-white"})}},{header:"Item count",cell:function(e){var t=e.cell,n=[].concat((0,u.Z)(null==a?void 0:a.edges),(0,u.Z)(null==i?void 0:i.edges),(0,u.Z)(null==c?void 0:c.edges)).filter(function(e){return e.node.tags.map(function(e){return e.id}).includes(t.row.original.id)}).length;return console.log("catItemCount"),console.log(n),(0,O.tZ)("span",{children:"".concat(n||0," item").concat(1!==n?"s":"")})}},{width:300,header:"Actions",accessorKey:"actions",cell:function(e){var t=e.cell;return(0,O.tZ)(M,{tag:t.row.original})}}]},[a,i,c]);return(0,O.BX)(O.HY,{children:[n&&(0,O.tZ)(D.Z,{}),r&&(0,O.tZ)("p",{children:"Unable to fetch tags."}),!n&&!r&&(0,O.tZ)(_.Z,{tableData:l,tableCols:s})]})},I=n(26373),L=function(){return(0,O.BX)(O.HY,{children:[(0,O.tZ)("span",{className:"hidden lg:block",children:"Create new category"}),(0,O.tZ)("span",{className:"block lg:hidden",children:(0,O.tZ)(I.m,{width:"20"})})]})},z=function(){(0,i.Z)({title:"Categories"});var e=(0,o.useContext)(l.t).handleModal,t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"category";e({title:"Create a new ".concat(t),size:"lg",content:(0,O.tZ)(C,{type:t})})};return(0,c.Z)([[(0,O.tZ)(L,{}),function(){return t()}]]),(0,O.tZ)(O.HY,{children:(0,O.tZ)(k,{})})};z.navState={topLevel:"categories"};var H=z},24249:function(e,t,n){"use strict";n.d(t,{t:function(){return d}});var r=n(59499),a=n(17674),o=n(83618);n(67294);var i=n(11163);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e){var t,n=e.split("?"),r=(0,o.Z)(n).slice(1).join("?"),i={},c=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(new URLSearchParams(r).entries());try{for(c.s();!(t=c.n()).done;){var l=(0,a.Z)(t.value,2),s=l[0],d=l[1];i[s]=d}}catch(g){c.e(g)}finally{c.f()}return i},d=function(){var e=(0,i.useRouter)();return e.query=l(l({},s(e.asPath)),e.query),e}},17034:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/tags",function(){return n(80485)}])},25440:function(e){e.exports={loadingCubeGrid:"LoadingSpinner_loadingCubeGrid__9Okru",loadingCube:"LoadingSpinner_loadingCube__WnqWw",loadingCubeGridScaleDelay:"LoadingSpinner_loadingCubeGridScaleDelay__S4rcT",loadingCube1:"LoadingSpinner_loadingCube1__9Xdf3",loadingCube2:"LoadingSpinner_loadingCube2__9hDGq",loadingCube3:"LoadingSpinner_loadingCube3__pmAJ5",loadingCube4:"LoadingSpinner_loadingCube4__QGZuW",loadingCube5:"LoadingSpinner_loadingCube5__vJpHG",loadingCube6:"LoadingSpinner_loadingCube6__3tWSf",loadingCube7:"LoadingSpinner_loadingCube7__PBJGj",loadingCube8:"LoadingSpinner_loadingCube8__mJD7v",loadingCube9:"LoadingSpinner_loadingCube9__oiwQt"}},23296:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(67294);let a=()=>{},o={root:null,rootMargin:"0px 0px 0px 0px",threshold:[0,1]};function i(e=()=>{},t=o){let{root:n=null,rootMargin:i,threshold:c}=t,[l,u]=(0,r.useState)(null),[s,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(l){let n=new IntersectionObserver((t,n)=>{for(let{isIntersecting:r}of t)d(r);e(t,n)},t);return n.observe(l),()=>{n.disconnect()}}return a},[l,e,n,i,c,t]);let g=(0,r.useCallback)(e=>{u(e)},[]);return[g,s]}},83618:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(14666),a=n(28811),o=n(2937),i=n(14882);function c(e){return(0,r.Z)(e)||(0,a.Z)(e)||(0,o.Z)(e)||(0,i.Z)()}}},function(e){e.O(0,[6107,6644,3434,744,9774,2888,179],function(){return e(e.s=17034)}),_N_E=e.O()}]);