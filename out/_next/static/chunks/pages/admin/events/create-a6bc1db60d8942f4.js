(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2692],{78773:function(e,t,n){"use strict";var r=n(20516),o=n.n(r),a=n(35944),i=function(e){var t=e.onClick,n=e.disabled,r=e.type,i=e.displayType,c=e.size,l=e.className,u=e.children,s="bg-main group-hover:bg-opacity-80 transition-colors duration-1000";return(void 0===i?"normal":i)==="alert"&&(s="bg-red-800 group-hover:bg-red-700 transition-colors duration-1000"),(0,a.BX)("button",{type:void 0===r?"button":r,disabled:void 0!==n&&n,className:"\n        ".concat(l,"\n        ").concat(o().button,"\n        ").concat(o().button_bestia,"\n        ").concat("sm"===c?"px-1":"px-8","\n\n        min-w-16 py-2 \n        whitespace-nowrap nowrap\n        border border-transparent rounded-md\n        text-sm\n        group\n        disabled bg-main text-white\n        focus:bg-opacity-50 focus:outline-none \n        active:bg-opacity-50 \n      "),onClick:t,children:[(0,a.tZ)("div",{className:"".concat(o().button__bg," ").concat(s)}),(0,a.tZ)("span",{className:o().button__span,children:u})]})};t.Z=i},49842:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(60330),o={physical:{label:"Physical Event",readMoreLabel:"View event details",eventModel:"PhysicalEvent",icon:n(75968).j,content:{blocks:[{type:"text"}]}},virtual:{label:"Virtual Event",readMoreLabel:"View event details",eventModel:"VirtualEvent",icon:r.N,content:{blocks:[{type:"text"}]}}}},3666:function(e,t,n){"use strict";n.d(t,{QV:function(){return l},fM:function(){return u}});var r,o,a,i=n(71383),c=n(17283),l=(0,c.Ps)(r||(r=(0,i.Z)(["\n  fragment EventFragment on Event {\n    title\n    content\n    createdAt\n    eventModelType\n    id\n    selfRegistration\n    startTime\n    updatedAt\n    duration\n    eventModelId\n    physicalEvent {\n      location\n    }\n    virtualEvent {\n      provider\n    }\n    _deleted @client\n  }\n"])));(0,c.Ps)(o||(o=(0,i.Z)(["\n  query GetEvent($id: ID!) {\n    event(id: $id) {\n      ...EventFragment\n    }\n  }\n  ","\n"])),l);var u=(0,c.Ps)(a||(a=(0,i.Z)(["\n  query GetEvents {\n    events {\n      edges {\n        node {\n          ...EventFragment\n        }\n      }\n    }\n  }\n  ","\n"])),l)},24545:function(e,t,n){"use strict";var r=n(11163),o=n(67294),a=n(78773),i=n(94225),c=n(35944),l=function(e){var t=(0,r.useRouter)();(0,o.useEffect)(function(){(0,i.ac)((0,c.tZ)("div",{className:"space-x-2 flex items-center",children:e.map(function(e,n){return(0,c.tZ)(a.Z,{onClick:function(){"function"==typeof e[1]?e[1]():t.push(e[1])},children:e[0]},n)})}))},[])};t.Z=l},40350:function(e,t,n){"use strict";var r=n(67294),o=n(94225);t.Z=function(e){(0,r.useEffect)(function(){(0,o.jL)(e)},[e])}},30368:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var r,o=n(40350),a=n(59499),i=n(78773),c=n(87536),l=n(11163),u=n(67294),s=n(97088),d=n(44227),f=n(35944),v=function(e){var t=e.isRangeAvailable,n=void 0!==t&&t,r=e.initialValue,o=e.control,a=e.name,i=e.label,l=(0,u.useState)(null==r?void 0:r[0]),s=l[0],v=l[1],p=(0,u.useState)(null==r?void 0:r[1]),b=p[0],m=p[1],y=(0,u.useState)(!1),h=y[0],g=y[1],O=(0,c.bc)({control:o,name:a}).field,E=function(e,t){if("start"===t){if(v(e),h)O.onChange([s]);else{var n;O.onChange([null===(n=O.value)||void 0===n?void 0:n[0],s])}}else"end"===t&&m(e)},_=function(e){g(function(e){return!e})};return(0,f.BX)(f.HY,{children:[(0,f.tZ)("pre",{children:JSON.stringify(s,null,2)}),(0,f.BX)("p",{children:["isRangeAvailable: ",n?"true":"false"]}),(0,f.tZ)(d.Mt,{label:i,placeholder:"Choose a ".concat(h?"start ":"","date"),value:s,onChange:function(e){return E(e,"start")}}),h&&(0,f.tZ)(d.Mt,{label:i,placeholder:"Choose an end date",value:b,onChange:function(e){return E(e,"end")}}),n&&(0,f.BX)("label",{className:"flex w-full justify-start",children:[(0,f.tZ)("span",{className:"text-gray-700",children:"Multi-day event?"}),(0,f.tZ)("input",{type:"checkbox",onChange:_,checked:h,className:" mt-1 block rounded-md border-main/50 shadow-sm focus:border-main focus:ring focus:ring-main/50 "})]})]})},p=n(27484),b=n.n(p);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=function(e){var t=e.event,n=void 0===t?null:t,r=e.type,o=e.onSubmit,a=y(y({},n),{},{eventModelType:null==r?void 0:r.eventModel,title:null==n?void 0:n.title}),d=(0,c.cI)({defaultValues:a}),p=d.watch,m=d.register,h=d.handleSubmit,g=d.control,O=d.setFocus,E=d.formState.errors;(0,u.useEffect)(function(){O("title")},[]);var _=(0,l.useRouter)(),w=function(e){o(y(y({},e),{},{startTime:e.dateRange[0],duration:b()(e.dateRange[0]).diff(e.dateRange[1])})),_.push("/admin/events")},Z=p();return(0,f.BX)("form",{className:"h-full w-full max-w-screen-lg flex flex-col space-y-4",onSubmit:h(w),children:[(0,f.tZ)(s.Z,{label:"Event name",placeholder:"Event name",inputAttrs:m("title",{required:"Event name is required",maxLength:20})}),E.title&&(0,f.tZ)("small",{className:"text-danger text-rose-800",children:E.title.message}),(0,f.tZ)(v,{isRangeAvailable:!0,label:"Date",name:"date",control:g}),(0,f.tZ)(i.Z,{type:"submit",children:"Create event"}),(0,f.tZ)("pre",{children:JSON.stringify(Z,null,2)})]})},g=n(24545),O=n(49842);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}Object.keys(O.b).map(function(e){return _(_({},O.b[e]),{},{value:e})});var w=function(e){var t=e.onSelect;return(0,f.BX)("div",{className:"p-8 bg-white shadow rounded-md flex justify-center flex-col sm:flex-row absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:[(0,f.tZ)(i.Z,{onClick:function(){return t("PhysicalEvent")},className:"mr-0 mb-4 sm:mr-4 sm:mb-0",children:"Add Physical Event"}),(0,f.tZ)(i.Z,{onClick:function(){return t("VirtualEvent")},children:"Add Virtual Event"})]})},Z=n(90116),j=n(17674),P=n(50319),N=n(71383),S=n(17283),x=n(3666),k=(0,S.Ps)(r||(r=(0,N.Z)(["\n  mutation CreateEvent(\n    $title: String!,\n    $eventModelType: String!,\n    $location: JSON,\n    $provider: String,\n  ) {\n    createEvent(\n      input: {\n        title: $title\n        eventModelType: $eventModelType\n        location: $location\n        provider: $provider\n      }\n    ) {\n      event {\n        ...EventFragment\n      }\n    }\n  }\n  ","\n"])),x.QV);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var D=function(){var e=(0,P.D)(k,{update:function(e,t){var n=t.data.createEvent,r=e.readQuery({query:x.fM});e.writeQuery({query:x.fM,data:C(C({},r),{},{events:C(C({},r.events),{},{edges:[{node:n.event}].concat((0,Z.Z)(r.events.edges))})})})}}),t=(0,j.Z)(e,2),n=t[0];return t[1],{createEvent:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],n({variables:C({},e),optimisticResponse:{createEvent:{__typename:"CreateEventPayload",event:C({__typename:"Event",id:"tmp-".concat(Math.floor(1e4*Math.random())),_deleted:!1,createdAt:0,updatedAt:0,settings:{}},e)}}}).catch(function(e){})}}},R=n(39316),B=function(){return(0,f.BX)(f.HY,{children:[(0,f.tZ)("span",{className:"hidden lg:block",children:"Back to events list"}),(0,f.tZ)("span",{className:"block lg:hidden",children:(0,f.tZ)(R.x,{width:"20"})})]})},T=function(){(0,o.Z)({title:"Create New Event"}),(0,g.Z)([[(0,f.tZ)(B,{}),"/admin/events"]]);var e=D().createEvent,t=(0,u.useState)(null),n=t[0],r=t[1],a=function(t){e(t)};return(0,f.tZ)(f.HY,{children:n?(0,f.tZ)(h,{type:n,onSubmit:a}):(0,f.tZ)(w,{onSelect:r})})};T.navState={topLevel:"events",secondary:"virtual"};var X=T},66010:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/events/create",function(){return n(30368)}])},20516:function(e){e.exports={button:"Button_button__RRrLU",button_bestia:"Button_button_bestia__QRXEX",button__bg:"Button_button__bg__EuarU",button__span:"Button_button__span__Tcje3"}}},function(e){e.O(0,[4033,7858,9774,2888,179],function(){return e(e.s=66010)}),_N_E=e.O()}]);