(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9635],{26373:function(e,n,t){"use strict";t.d(n,{m:function(){return a}});var r=t(87462),i=t(67294),o=t(54142),a=i.forwardRef(function(e,n){return i.createElement(o.r,(0,r.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 28 28"},e,{ref:n}),i.createElement("path",{d:"M24 13h-9V4a1 1 0 1 0-2 0v9H4a1 1 0 1 0 0 2h9v9a1 1 0 1 0 2 0v-9h9a1 1 0 1 0 0-2z"}))});a.displayName="Add"},75375:function(e,n,t){"use strict";var r=t(50029),i=t(87794),o=t.n(i),a=t(50196),l=t(67294),c=function(){var e,n=(0,l.useState)(""),t=n[0],i=n[1];return(0,l.useEffect)(function(){i(localStorage.getItem("token"))},[]),{sendInvite:(0,l.useCallback)((e=(0,r.Z)(o().mark(function e(n){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.ZP.request({method:"post",url:"/api/v1/users/send_invitation",headers:{Authorization:"Bearer ".concat(t)},data:{user_ids:n}}).then(function(e){console.log("then...."),console.log(e)});case 2:case"end":return e.stop()}},e)})),function(n){return e.apply(this,arguments)}),[t])}};n.Z=c},71764:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return D}});var r,i=t(40350),o=t(71641),a=t(67294),l=t(5564),c=t(50051),s=t(70442),u=t(79939),d=t(96420),f=t(17674),m=t(50319),h=t(71383),p=(0,t(17283).Ps)(r||(r=(0,h.Z)(["\n  mutation DeleteUser(\n    $id: ID!\n  ) {\n    deleteUser(\n      id: $id\n    ) {\n      user {\n        id\n        _deleted @client\n      }\n    }\n  }\n"]))),v=function(){var e=(0,m.D)(p,{refetchQueries:[c.fo]}),n=(0,f.Z)(e,2),t=n[0];return n[1],{deleteUser:function(e){t({variables:{id:e},optimisticResponse:{deleteUser:{__typename:"DeleteUserPayload",user:{__typename:"User",id:e,_deleted:!0}}}})}}},g=t(9023),w=t(35944),Z=function(e){var n=e.user,t=(null==n?void 0:n.id)&&"".concat("/admin/users/edit","?id=").concat(n.id),r=v().deleteUser,i=(0,g.Z)({type:"user",name:n.fullName,onConfirm:function(){return r(n.id)}}).confirmDelete,o=[{label:"Edit user",href:t,capability:"UpdateUser"},{label:(0,w.tZ)("span",{className:"text-red-500",children:"Delete user"}),capability:"DeleteUser",onClick:i}];return(0,w.tZ)(d.Z,{menuItems:o,buttonText:"Actions"})},b=t(75375),_=function(){var e=(0,o.a)(c.fo),n=(e.loading,e.error,e.data),t=(0,a.useMemo)(function(){var e,t;return(null==n?void 0:null===(e=n.users)||void 0===e?void 0:null===(t=e.edges)||void 0===t?void 0:t.map(function(e){return e.node}))||[]},[n]),r=(0,a.useMemo)(function(){return[{header:"User ",accessorFn:function(e){return e.fullName},cell:function(e){var n=e.cell;return(0,w.tZ)(s.Z,{title:n.row.original.fullName,secondary:n.row.original.email,href:n.row.original.id&&"".concat("/admin/users/edit","?id=").concat(n.row.original.id),imageSrc:n.row.original.profileImageUrl,icon:(0,w.tZ)(u.n,{className:"hidden w-auto h-full bg-grey-500 text-main-secondary text-opacity-50"}),placeholder:"/images/user-generic.png"})}},{header:"Groups",accessorFn:function(e){return e.groups.edges.map(function(e){return e.node.name}).join(", ")},cell:function(e){return e.cell.getValue()||"-"}},{header:"Global Roles",id:"roles",cell:function(e){return e.cell.row.original.roles.filter(function(e){return"User"!==e.name}).map(function(e){return e.name}).join(", ")||"-"}},{width:300,header:"Actions",accessorKey:"actions",cell:function(e){var n=e.cell;return(0,w.tZ)(Z,{user:n.row.original})}}]},[]),i=(0,a.useState)({}),d=i[0],f=i[1],m=(0,b.Z)().sendInvite,h=[{label:"Send invites to selected users",onClick:(0,a.useCallback)(function(){m(d)},[d])},{label:(0,w.tZ)("span",{className:"text-red-500",children:"Delete users"}),onClick:console.log("test")}];return(0,w.tZ)(l.Z,{tableData:t,tableCols:r,bulkActions:h,onRowSelect:f})},N=t(24545),k=t(26373),y=t(87462),U=t(54142),C=a.forwardRef(function(e,n){return a.createElement(U.r,(0,y.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),a.createElement("path",{d:"m12 18 4-5h-3V2h-2v11H8z"}),a.createElement("path",{d:"M19 9h-4v2h4v9H5v-9h4V9H5c-1.103 0-2 .897-2 2v9c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-9c0-1.103-.897-2-2-2z"}))});C.displayName="Import";var E=function(){return(0,w.BX)(w.HY,{children:[(0,w.tZ)("span",{className:"hidden lg:block",children:"Create new user"}),(0,w.tZ)("span",{className:"block lg:hidden",children:(0,w.tZ)(k.m,{width:"20"})})]})},x=function(){return(0,w.BX)(w.HY,{children:[(0,w.tZ)("p",{className:"hidden lg:block",children:"Import users"}),(0,w.tZ)("span",{className:"block lg:hidden",children:(0,w.tZ)(C,{width:"20"})})]})},A=function(){return(0,i.Z)({title:"Users"}),(0,N.Z)([[(0,w.tZ)(E,{}),"/admin/users/create"],[(0,w.tZ)(x,{}),"/admin/users/import"]]),(0,w.tZ)(w.HY,{children:(0,w.tZ)(_,{})})};A.navState={topLevel:"users",secondary:"overview"};var D=A},64168:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return t(71764)}])}},function(e){e.O(0,[6644,9255,9774,2888,179],function(){return e(e.s=64168)}),_N_E=e.O()}]);