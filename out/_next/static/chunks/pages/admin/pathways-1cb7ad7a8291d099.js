(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2419],{26373:function(n,e,t){"use strict";t.d(e,{m:function(){return o}});var a=t(87462),i=t(67294),r=t(54142),o=i.forwardRef(function(n,e){return i.createElement(r.r,(0,a.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 28 28"},n,{ref:e}),i.createElement("path",{d:"M24 13h-9V4a1 1 0 1 0-2 0v9H4a1 1 0 1 0 0 2h9v9a1 1 0 1 0 2 0v-9h9a1 1 0 1 0 0-2z"}))});o.displayName="Add"},78773:function(n,e,t){"use strict";var a=t(20516),i=t.n(a),r=t(35944),o=function(n){var e=n.onClick,t=n.disabled,a=n.type,o=n.displayType,c=n.size,l=n.className,d=n.children,u="bg-main group-hover:bg-opacity-80 transition-colors duration-1000";return(void 0===o?"normal":o)==="alert"&&(u="bg-red-800 group-hover:bg-red-700 transition-colors duration-1000"),(0,r.BX)("button",{type:void 0===a?"button":a,disabled:void 0!==t&&t,className:"\n        ".concat(l,"\n        ").concat(i().button,"\n        ").concat(i().button_bestia,"\n        ").concat("sm"===c?"px-1":"px-8","\n\n        min-w-16 py-2 \n        whitespace-nowrap nowrap\n        border border-transparent rounded-md\n        text-sm\n        group\n        disabled bg-main text-white\n        focus:bg-opacity-50 focus:outline-none \n        active:bg-opacity-50 \n      "),onClick:e,children:[(0,r.tZ)("div",{className:"".concat(i().button__bg," ").concat(u)}),(0,r.tZ)("span",{className:i().button__span,children:d})]})};e.Z=o},64202:function(n,e,t){"use strict";t.d(e,{Z:function(){return c}});var a=t(90116),i=t(25440),r=t.n(i),o=t(35944);function c(n){var e=n.text,t=n.className;return(0,o.BX)("div",{className:"".concat(t," display flex-col text-center text-main-secondary mx-auto"),children:[e,(0,o.tZ)("div",{className:r().loadingCubeGrid,children:(0,a.Z)(Array(9)).map(function(n,e){return(0,o.tZ)("div",{className:"".concat(r().loadingCube," ").concat(r().loadingCube1," ").concat(r()["loadingCube".concat(e+1)]," bg-main-secondary")},e)})})]})}},46771:function(n,e,t){"use strict";t.d(e,{w:function(){return l}});var a=t(94225),i=t(13433),r=t(67814),o=t(35944);function c(n){var e=n.className,t=n.notice,i=n.children,c=function(){(0,a.dy)((0,a.dy)().filter(function(n){return n.id!==t.id}))};return(0,o.tZ)("div",{className:"min-h-60 w-full",children:(0,o.BX)("div",{className:"w-full rounded-2xl flex items-center border-l-20 border-main text-main-secondary py-4 px-6 mb-6 ".concat("bg-main bg-opacity-10"," ").concat(e),children:[(0,o.tZ)(r.G,{className:"h-6 mr-9 text-main",icon:{prefix:"fas",iconName:"file-pdf"}}),(0,o.tZ)("div",{className:"w-full",children:(null==t?void 0:t.content)||i}),(null==t?void 0:t.id)&&(0,o.tZ)("a",{className:"cursor-pointer",onClick:c,children:"Dismiss"})]})})}var l=function(){var n=(0,i.l)(a.dy);return(0,o.tZ)(o.HY,{children:n&&n.map(function(n,e){return(0,o.tZ)(c,{notice:n},e)})})}},81896:function(n,e,t){"use strict";var a=t(22345),i=t(71641);e.Z=function(){var n=(0,i.a)(a.kQ),e=n.loading,t=n.error,r=n.data;return{pathways:(r=void 0===r?{}:r).pathways,loading:e,error:t}}},40350:function(n,e,t){"use strict";var a=t(67294),i=t(94225);e.Z=function(n){(0,a.useEffect)(function(){(0,i.jL)(n)},[n])}},64325:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return L}});var a,i=t(46771),r=t(67294),o=t(5564),c=t(81896),l=t(59499),d=t(17674),u=t(50319),s=t(71383),p=(0,t(17283).Ps)(a||(a=(0,s.Z)(["\n  mutation DeletePathway(\n    $id: ID!\n  ) {\n    deletePathway(\n      id: $id\n    ) {\n      message\n      contentItem {\n        id\n        _deleted @client\n      }\n    }\n  }\n"]))),g=t(22345);function b(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,a)}return t}function f(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?b(Object(t),!0).forEach(function(e){(0,l.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var m=function(){var n=(0,u.D)(p),e=(0,d.Z)(n,2),t=e[0];return e[1],{deletePathway:function(n){t({variables:{id:n},optimisticResponse:{deletePathway:{__typename:"DeleteContentItemPayload",contentItem:{id:n,__typename:"ContentItem",_deleted:!0},message:""}},update:function(e,t){t.data;var a=e.readFragment({id:"ContentItem:".concat(n),fragment:g.dp,fragmentName:"PathwayFragment"});a&&e.writeFragment({id:"ContentItem:".concat(n),fragment:g.dp,fragmentName:"PathwayFragment",data:f(f({},a),{},{_deleted:!0})})}})}}},_=t(64202),h=t(70442),y=t(58042),v=t(96420),w=t(9023),C=t(35944),Z=function(n){var e=n.pathway,t=(null==e?void 0:e.id)&&"".concat("/admin/pathways/edit","?id=").concat(e.id),a=m().deletePathway,i=(0,w.Z)({type:"pathway",name:e.title,onConfirm:function(){return a(e.id)}}).confirmDelete,r=[{label:"Edit pathway",href:t,capability:"UpdatePathway"},{label:(0,C.tZ)("span",{className:"text-red-500",children:"Delete pathway"}),onClick:i,capability:"DeletePathway"}];return(0,C.tZ)(v.Z,{menuItems:r,buttonText:"Actions"})},N=function(){var n=(0,c.Z)(),e=n.loading,t=n.error,a=n.pathways;m().deletePathway;var i=(0,r.useMemo)(function(){var n;return(null==a?void 0:null===(n=a.edges)||void 0===n?void 0:n.map(function(n){return n.node}).filter(function(n){return!n._deleted}))||[]},[a]),l=(0,r.useMemo)(function(){return[{header:"Pathway",accessorKey:"title",cell:function(n){var e,t,a,i=n.cell;return(0,C.tZ)(h.Z,{image:i.row.original.image,icon:(0,C.tZ)(y.X,{className:"p-1"}),title:i.getValue(),secondary:null===(e=i.row.original)||void 0===e?void 0:null===(t=e.tags)||void 0===t?void 0:null===(a=t.map)||void 0===a?void 0:a.call(t,function(n){return n.label}).join(", "),href:!1===i.row.original.shared&&i.row.original.id&&"".concat("/admin/pathways/edit","?pid=").concat(i.row.original.id)})}},{header:"Active users",accessorFn:function(n){return n.users.totalCount},cell:function(n){var e,t=null===(e=n.cell.row.original.users)||void 0===e?void 0:e.totalCount;return(0,C.tZ)("span",{children:"".concat(t||0," user").concat(1!==t?"s":"")})}},{header:"Categories",accessorKey:"tags",cell:function(n){var e=n.cell.getValue().map(function(n){return n.label}).join(", ");return(0,C.tZ)("span",{children:e})}},{width:300,header:"Actions",accessorKey:"actions",cell:function(n){var e=n.cell;return(0,C.tZ)(Z,{pathway:e.row.original})}}]},[]);return(0,C.BX)(C.HY,{children:[e&&(0,C.tZ)(_.Z,{}),t&&(0,C.tZ)("p",{children:"Unable to fetch pathways."}),!e&&!t&&(0,C.tZ)(o.Z,{tableData:i,tableCols:l})]})},P=t(95815),x=t(40350),O=t(24545),S=t(26373),D=function(){return(0,C.BX)(C.HY,{children:[(0,C.tZ)("span",{className:"hidden lg:block",children:"Create new pathway"}),(0,C.tZ)("span",{className:"block lg:hidden",children:(0,C.tZ)(S.m,{width:"20"})})]})},j=function(){(0,x.Z)({title:"Pathways"});var n=(0,r.useContext)(P.t);return n.handleModal,n.closeModal,(0,O.Z)([[(0,C.tZ)(D,{}),"/admin/pathways/create"]]),(0,C.BX)(C.HY,{children:[(0,C.tZ)(i.w,{}),(0,C.tZ)(N,{})]})};j.navState={topLevel:"courses",secondary:"pathways"};var L=j},24333:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/pathways",function(){return t(64325)}])},20516:function(n){n.exports={button:"Button_button__RRrLU",button_bestia:"Button_button_bestia__QRXEX",button__bg:"Button_button__bg__EuarU",button__span:"Button_button__span__Tcje3"}},25440:function(n){n.exports={loadingCubeGrid:"LoadingSpinner_loadingCubeGrid__9Okru",loadingCube:"LoadingSpinner_loadingCube__WnqWw",loadingCubeGridScaleDelay:"LoadingSpinner_loadingCubeGridScaleDelay__S4rcT",loadingCube1:"LoadingSpinner_loadingCube1__9Xdf3",loadingCube2:"LoadingSpinner_loadingCube2__9hDGq",loadingCube3:"LoadingSpinner_loadingCube3__pmAJ5",loadingCube4:"LoadingSpinner_loadingCube4__QGZuW",loadingCube5:"LoadingSpinner_loadingCube5__vJpHG",loadingCube6:"LoadingSpinner_loadingCube6__3tWSf",loadingCube7:"LoadingSpinner_loadingCube7__PBJGj",loadingCube8:"LoadingSpinner_loadingCube8__mJD7v",loadingCube9:"LoadingSpinner_loadingCube9__oiwQt"}}},function(n){n.O(0,[6644,744,9774,2888,179],function(){return n(n.s=24333)}),_N_E=n.O()}]);