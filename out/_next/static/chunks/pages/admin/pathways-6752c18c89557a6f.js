(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2419],{26373:function(e,n,t){"use strict";t.d(n,{m:function(){return o}});var a=t(87462),i=t(67294),r=t(54142),o=i.forwardRef(function(e,n){return i.createElement(r.r,(0,a.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 28 28"},e,{ref:n}),i.createElement("path",{d:"M24 13h-9V4a1 1 0 1 0-2 0v9H4a1 1 0 1 0 0 2h9v9a1 1 0 1 0 2 0v-9h9a1 1 0 1 0 0-2z"}))});o.displayName="Add"},64202:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var a=t(90116),i=t(25440),r=t.n(i),o=t(35944);function l(e){var n=e.text,t=e.className;return(0,o.BX)("div",{className:"".concat(t," display flex-col text-center text-main-secondary mx-auto"),children:[n,(0,o.tZ)("div",{className:r().loadingCubeGrid,children:(0,a.Z)(Array(9)).map(function(e,n){return(0,o.tZ)("div",{className:"".concat(r().loadingCube," ").concat(r().loadingCube1," ").concat(r()["loadingCube".concat(n+1)]," bg-main-secondary")},n)})})]})}},46771:function(e,n,t){"use strict";t.d(n,{w:function(){return c}});var a=t(94225),i=t(13433),r=t(67814),o=t(35944);function l(e){var n=e.className,t=e.notice,i=e.children,l=function(){(0,a.dy)((0,a.dy)().filter(function(e){return e.id!==t.id}))};return(0,o.tZ)("div",{className:"min-h-60 w-full",children:(0,o.BX)("div",{className:"w-full rounded-2xl flex items-center border-l-20 border-main text-main-secondary py-4 px-6 mb-6 ".concat("bg-main bg-opacity-10"," ").concat(n),children:[(0,o.tZ)(r.G,{className:"h-6 mr-9 text-main",icon:{prefix:"fas",iconName:"file-pdf"}}),(0,o.tZ)("div",{className:"w-full",children:(null==t?void 0:t.content)||i}),(null==t?void 0:t.id)&&(0,o.tZ)("a",{className:"cursor-pointer",onClick:l,children:"Dismiss"})]})})}var c=function(){var e=(0,i.l)(a.dy);return(0,o.tZ)(o.HY,{children:e&&e.map(function(e,n){return(0,o.tZ)(l,{notice:e},n)})})}},81896:function(e,n,t){"use strict";var a=t(22345),i=t(71641);n.Z=function(){var e=(0,i.a)(a.kQ),n=e.loading,t=e.error,r=e.data;return{pathways:(r=void 0===r?{}:r).pathways,loading:n,error:t}}},64325:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var a,i=t(46771),r=t(67294),o=t(5564),l=t(81896),c=t(59499),d=t(17674),u=t(50319),s=t(71383),p=(0,t(17283).Ps)(a||(a=(0,s.Z)(["\n  mutation DeletePathway(\n    $id: ID!\n  ) {\n    deletePathway(\n      id: $id\n    ) {\n      message\n      contentItem {\n        id\n        _deleted @client\n      }\n    }\n  }\n"]))),f=t(22345);function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach(function(n){(0,c.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var h=function(){var e=(0,u.D)(p),n=(0,d.Z)(e,2),t=n[0];return n[1],{deletePathway:function(e){t({variables:{id:e},optimisticResponse:{deletePathway:{__typename:"DeleteContentItemPayload",contentItem:{id:e,__typename:"ContentItem",_deleted:!0},message:""}},update:function(n,t){t.data;var a=n.readFragment({id:"ContentItem:".concat(e),fragment:f.dp,fragmentName:"PathwayFragment"});a&&n.writeFragment({id:"ContentItem:".concat(e),fragment:f.dp,fragmentName:"PathwayFragment",data:m(m({},a),{},{_deleted:!0})})}})}}},b=t(64202),w=t(70442),y=t(58042),v=t(96420),_=t(9023),C=t(35944),Z=function(e){var n=e.pathway,t=(null==n?void 0:n.id)&&"".concat("/admin/pathways/edit","?id=").concat(n.id),a=h().deletePathway,i=(0,_.Z)({type:"pathway",name:n.title,onConfirm:function(){return a(n.id)}}).confirmDelete,r=[{label:"Edit pathway",href:t,capability:"UpdatePathway"},{label:(0,C.tZ)("span",{className:"text-red-500",children:"Delete pathway"}),onClick:i,capability:"DeletePathway"}];return(0,C.tZ)(v.Z,{menuItems:r,buttonText:"Actions"})},P=function(){var e=(0,l.Z)(),n=e.loading,t=e.error,a=e.pathways;h().deletePathway;var i=(0,r.useMemo)(function(){var e;return(null==a?void 0:null===(e=a.edges)||void 0===e?void 0:e.map(function(e){return e.node}).filter(function(e){return!e._deleted}))||[]},[a]),c=(0,r.useMemo)(function(){return[{header:"Pathway",accessorKey:"title",cell:function(e){var n,t,a,i=e.cell;return(0,C.tZ)(w.Z,{image:i.row.original.image,icon:(0,C.tZ)(y.X,{className:"p-1"}),title:i.getValue(),secondary:null===(n=i.row.original)||void 0===n?void 0:null===(t=n.tags)||void 0===t?void 0:null===(a=t.map)||void 0===a?void 0:a.call(t,function(e){return e.label}).join(", "),href:!1===i.row.original.shared&&i.row.original.id&&"".concat("/admin/pathways/edit","?pid=").concat(i.row.original.id)})}},{header:"Active users",accessorFn:function(e){return e.users.totalCount},cell:function(e){var n,t=null===(n=e.cell.row.original.users)||void 0===n?void 0:n.totalCount;return(0,C.tZ)("span",{children:"".concat(t||0," user").concat(1!==t?"s":"")})}},{header:"Categories",accessorKey:"tags",cell:function(e){var n=e.cell.getValue().map(function(e){return e.label}).join(", ");return(0,C.tZ)("span",{children:n})}},{width:300,header:"Actions",accessorKey:"actions",cell:function(e){var n=e.cell;return(0,C.tZ)(Z,{pathway:n.row.original})}}]},[]);return(0,C.BX)(C.HY,{children:[n&&(0,C.tZ)(b.Z,{}),t&&(0,C.tZ)("p",{children:"Unable to fetch pathways."}),!n&&!t&&(0,C.tZ)(o.Z,{tableData:i,tableCols:c})]})},N=t(95815),O=t(40350),S=t(24545),x=t(26373),D=function(){return(0,C.BX)(C.HY,{children:[(0,C.tZ)("span",{className:"hidden lg:block",children:"Create new pathway"}),(0,C.tZ)("span",{className:"block lg:hidden",children:(0,C.tZ)(x.m,{width:"20"})})]})},j=function(){(0,O.Z)({title:"Pathways"});var e=(0,r.useContext)(N.t);return e.handleModal,e.closeModal,(0,S.Z)([[(0,C.tZ)(D,{}),"/admin/pathways/create"]]),(0,C.BX)(C.HY,{children:[(0,C.tZ)(i.w,{}),(0,C.tZ)(P,{})]})};j.navState={topLevel:"courses",secondary:"pathways"};var L=j},24333:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/pathways",function(){return t(64325)}])},25440:function(e){e.exports={loadingCubeGrid:"LoadingSpinner_loadingCubeGrid__9Okru",loadingCube:"LoadingSpinner_loadingCube__WnqWw",loadingCubeGridScaleDelay:"LoadingSpinner_loadingCubeGridScaleDelay__S4rcT",loadingCube1:"LoadingSpinner_loadingCube1__9Xdf3",loadingCube2:"LoadingSpinner_loadingCube2__9hDGq",loadingCube3:"LoadingSpinner_loadingCube3__pmAJ5",loadingCube4:"LoadingSpinner_loadingCube4__QGZuW",loadingCube5:"LoadingSpinner_loadingCube5__vJpHG",loadingCube6:"LoadingSpinner_loadingCube6__3tWSf",loadingCube7:"LoadingSpinner_loadingCube7__PBJGj",loadingCube8:"LoadingSpinner_loadingCube8__mJD7v",loadingCube9:"LoadingSpinner_loadingCube9__oiwQt"}}},function(e){e.O(0,[6644,9255,9774,2888,179],function(){return e(e.s=24333)}),_N_E=e.O()}]);