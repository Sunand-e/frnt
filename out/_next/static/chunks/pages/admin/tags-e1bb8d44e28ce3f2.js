(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6487],{26373:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var r=n(87462),i=n(67294),a=n(54142),o=i.forwardRef(function(e,t){return i.createElement(a.r,(0,r.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 28 28"},e,{ref:t}),i.createElement("path",{d:"M24 13h-9V4a1 1 0 1 0-2 0v9H4a1 1 0 1 0 0 2h9v9a1 1 0 1 0 2 0v-9h9a1 1 0 1 0 0-2z"}))});o.displayName="Add"},57389:function(e,t,n){"use strict";var r=n(41664),i=n.n(r),a=n(20516),o=n.n(a),c=n(35944),l=function(e){var t,n=e.target,r=e.href,a=e.displayType,l=e.children,d=e.className,u=e.onClick;switch(void 0===a?"normal":a){case"cancel":t="bg-gray-200 group-hover:bg-gray-700 transition-colors duration-1000",o().button_grey;break;case"alert":t="bg-red-800 group-hover:bg-red-700 transition-colors duration-1000";break;default:t="bg-main group-hover:bg-opacity-80 transition-colors duration-1000",o().button}return(0,c.BX)(i(),{href:r,onClick:u,target:n,className:"\n      ".concat(d,"\n      ").concat(o().button,"\n      ").concat(o().button_bestia,"\n      min-w-16 py-2 px-8\n      whitespace-nowrap nowrap\n      border border-transparent rounded-md\n      text-sm\n      bg-main text-white\n      focus:bg-opacity-50 focus:outline-none \n      active:bg-opacity-50 \n    "),children:[(0,c.tZ)("div",{className:"".concat(o().button__bg," ").concat(t)}),(0,c.tZ)("span",{className:o().button__span,children:l})]})};t.Z=l},64202:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(90116),i=n(25440),a=n.n(i),o=n(35944);function c(e){var t=e.text,n=e.className;return(0,o.BX)("div",{className:"".concat(n," display flex-col text-center text-main-secondary mx-auto"),children:[t,(0,o.tZ)("div",{className:a().loadingCubeGrid,children:(0,r.Z)(Array(9)).map(function(e,t){return(0,o.tZ)("div",{className:"".concat(a().loadingCube," ").concat(a().loadingCube1," ").concat(a()["loadingCube".concat(t+1)]," bg-main-secondary")},t)})})]})}},70442:function(e,t,n){"use strict";var r=n(41664),i=n.n(r),a=n(35944),o=new Map([["none","rounded-none"],["md","rounded-md"],["full","rounded-full"]]),c=new Map([["fill","object-fill"],["cover","object-cover"],["contain","object-contain"]]),l=function(e){var t=e.href,n=e.children;return t?(0,a.tZ)(i(),{href:t,children:n}):n},d=function(e){var t=e.rounded,n=e.imgDivClass,r=e.title,i=e.objectFit,d=void 0===i?"cover":i,u=e.placeholder,s=void 0===u?null:u,g=e.secondary,f=void 0===g?null:g,m=e.image,b=void 0===m?null:m,p=e.imageSrc,h=void 0===p?null:p,v=e.icon,y=void 0===v?null:v,w=e.href;return(0,a.tZ)(l,{href:void 0===w?null:w,children:(0,a.BX)("div",{className:"flex items-center max-w-xs text-main-secondary",children:[(0,a.tZ)("div",{className:"h-10 w-10 flex justify-center items-center shrink-0 overflow-hidden ".concat(void 0===n?"":n," ").concat(o.get(void 0===t?"full":t)),children:b||h?(0,a.tZ)("img",{className:"h-10 w-10 ".concat(c.get(d)),src:h||"/uploaded_images/".concat(null==b?void 0:b.id,"?w=50"),alt:""}):(0,a.tZ)(a.HY,{children:null!=y?y:(0,a.tZ)("img",{className:"h-10 w-10 ".concat(c.get(d)),src:null!=s?s:"/images/placeholder-image.png",alt:""})})}),(0,a.BX)("div",{className:"ml-4",children:[(0,a.tZ)("div",{className:"font-medium text-gray-900",children:r}),f&&(0,a.tZ)("div",{className:"text-gray-500",children:f})]})]})})};t.Z=d},96420:function(e,t,n){"use strict";var r=n(35064),i=n(57349),a=n(71674),o=n(16294),c=n(35944),l=function(e){var t=e.menuItems,n=e.buttonText,l=e.align,d=(0,a.Z)().userHasCapability,u=!t.filter(function(e){return console.log("item.capability"),console.log(e.capability),!e.capability||d(e.capability)}).length,s=(0,c.BX)(r.v.Button,{disabled:u,className:"inline-flex justify-center rounded-md border border-gray-300 ".concat(u?"bg-gray-300 text-gray-400":"bg-white text-main-secondary"," bg-white px-4 py-2 text-sm font-medium shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-main focus:ring-offset-2 focus:ring-offset-gray-100"),children:[void 0===n?"Actions":n,(0,c.tZ)(i.Z,{className:"-mr-1 ml-2 h-5 w-5","aria-hidden":"true"})]});return(0,c.tZ)(o.Z,{align:void 0===l?"right":l,menuItems:t,button:s})};t.Z=l},5564:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(90116),i=n(74094),a=n(27060),o=n(67294),c=n(96420),l=n(35944),d=function(e){var t=e.bulkActions;return(0,l.tZ)(c.Z,{align:"left",menuItems:t,buttonText:"Bulk actions"})},u=n(59499),s=n(4730),g=["indeterminate","className"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var m=function(e){var t=e.indeterminate,n=e.className,r=(0,s.Z)(e,g),i=(0,o.useRef)(null);return(0,o.useEffect)(function(){"boolean"==typeof t&&(i.current.indeterminate=!r.checked&&t)},[i,t]),(0,l.tZ)("input",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({type:"checkbox",ref:i,className:(void 0===n?"":n)+" cursor-pointer h-4 w-4 rounded border-gray-300 text-main focus:ring-main"},r))},b=n(57815),p=function(e){var t=e.tableData,n=e.tableCols,c=(e.options,e.bulkActions),u=void 0===c?[]:c,s=e.onRowSelect,g=void 0===s?function(e){return null}:s,f=(0,o.useState)([]),p=f[0],h=f[1],v=(0,o.useState)("");v[0],v[1];var y=(0,o.useState)({}),w=y[0],Z=y[1],O=!!u.length,_=function(e){Z(e)};(0,o.useEffect)(function(){g(x.getSelectedRowModel().flatRows.map(function(e){return e.original.id}))},[w]);var C=[].concat((0,r.Z)(O?[{id:"select",header:function(e){var t=e.table;return(0,l.tZ)(m,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler()})},cell:function(e){var t=e.row;return(0,l.tZ)(m,{checked:t.getIsSelected(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler()})}}]:[]),(0,r.Z)(n)),x=(0,i.b7)({state:{sorting:p,rowSelection:w},columns:C,data:t,onSortingChange:h,onRowSelectionChange:_,getCoreRowModel:(0,a.sC)(),getSortedRowModel:(0,a.tj)(),getFilteredRowModel:(0,a.vL)(),debugTable:!0});return(0,l.BX)(l.HY,{children:[(0,l.tZ)("div",{className:"mb-2",children:!!u.length&&(0,l.tZ)(d,{bulkActions:u})}),(0,l.tZ)(b.Z,{table:x,selectable:O})]})}},57815:function(e,t,n){"use strict";var r=n(59499),i=n(74094),a=n(16246),o=n(35944);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=function(e){var t=e.table,n=e.selectable;return(0,o.tZ)("div",{className:"flex flex-col",children:(0,o.tZ)("div",{className:"-my-2 overflow-y-visible sm:-mx-6 lg:-mx-8",children:(0,o.tZ)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,o.tZ)("div",{className:"shadow overflow-y-visible border-b border-gray-200 sm:rounded-lg",children:(0,o.BX)("table",{className:"min-w-full divide-y divide-gray-200 bg-white",children:[(0,o.tZ)("thead",{className:"bg-gray-50",children:t.getHeaderGroups().map(function(e){return(0,o.tZ)("tr",{children:e.headers.map(function(e,t){var r,c;return(0,o.BX)("th",{colSpan:e.colSpan,className:"px-6 py-3 text-left h-11 text-xs font-medium max-w-max text-gray-500 uppercase tracking-wider",style:l({textAlign:t>(n?1:0)?"center":"left"},(null===(r=e.column.columnDef)||void 0===r?void 0:r.id)==="select"?{paddingRight:0,width:"16px"}:{}),children:[" ",e.isPlaceholder?null:(0,o.tZ)("div",{className:"inline-block",children:(0,o.BX)("div",{className:"".concat(e.column.getCanSort()?"cursor-pointer select-none":""," flex space-x-2 max-w-max items-center justify-center"),onClick:e.column.getToggleSortingHandler(),children:[(0,o.tZ)("div",{children:(0,i.ie)(e.column.columnDef.header,e.getContext())}),e.column.getIsSorted()&&(0,o.tZ)("div",{className:"w-4 h-4 flex items-center",children:null!==(c=({asc:(0,o.tZ)(a.U,{className:"w-full"}),desc:(0,o.tZ)(a.U,{className:"rotate-180"})})[e.column.getIsSorted()])&&void 0!==c?c:null})]})})]},e.id)})},e.id)})}),(0,o.tZ)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.getRowModel().rows.map(function(e){return(0,o.tZ)("tr",{children:e.getVisibleCells().map(function(e,t){var r;return(0,o.tZ)("td",{className:"".concat(t>(n?1:0)?"text-center":""," px-6 py-4 text-sm text-gray-900"),style:l({},(null===(r=e.column.columnDef)||void 0===r?void 0:r.id)==="select"?{paddingRight:0,width:"16px"}:{}),children:(0,i.ie)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})})})})})};t.Z=d},2528:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var r,i,a=n(67294),o=n(40350),c=n(24545),l=n(95815),d=n(90116),u=n(59499),s=n(17674),g=n(50319),f=n(71383),m=n(17283),b=n(54232),p=(0,m.Ps)(r||(r=(0,f.Z)(["\n  mutation CreateTag(\n    $label: String!,\n    $tagType: String!,\n    $mediaItemId: ID,\n  ) {\n    createTag(\n      input: {\n        label: $label,\n        tagType: $tagType,\n        mediaItemId: $mediaItemId,\n      }\n    ) {\n      tag {\n        ...TagFragment\n      }\n    }\n  }\n  ","\n"])),b.$v);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(){var e=(0,g.D)(p,{update:function(e,t){var n=t.data.createTag,r=e.readQuery({query:b.F$});e.writeQuery({query:b.F$,data:v(v({},r),{},{tags:[n.tag].concat((0,d.Z)(r.tags))})})}}),t=(0,s.Z)(e,2),n=t[0];return t[1],{createTag:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n({variables:v({},e),optimisticResponse:{createTag:{__typename:"CreateTagPayload",tag:v({__typename:"Tag",id:"tmp-".concat(Math.floor(1e4*Math.random())),image:null},e)}},onCompleted:t}).catch(function(e){})}}},w=n(76267),Z=n(24249),O=n(35944),_=function(e){e.type;var t=(0,Z.t)(),n=(0,a.useContext)(l.t).closeModal,r=y().createTag,i=(0,a.useCallback)(function(e){r(e),t.push("/admin/tags"),n()},[]);return(0,O.tZ)(O.HY,{children:(0,O.tZ)(w.Z,{isModal:!0,onSubmit:i})})},C=n(5564),x=n(57389),j=(0,m.Ps)(i||(i=(0,f.Z)(["\n  mutation DeleteTag(\n    $id: ID!\n  ) {\n    deleteTag(\n      id: $id\n    ) {\n      tag {\n        id\n        _deleted @client\n      }\n      message\n    }\n  }\n"])));function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P=function(){var e=(0,g.D)(j,{refetchQueries:[b.F$]}),t=(0,s.Z)(e,2),n=t[0];return t[1],{deleteTag:function(e){n({variables:{id:e},optimisticResponse:{__typename:"Mutation",deleteTag:{__typename:"DeleteTagPayload",tag:{id:e,_deleted:!0},message:""}},update:function(t,n){n.data;var r=t.readFragment({id:"Tag:".concat(e),fragment:b.$v});r&&t.writeFragment({id:"Tag:".concat(e),fragment:b.$v,data:N(N({},r),{},{_deleted:!0})})}})}}},D=n(78773),k=n(70442),T=n(45551),I=n(64202),E=n(61458),R=function(){var e=(0,E.Z)(),t=e.tags,n=e.loading,r=e.error,i=e.courses,o=e.resources,c=e.pathways,l=P().deleteTag,u=function(e){l(e)},s="/admin/tags/edit",g=(0,a.useMemo)(function(){return(null==t?void 0:t.filter(function(e){return!e._deleted}))||[]},[t]),f=(0,a.useMemo)(function(){return[{header:"Category Name",accessorKey:"label",cell:function(e){var t,n=e.cell;return(0,O.tZ)(k.Z,{image:n.row.original.image,icon:(0,O.tZ)(T.W,{className:"p-2"}),title:n.getValue(),secondary:null===(t=n.row.original.tags)||void 0===t?void 0:t.map(function(e){return e.label}).join(", "),href:n.row.original.id&&"".concat(s,"?id=").concat(n.row.original.id),imgDivClass:"bg-main text-white"})}},{header:"Item count",cell:function(e){var t=e.cell,n=[].concat((0,d.Z)(null==i?void 0:i.edges),(0,d.Z)(null==o?void 0:o.edges),(0,d.Z)(null==c?void 0:c.edges)).filter(function(e){return e.node.tags.map(function(e){return e.id}).includes(t.row.original.id)}).length;return console.log("catItemCount"),console.log(n),(0,O.tZ)("span",{children:"".concat(n||0," item").concat(1!==n?"s":"")})}},{width:300,header:"Actions",cell:function(e){var t=e.cell,n=t.row.original.id&&"".concat(s,"?id=").concat(t.row.original.id);return(0,O.BX)("div",{className:"flex space-x-4 justify-center",children:[(0,O.tZ)(x.Z,{href:n,children:"Edit"}),(0,O.tZ)(D.Z,{onClick:function(){return u(t.row.original.id)},children:"Delete"})]})}}]},[i,o,c]);return(0,O.BX)(O.HY,{children:[n&&(0,O.tZ)(I.Z,{}),r&&(0,O.tZ)("p",{children:"Unable to fetch tags."}),!n&&!r&&(0,O.tZ)(C.Z,{tableData:g,tableCols:f})]})},B=n(26373),M=function(){return(0,O.BX)(O.HY,{children:[(0,O.tZ)("span",{className:"hidden lg:block",children:"Create new category"}),(0,O.tZ)("span",{className:"block lg:hidden",children:(0,O.tZ)(B.m,{width:"20"})})]})},X=function(){(0,o.Z)({title:"Categories"});var e=(0,a.useContext)(l.t).handleModal,t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"category";e({title:"Create a new ".concat(t),size:"lg",content:(0,O.tZ)(_,{type:t})})};return(0,c.Z)([[(0,O.tZ)(M,{}),function(){return t()}]]),(0,O.tZ)(O.HY,{children:(0,O.tZ)(R,{})})};X.navState={topLevel:"categories"};var L=X},17034:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/tags",function(){return n(2528)}])},25440:function(e){e.exports={loadingCubeGrid:"LoadingSpinner_loadingCubeGrid__9Okru",loadingCube:"LoadingSpinner_loadingCube__WnqWw",loadingCubeGridScaleDelay:"LoadingSpinner_loadingCubeGridScaleDelay__S4rcT",loadingCube1:"LoadingSpinner_loadingCube1__9Xdf3",loadingCube2:"LoadingSpinner_loadingCube2__9hDGq",loadingCube3:"LoadingSpinner_loadingCube3__pmAJ5",loadingCube4:"LoadingSpinner_loadingCube4__QGZuW",loadingCube5:"LoadingSpinner_loadingCube5__vJpHG",loadingCube6:"LoadingSpinner_loadingCube6__3tWSf",loadingCube7:"LoadingSpinner_loadingCube7__PBJGj",loadingCube8:"LoadingSpinner_loadingCube8__mJD7v",loadingCube9:"LoadingSpinner_loadingCube9__oiwQt"}}},function(e){e.O(0,[6107,6644,3434,9559,9774,2888,179],function(){return e(e.s=17034)}),_N_E=e.O()}]);